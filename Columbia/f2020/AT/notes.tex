\documentclass[leqno, openany]{memoir}
\setulmarginsandblock{3.5cm}{3.5cm}{*}
\setlrmarginsandblock{3cm}{3.5cm}{*}
\checkandfixthelayout

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
%\usepackage{MnSymbol}
\usepackage{bm}
\usepackage{accents}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{automata,positioning}
\usepackage{tikz-cd}
\usepackage{forest}
\usepackage{braket} 
\usepackage{listings}
\usepackage{mdframed}
\usepackage{verbatim}
\usepackage{physics}
%\usepackage{/home/patrickl/homework/macaulay2}

%font
\usepackage[sc]{mathpazo}
\usepackage{eulervm}
\usepackage[scaled=0.86]{berasans}
\usepackage{inconsolata}
\usepackage{microtype}

%CS packages
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{algorithm}

% typeset and bib
\usepackage[english]{babel} 
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc} 
\usepackage[backend=biber, style=alphabetic]{biblatex}
\usepackage[bookmarks, colorlinks, breaklinks]{hyperref} 
\hypersetup{linkcolor=black,citecolor=black,filecolor=black,urlcolor=black}

% other formatting packages
\usepackage{float}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage{titling}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{parskip}

\usepackage{lipsum}

% delimiters
\DeclarePairedDelimiter{\gen}{\langle}{\rangle}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}


\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{quest}[thm]{Question}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{defns}[thm]{Definitions}
\newtheorem{con}[thm]{Construction}
\newtheorem{exm}[thm]{Example}
\newtheorem{exms}[thm]{Examples}
\newtheorem{notn}[thm]{Notation}
\newtheorem{notns}[thm]{Notations}
\newtheorem{addm}[thm]{Addendum}
\newtheorem{exer}[thm]{Exercise}

\theoremstyle{remark}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{rmks}[thm]{Remarks}
\newtheorem{warn}[thm]{Warning}
\newtheorem{sch}[thm]{Scholium}


% unnumbered theorems
\theoremstyle{plain}
\newtheorem*{thm*}{Theorem}
\newtheorem*{prop*}{Proposition}
\newtheorem*{lem*}{Lemma}
\newtheorem*{cor*}{Corollary}
\newtheorem*{conj*}{Conjecture}

% unnumbered definitions
\theoremstyle{definition}
\newtheorem*{defn*}{Definition}
\newtheorem*{exer*}{Exercise}
\newtheorem*{defns*}{Definitions}
\newtheorem*{con*}{Construction}
\newtheorem*{exm*}{Example}
\newtheorem*{exms*}{Examples}
\newtheorem*{notn*}{Notation}
\newtheorem*{notns*}{Notations}
\newtheorem*{addm*}{Addendum}


\theoremstyle{remark}
\newtheorem*{rmk*}{Remark}

% shortcuts
\newcommand{\Ima}{\mathrm{Im}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\Q}{\mathbb{Q}}
\renewcommand{\k}{\Bbbk}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\M}{\overline{M}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\h}{\mathfrak{h}}
\newcommand{\n}{\mathfrak{n}}
\renewcommand{\b}{\mathfrak{b}}
\newcommand{\ep}{\varepsilon}
\newcommand*{\dt}[1]{%
   \accentset{\mbox{\Huge\bfseries .}}{#1}}
\renewcommand{\abstractname}{Official Description}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\mf}[1]{\mathfrak{#1}}
\newcommand{\mr}[1]{\mathrm{#1}}
\newcommand{\ms}[1]{\mathsf{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}

\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\spec}{Spec}

% Section formatting
\titleformat{\section}
    {\Large\sffamily\scshape\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[runin]
    {\large\sffamily\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}[runin]{\normalfont\itshape}{\thesubsubsection}{1em}{}

\title{COURSE TITLE}
\author{Lectures by INSTRUCTOR, Notes by NOTETAKER}
\date{SEMESTER}

\newcommand*{\titleSW}
    {\begingroup% Story of Writing
    \raggedleft
    \vspace*{\baselineskip}
    {\Huge\itshape Algebraic Topology \\ Fall 2020}\\[\baselineskip]
    {\large\itshape Notes by Patrick Lei}\\[0.2\textheight]
    {\Large Lectures by Mohammed Abouzaid}\par
    \vfill
    {\Large \sffamily Columbia University}
    \vspace*{\baselineskip}
\endgroup}
\pagestyle{simple}

\chapterstyle{ell}


%\renewcommand{\cftchapterpagefont}{}
\renewcommand\cftchapterfont{\sffamily}
\renewcommand\cftsectionfont{\scshape}
\renewcommand*{\cftchapterleader}{}
\renewcommand*{\cftsectionleader}{}
\renewcommand*{\cftsubsectionleader}{}
\renewcommand*{\cftchapterformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsubsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}
\renewcommand{\cftsubsectionafterpnum}{\cftparfillskip}
\setrmarg{3.55em plus 1fil}
\setsecnumdepth{subsection}
\maxsecnumdepth{subsection}
\settocdepth{subsection}

\begin{document}
    
\begin{titlingpage}
\titleSW
\end{titlingpage}

\thispagestyle{empty}
\section*{Disclaimer}%
\label{sec:disclaimer}

These notes were taken during lecture using the \texttt{vimtex} package of the
editor \texttt{neovim}.  Any errors are mine and not the instructor's.  In
addition, my notes are picture-free (but will include commutative diagrams) and
are a mix of my mathematical style and that of the instructor.  If you find any
errors, please contact me at \texttt{plei@math.columbia.edu}.  \newpage


\tableofcontents

\chapter{Basics of Homotopy Theory}% \label{cha:basic_notions}

\section{Categorical Notions}% \label{sec:categorical_notions}

We will use the book \textit{Algebraic Topology} by Tammo tom Dieck. We will
use categorical language, even if we don't strictly need it. We will denote the
category of (Hausdorff) topological spaces and continuous maps by $\ms{Top}$.
There are two ways of thinking about algebraic topology: \begin{enumerate}
\item Extracting algebraic invariants from spaces; \item Doing algebra with
spaces.  \end{enumerate}

Homotopy is an equivalence relation on $\ms{Top}(X,Y)$. 

\begin{defn} A \textit{homotopy} from $f$ to $g$ is a map $H: X \times I \to Y$
    such that $H \circ i_0 = f$ and $H \circ i_1 = g$. Intuitively, this is a
    way to interpolate between $f$ and $g$. Alternatively, a homotopy is a path
    in $Y^X$ with the compact-open topology.  \end{defn} 

To show that homotopy is an equivalence relation, it is easy to show that $f$
is self-homotopic. To see that homotopy is symmetric, we can simply reverse the
interval. Finally, to see that homotopy is transitive, we can just perform each
homotopy twice as fast and then concatenate.

\begin{defn} The \textit{homotopy category} $\ms{hTop}$ is the category whose
objects are spaces and whose morphisms are homotopy classes of maps. We need to
check that composition preserves the notion of homotopy.  \end{defn}

Now denote the \textit{category of based spaces} by $\ms{Top}^*$, where a based
space is a space $X$ with a map $* \to X$. The corresponding homotopy category
is denoted by $\ms{hTop}^*$. Here, the homotopy is required to fix the
basepoint.

\begin{rmk} The transition from spaces to based spaces is like upgrading from
semigroups to monoids.  \end{rmk}

\begin{rmk} There is a functor \begin{align*} \ms{Top} \to \ms{Top}^* \\ X
\mapsto (X \sqcup \{*\}, *).  \end{align*} \end{rmk}

\begin{exm} It is easy to see that $\ms{Top}(*,X) \cong X$. Similarly,
$\ms{Top}^*(S^0,(X,*)) \cong X$. Then, we can see that $\ms{hTop}(*,X) \cong
\ms{hTop}(S^0,X)$ is the set of path components of $X$.  \end{exm}

\section{Fundamental Group and Groupoid}%
\label{sec:fundamental_group_and_groupoid}

\begin{exm} We will now consider morphisms from the circle. The set
    $\ms{Top}(S^1,X)$ is the free loop space $\mc{L}X$. In the based case, we
    get the \textit{based loop space} $\Omega X$. Then $\ms{hTop}(S^1,X)$ is
    the path components of $\mc{L}X$, and similarly, $\ms{hTop}^*(S^1,X) \cong
    \pi_1(X,*)$, where $\pi_1$ is the fundamental group.  \end{exm}

It should be surprising that $[S^1,X]$ is a group. In fact, it is independent
on the path component of $*$ up to inner automorphism. However, we can
distinguish a class of isomorphisms up to conjugation. The identity of this
group is the constant path at the basepoint. Next, we need to consider the
product in the group. This is simply concatenation, which is given by the
(cogroup) operation $S^1 \to S^1 \vee S^1$. Because the two components of the
wedge cannot be swapped by a homotopy, this operation is not commutative.

Next, we need to check that this is compatible with homotopy. Then the
operation on homotopy classes is the product in $\pi_1$. To check
associativity, we can check that the total operation of pinching at $1/3$ and
pinching at $2/3$ commutes.

Finally, the inverse of a path $g$ is simply $t \mapsto g(1-t)$. To construct
an isomorphism between $\pi_1(X,*_1)$ and $\pi_1(X, *_2)$, choose a path $g$
between the two basepoints and then send $f \mapsto g^{-1} f g$.

We will now discuss an unbased analogue of the fundamental group. Beginning
with the path space $\mathsf{Top}([0,1],X)$, we can consider the evaluations at
$0$ and $1$. Then over $(x,y)$, can consider homotopy classes of maps with
fixed endpoints to obtain the set $\Pi X(x,y)$.

\begin{prop} $\Pi X(x,y)$ are the morphisms of a \textit{groupoid} with objects
$X$.  \end{prop}

\begin{rmk} $\Pi X(x,x) \cong \pi_1(X,x)$. The fundamental group is much nicer,
but is hard to compute because it depends on the basepoint.  \end{rmk}

\begin{defn} A \textit{homotopy equivalence} $f:X \to Y$ is a map that induces
an isomorphism in the homotopy category.  \end{defn}

\begin{prop} A homotopy equivalence $X \to Y$ induces an equivalence of
    categories $\Pi f: \Pi X \to \Pi Y$. Recall here that an equivalence of
    categories is a fully faithful and essentially surjective functor.
    Equivalently, it is a functor has an inverse up to natural isomorphism.
\end{prop}

\begin{proof} The homotopy defines a natural transformation from $\mr{id}_X$ to
    $\Pi gf$. Let $g$ be a homotopy inverse, and $H$ be a homotopy and let $H$
    be a homotopy from $\mr{id}_X$ to $gf$. We can evaluate $H$ on the path
    $\gamma$, and this gives a homotopy between $x \to y \to g(f(y))$ and $x
    \to g(f(x)) \to g(f(y))$. Therefore, we have equality up to homotopy, so
    this gives a natural transformation. Because we are working in a groupoid,
    this is automatically an isomorphism.  \end{proof}

\begin{cor} Homotopy equivalences induce isomorphisms of fundamental groups.
\end{cor}

Suppose we have a diagram of the form \begin{equation} \begin{tikzcd} A
\arrow{r}{f_1} \arrow{d}{f_2} & B_1 \\ B_2 \end{tikzcd}.  \end{equation} Then a
\textit{pushout} $C$ is the colimit of this diagram. This means that there
exist maps $g_1, g_2$ such that \begin{equation} \begin{tikzcd} A
\arrow{r}{f_1} \arrow{d}{f_2} & B_1 \arrow{d}{g_1} \\ B_2 \arrow{r}{g_2} & C
\end{tikzcd} \end{equation} commutes and $(C, g_1, g_2)$ is universal: For any
$X$ and commutative diagram, there exists a unique map such that
\begin{equation} \begin{tikzcd} A \arrow{r}{f_1} \arrow{d}{f_2} & B_1
    \arrow{d}{g_1} \arrow{ddr} & \\ B_2 \arrow{r}{g_2} \arrow{drr} & C
    \arrow[dashrightarrow]{dr} &  \\ & & X \end{tikzcd} \end{equation}
    commutes.

\begin{thm}[Seifert-van Kampen Theorem] Let $X$ be a topological space and
    $X_0, X_1$ subspaes whose interiors cover $X$. Then set $X_{01} = X_0 \cap
    X_1$. Then \begin{equation} \begin{tikzcd} \Pi X_{01} \arrow{r} \arrow{d} &
        \Pi X_0 \arrow{d} \\ \Pi X_1 \arrow{r} & \Pi X \end{tikzcd}
    \end{equation} is a pushout diagram of groupoids.  \end{thm}

\begin{proof} Consider a groupoid $G$ and commutative diagram \begin{equation}
    \begin{tikzcd} \Pi X_{01} \arrow{r}{f_0} \arrow{d}{f_1} & \Pi X_0
    \arrow{d}{h_0} \\ \Pi X_1 \arrow{r}{h_1} & G \end{tikzcd}.  \end{equation}
    We will construct $\Pi X \xrightarrow{h} G$. Then we need to write $h(x)$
    as an object of $G$. If $x \in X_1$, set $h(x) = h_1(x)$, and if $x \in
    X_0$, set $h(x) = h_0(x)$. Because (1.5) commutes, this is well-defined.
    Now we define $h$ on the level of morphisms. Subdivide paths so that all
    segments lie in either $X_0$ or $X_1$. Then on each such segment, the
    diagram specifies $h(\gamma_i)$, and define $h(\gamma) = h(\gamma_0)
    h(\gamma_1) \cdots h(\gamma_n)$.

Finally, we need to prove that this definition is independent of the choice of
representative of homotopy class. We can subdivide the homotopy so each equare
lies in either $X_0$ or $X_1$, and then $h_1, h_1$ are well-defined, so $h$ is
independent of the homotopy class.  \end{proof}

\begin{exm} We can use Seifert-van Kampen to compute the fundamental group of
    $S^1$. If we choose $X_0. X_1$ to be two arcs, then $X_{01}$ is homotopy
    equivalent to two points. Then computing combinatorially, we can recover
    $\pi_1(S^1, *) \cong \Z$.  \end{exm}

\begin{cor}[Standard statement of Seivert-van Kampen] For connected $X_{01}$,
we obtain a pushout diagram in the category of \textit{groups}.  \end{cor}

\section{Covering Spaces}% \label{sec:covering_spaces}

\begin{defn} Let $B$ be a topological space. Then $p:E \to B$ is a
\textit{covering map} if it is locally trivial with discrete fiber.  \end{defn}

\begin{exm} Consider $S^1 \times \Z \to S^1$. Another covering map to $S^1$
with fiber $\Z$ is the projection $\R \to \R / \Z = S^1$.  \end{exm}

\begin{prop} Every covering of $I$ is trivial.  \end{prop}

\begin{proof} Let $F = p^{-1}(0)$. Then over $U_x \ni x$, we can trivialize the
    cover. Because $I$ is compact, we can choose a finite cover $\{ U_i\}$ over
    which $p$ is trivial. By indexing the $U_i$ and removing the unnecessary
    ones, we can assume $U_i \cap U_j \neq \emptyset$ if and only if $i - j =
    \pm 1$. By induction, we want to extend the trivialization on the first $n$
    elements of the cover to the union with $U_{n+1}$. The trivialization gives
    us an isomorphism $p^{-1}(0) \cong p^{-1}(t)$ for all $t \in U_n$, so if $t
    \in U_{n+1}$, we the local trivialization to obtain an isomorphism
    $p^{-1}(t) \cong p^{-1}(t')$ for all $t' \in U_{n+1}$. Then compose
    $p^{-1}(0) \cong p^{-1}(t) \cong p^{-1}(t')$. The procedure terminates by
    compactness.  \end{proof}

To generalize this result to contractible spaces, we need more tools. The limit
    of the diagram \begin{equation} \begin{tikzcd} & E \arrow{d}{p} \\ X
    \arrow{r}{i} & B \end{tikzcd} \end{equation} is called the
    \textit{pullback}. 

\begin{lem} The pullback of a cover is a cover.  \end{lem}

\begin{proof} If $E \to B$ is trivial over $U \subset B$, then $i^* E$ is
trivial over $f^{-1}(U) \subset X$.  \end{proof}

\begin{lem} A homotopy $X \times I \xrightarrow{f} B$ induces an isomorphism of
    covers \begin{equation} \begin{tikzcd} f_0^* E \arrow{rr}{f_*} \arrow{dr} &
    & f_1^* E \arrow{dl} \\ & X & \end{tikzcd} \end{equation} \end{lem}

\begin{proof} Use the idea of the proof in the case of the interval. We can
transport the fibers from $f_0$ to $f_1$, so this gives a homeomorphism.
\end{proof}

\begin{cor} If $X$ is contractible, all covers are trivial.  \end{cor}

\begin{proof} Then choose $H_0 = \mr{id}$ and $H_1$ to be constant at $x$. Then
we obtain a homeomorphism between $E \to X$ and $X \times p^{-1}(x) \to X$.
\end{proof}

\begin{cor} If $p: E \to B$ is a cover, then the assignment $b \to E_b =
p^{-1(b)}, \gamma \to \gamma_{\alpha}$ defines a functor $T_p: \Pi B \to
\ms{Set}$.  \end{cor}

\begin{defn} A cover $\wt{B} \xrightarrow{p} B$ is a \textit{universal cover}
if there exists $b_0$ to $B$ such that $T_p$ is isomorphic to the functor $b
\to \Pi(b,b_0)$ (equivalently if $T_p$ is representable).  \end{defn}

\begin{lem} If $B$ is locally simply connected and path connected, then the
universal cover exists.  \end{lem}

\begin{proof} We will build the space by equipping $\wt{B} = \bigsqcup_b
    \Pi(b,b_0)$ with a topology. We want locally that $\wt{B}$ is homeomorphic
    to $U \times \Pi(b,b_0)$. At every point $b \in B$, we can choose $U$ which
    is path connected and simply connected. In $U$, there is a canonical
    isomorphism $\Pi(b_0,b) \cong \Pi(b_0,b')$ because between any two points,
    there is a unique homotopy class of paths between them. This determines the
    topology.  \end{proof}

Note, $\wt{B} = E$ is a principal $G \coloneqq \pi_1(B,b_0)$ bundle over $B$.
In particular, the map $G \times E \to E$ is equivariant over $B$ and $G \times
E_b \to E_b$ is isomorphic to $G \times G \to G$.

Now we will give a classification of coverings. Assume the universal cover
exists. Then there exists a bijection between the following data:
\begin{enumerate} \item Coverings $E \to B$ up to isomorphism.  \item Functors
    $\Pi B \to \ms{Set}$ up to isomorphism.  \item Actions of $\pi_1(B,b_0)$ on
    a set $F$ up to isomorphism.  \end{enumerate}

\begin{proof} The bijection between 1 and 2 is given by the transport functor.
Between 2 and 3, we simply restrict the functor to a single object. Finally, we
can consider the associated bundle $\wt{B} \times F / \pi_1(B,b_0)$.
\end{proof}

\begin{defn} A cover $E \to B$ is \textit{regular} if there exists a norma
subgroup of $\pi_1(B,b_0)$ such that $p^{-1}(b_0) \cong \pi_1(B,b_0) / N$.
\end{defn}

This implies that $E$ is a principal $H$-bundle for a quotient $H$ of
$\pi_1(B,b_0)$, and in fact this is an equivalence.

How do we recognize the universal cover? Let $E \to B$ be a cover. Fix
basepoints $b, \wt{b}$ and consider the map $\pi_1(E, \wt{b}) \to \pi_1(B,b)$.
\begin{description} \item[Homotopy Lifting Property:] Consider two paths
    $\gamma_0, \gamma_1$ in $B$ with the same endpoints. Then if we consider
    the diagram \begin{equation} \begin{tikzcd} I \times \{ 0,1 \} \arrow{r}
    \arrow{d} & \wt{B} \arrow{d}{p} \\ I \times I \arrow{r}{H} & B,
\end{tikzcd} \end{equation} there is a unique $I \times I \to \wt{B}$ such that
the entire diagram commutes.

        To prove this, we can consider the pullback $p^*(H)$, which is a cover
        of $I \times I$, which is trivial. This property implies the map on
        $\pi_1$ is injective.  \item[Transport:] The transport of $\wt{b}$
        defines a map $\pi_1(B,b) \to \pi_0(E_b, \wt{b})$ and the ``kernel''
        agrees with $\pi_1(E, \wt{b})$. The inclusion of $\pi_1(E)$ in the
        kernel comes from the homotopy lifting property, and in the other
        direction, any loop that lifts to a path taking $\wt{b}$ to itself must
        have come from a loop.  \item[Components of the cover:] If $B$ is path
        connected, then $\pi_0(E_b,\wt{b}) / \pi_1(B,b) \cong \pi_0(E,\wt{b})$.

        To see this, we will map $\pi_0(E_b, \wt{b}) \to \pi_0(E, \wt{b})$
induced by the inclusion $E_b \subset E$. To check that this is well-defined,
note that each $\gamma \in \pi_1(B,b)$ lifts to a path between two points of
$E_b$. To check surjectivity, choose $x \in E$ and $p(x)$ the projection.
Choose a path $\gamma$ from $p(x)$ to $b$ and then transport from the fiber at
$b$ to $x$. To show injectivity, we simply use the homotopy lifting property.
If $f, f'$ are points in $E_b$ lying in the same component of $E$, we can
project the path to $B$.  \end{description}

\begin{cor} If $B$ is locally simply connected and path connected, then a
universal cover of $B$ is characterized by being simply connected.  \end{cor}

\begin{proof} The lemma shows that $\pi_0(E_b, \wt{b}) / \pi_1(B,b) \simeq
\pi_1(E,\wt{b}) \cong *$. Thus $\pi_0(E_b,\wt{b}) \cong \pi_1(B,b)$.
\end{proof}

Now it is easy to check that $\R \to S^1$ is a universal cover and that any
Riemann surface of genus $g > 1$ is $\mc{H} / \Gamma$ for a finite group
$\Gamma$.

\subsection{Existence of lifts}% \label{sub:existence_of_lifts}

Suppose we have a diagram \begin{equation} \begin{tikzcd} & \wt{B} \arrow{d}{p}
\\ Z \arrow{r}{f} \arrow[dashrightarrow]{ur}{\wt{f}?} & B \end{tikzcd}
\end{equation} with $Z$ path connected.

\begin{thm} A lift exists if and only if $f(\pi_1(Z,z)) \subset
\Im(\pi_1(\wt{B}, \wt{b}))$.  \end{thm}

\begin{proof} Define $\wt{f}(z) = \wt{b}$. We want to extend this to all $x \in
    Z$. If $\gamma$ is a path from $z$ to $x$, $f(\gamma)$ is a path in $B$
    with endpoint at $b,f(x)$. Then we lift to a path in $\wt{B}$ starting at
    $\wt{b}$, and the other endpoint of this path is defined to be $\wt{f}(x)$.

    We need to check that this is well-defined. If we choose a different path
$\gamma'$, we can form a loop $f(\gamma) f(\gamma') \in
\Im(\pi_1(\wt{B},\wt{b}))$. Because this loop lifts to a loop, $\wt{f}$ is
well-defined. Continuity is checked by local trivialization.  \end{proof}

\chapter{Understanding the Homotopy Category}% \label{cha:homotopy_category}

One problem in algebraic topology is that various constructions in $\ms{Top}$
        are not homotopy invariant. For example, consider the diagram
        \begin{equation} \begin{tikzcd} S^{n-1} \arrow{r} \arrow{d} & * \\ *.
        \end{tikzcd} \end{equation} The pushout of this diagram is simply a
        point. However, if we replace the point by $D^n$, then the pushout
        becomes $S^n$. This is not homotopy equivalent to a point (for example,
        compute the cohomology), but we have not developed enough tools in the
        class to see it. We will now discuss \textit{homotopy limits and
        colimits}.

\section{Homotopy Pushouts}% \label{sec:mapping_cylinders}

Consider a map $f: X \to Y$. To make this map nicer so we can perform various
            constructions, we will define the \textit{mapping cylinder}, which
            is the pushout \begin{equation} \begin{tikzcd} X \sqcup X \arrow{r}
                \arrow{d} & X \sqcup Y \arrow{d} \\ X \times I \arrow{r} &
            Z(f).  \end{tikzcd} \end{equation} Note that the inclusion $Y
            \hookrightarrow Z(f)$ is a homotopy equivalence by pushing the $X
            \times I$ onto $Y$. In addition, if we have a commutative diagram
            \begin{equation} \begin{tikzcd} X \arrow{r}{f} \arrow{d}{\alpha} &
            Y \arrow{d}{\beta} \\ X' \arrow{r}{f'} & Y', \end{tikzcd}
            \end{equation} Then this induces a map $Z(f) \to Z(f')$ by doing
            $\alpha$ at the top and $\beta$ at the bottom. If the diagram only
            commutes up to homotopy, then fix a homotopy $\Phi$ between $\beta
            \circ f$ and $f' \circ \alpha$. This induces a map of mapping
            cylinders by $\alpha$ at the top, $\Phi$ in the middle, and $\beta$
            at the bottom. Thus the construction of the mapping cylinder is
            \textit{functorial} in the homotopy category.

\begin{thm} If $\alpha$ and $\beta$ are homotopy equivalences, then $Z(f) \to
Z(f')$ is a homotopy equivalences.  \end{thm}

\begin{proof} Choose homotopy inverses $\alpha_-, \beta_-$. We need to
    construct the correct homotopy inverse $\Phi_-: X' \times I \to Y$ to
    $\Phi$. We will set $\Phi_i: Z(f') \times I \to Z(f)$ to be the picture
    \begin{figure}[H] \centering \includegraphics[width=0.8\linewidth]{mcyl}
        \caption{Picture of $\Phi_i$}% \label{fig:} \end{figure} Here,
        $\psi_{\alpha_-}$ is a homotopy from $\alpha \alpha_-$ to
        $\mr{id}_{X'}$ and $\psi_{\beta}$ is defined analogously. Then the
        three components are first $\beta_- f' \psi_{\alpha_-}$, then $\beta_-
        \Phi \alpha_-$, and finally $\psi_{\beta} f \alpha_-$.

    Finally, it is easy to check that the piecewise homotopies agree at the
boundaries.  \end{proof}

\begin{rmk} This is \textbf{not} a true inverse! However, they are homotopic.
\end{rmk}

The mapping cylinder generalizes to a \textit{double mapping cylinder} $Z(f,g)$
for spans $B \xleftarrow{g} A \xrightarrow{f} C$. 

\begin{lem} If the diagram \begin{equation} \begin{tikzcd} A \arrow{r}{f}
\arrow{d}{g} & B \arrow{d} \\ C \arrow{r} & X \end{tikzcd} \end{equation}
homotopy commutes, then we can fit the mapping cylinder $Z(f,g)$ into the
diagram with an arrow $Z(f,g) \to X$. However, this arrow depends on the choice
of homotopy.  \end{lem}

\begin{defn} $X$ is a \textit{homotopy pushout}  of the diagram in the previous
lemma if $Z(f,g) \to X$ is a homotopy equivalence.  \end{defn}

Note this is \textbf{not} unique in $\ms{Top}$, but is unique in $\ms{hTop}$.

\begin{exm} Consider the projections $X \gets X \times Y \to Y$. Then a
homotopy pushout is the join $X * Y$.  \end{exm}

\begin{exm} The homotopy pushout of $* \gets X \to *$ is the \textit{unreduced
suspension} $\Sigma' X$.  \end{exm}

Then recall the reduced suspension $\Sigma X = \Sigma' X / * \times I$. Then
this is related to another familiar construction. The key fact is \[ F^0(\Sigma
X, Y) = \{ \gamma: X \times I \to Y \mid \gamma(x,t) = g \text{for all $t$},
\gamma(x,0) = \gamma(x,1) = y = F^0(X, \Omega Y). \] This tells us that the
suspension and loop space functors are adjoint.  Also note that concatenation
makes $\Omega Y$ into an \textit{H-space} , which is a monoid in $\ms{hTop}^0$. 

Concretely, concatenation is \textit{homotopy associative} and $y \in Y$ is a
(pointed) homotopy unit. Therefore, $[X, \Omega Y]$ is a group. To see this
from the point of $[\Sigma X, Y]$, we see that $\Sigma X$ is a
\textit{comonoid}. The map $\Sigma X \to \Sigma X \vee \Sigma X$ is simply
given by collapsing $X \times \{ 1/2 \}$.  

Consider the diagram \begin{equation} \begin{tikzcd} X \arrow{r}{f} \arrow{d} &
Y \arrow{d} \\ * \arrow{r} & Y/X.  \end{tikzcd} \end{equation} Then we have a
series of maps $F^0(Y/X,B) \to F^0(Y,B) \to F^0(X,B)$. Then define $C(f) = Z(f)
/ X \times \{0 \} \cup \{x\} \times I$. We now have a map $X \xrightarrow{f} Y
\to C(f)$. We will use the mapping cone to replace the quotient.

\begin{lem} The sequence $[C(f),B]^0 \to [Y,B]^0 \xrightarrow{f} [X,B]^0$ is
exact at $[Y,B]^0$ for any based space $B$. In other words, the composition
sends $[C(f),B]$ to the constant map $X \to B$.  \end{lem}

\begin{proof} Given a map $Y \to B$ and a homotopy $\Phi$, construct $C(f) \to
B$ by using the construction for the double mapping cylinder.  \end{proof}

Now we can extend to the left by considering the map $C(f) \to \Sigma X$ given
by collapsing $Y$. This gives us a diagram \[ X \xrightarrow{f} ^ \to C(f) \to
\Sigma X \xrightarrow{\Sigma f} \Sigma Y \to C(\Sigma f) \to \cdots \] Finally,
we only need to check that $Y \to C(f) \to \Sigma X$ and $C(f) \to \Sigma X \to
\Sigma Y$ are coexact. To check this, note that $\Sigma X$ is homotopy
equivalent to $C(Y \hookrightarrow C(f))$ and the other one is easy.

\begin{cor} For each space $B$, we have an exact sequence \[ \cdots \to [\Sigma
C(f),B]^0 \to [\Sigma Y, B]^0 \to [\Sigma X,B]^0 \to [C(f),B]^0 \to [Y,B]^0 \to
[X,B]^0. \] If we extend to the left, we obtain \textit{abelian groups} because
the double loop space is a commutative H-space.  \end{cor}

\section{Homotopy Pullbacks}% \label{sec:homotopy_pullbacks}

Now we will dualize everything and look for \[ [B,X]^0 \to [B,Y]^0 \to [B,?]^0
    \to \cdots \] The cone is a homotopy pushout, so we will define an
    analogous homotopy pullback for \begin{equation} \begin{tikzcd} & *
        \arrow{d} \\ x \arrow{r} & Y.  \end{tikzcd} \end{equation} This will be
        known as the \textit{homotopy fiber}. In the usual category of
        $\ms{Top}$, this is the actual fiber. To do this, we will replace the
        point by $F Y = \{ \gamma: I \to Y \mid \gamma(0) = y \}$. This is
        contractible by retracting every path to $y$, so we will define $F(f)$
        to be the pullback of the above diagram.

\begin{lem} The sequence $[B,F(f)]^0 \to [B,X]^0 \to [B,Y]^0$ is exact.
\end{lem}

Proof is given by using the interval direction to construct the map from $B$ to
$F(f)$. In more words, we interpret a homotopy $B \times I \to Y$ as a map $B
\to FY$. In addition, this lemma constructs a fiber sequence \[ \cdots \to
\Omega F(f) \to \Omega X \to \Omega Y \to F(f) \to X \to Y, \] which yields a
long exact sequence \[ \cdots \to [B, \Omega Y]^0 \to [B,F(f)]^0 \to [B,X]^0
\to [B,Y]^0. \]

\section{Fibrations and Cofibrations}% \label{sec:fibrations_and_cofibrations}

Assume that $X$ is Hausdorff. 

\begin{defn} A map $ A \xrightarrow{i} X$ is a \textit{cofibration} if any
    diagram \begin{equation} \begin{tikzcd} A \arrow{r} \arrow{d}{i} & Y^I
    \arrow{d}{e_0} \\ X \arrow{r} \arrow[dashrightarrow]{ur} & Y \end{tikzcd}
    \end{equation} admits a lift. This is called the \textit{homotopy extension
    property}.  \end{defn}

In other words, we can extend diagrams of the form \begin{equation}
    \begin{tikzcd} A \arrow{rr}{a \times \{0\}} \arrow{dd}{i} & & A \times I
        \arrow{dd} \arrow{dl} \\ & Y & \\ X \arrow{rr} \arrow{ur} & & X \times
        I. \arrow[dashrightarrow]{ul} \end{tikzcd} \end{equation}

\begin{prop} Pushouts preserve cofibrations. In other words, for a pushout
    \begin{equation} \begin{tikzcd} A \arrow{r}{f} \arrow{d}{j} & B
    \arrow{d}{J} \\ X \arrow{r} & Y, \end{tikzcd} \end{equation} if $j$ is a
    cofibration, then so is $J$.  \end{prop}

\begin{proof} We will diagram chase. We construct the full diagram
    \begin{equation} \begin{tikzcd} A \arrow{rrrr} \arrow{dddd}{j} \arrow{dr} &
    & & & A \times I \arrow{dl} \arrow{dddd} \\ & B \arrow{rr} \arrow{dd}{J} &
    & B \times I \arrow{dl} \arrow{dd} \\ & & Z \\ & Y \arrow{rr} \arrow{ur} &
    & Y \times I \arrow[dashrightarrow]{ul} \\ X \arrow{ur} \arrow{rrrr} & & &
    & X \times I. \arrow{ul} \end{tikzcd} \end{equation} Then the map $X \times
    I \to Z$ exists by cofibrations, and then the arrow $Y \times I \to Z$
    exists because $Y \times I$ is a pushout.  \end{proof}

This proof is completely formal, and we had no idea what is going on.

\begin{exm} $ \{ 0 \} \subset I$ is a cofibration. To see this, note that we
    can identify $I$ with two sides of the square, and the retract the square
    onto the two sides of the interval. Note that two sides of the square form
    the mapping cylinder of $0 \in I$.  \end{exm}

\begin{prop} $A \subset X$ is a cofibration if and only if it satisfies the
homotopy extension property for $Z(i)$.  \end{prop}

\begin{proof} Suppose the lift $X \to Z(i)^I$ exists. Then this induces a map
$Z(i) \to Y$. Then we can map $X \times I \to Z(i)$ and compose.  \end{proof}

\begin{prop} $A \subset X$ is a cofibration if and only if it is a neighborhood
    deformation retract. This is defined by $\nu \colon X \to I$ and $\psi
    \colon X \times I \to X$ wuch that \begin{enumerate} \item $\nu^{-1}(0) =
        A$.  \item $\psi(a,t) = a$ for all $a \in A, t \in I$.  \item If
$\nu(x) < 1$, then $\psi(x,1) \in A$.  \item $\psi(x,0) = x$.  \end{enumerate}
\end{prop}

The proof uses the previous criterion. The point is to deformation retract $X
\times I$ onto $Z(i)$.

We want to be able to compute things, and we will start with cofibrant
replacements. Because $\{ 0 \} \subset I$ is a cofibration, so is $X \to Z(f)$
for any $f \colon X \to Y$. Then inclusion $Y \hookrightarrow Z(f)$ is a
homotopy equivalence, so we can factor $f$ into a homotopy equivalence and a
cofibration. Functoriality of the mapping cylinder was discussed previously.

\begin{quest} Let $f \colon X \to Y$ be a homotopy equivalence such that $X,Y$
are equipped with extra structure. Can the homotopy equivalence be made
compatible with this extra structure?  \end{quest}

\begin{exm} Suppose $X,Y$ live under a space $K$. Then we can define a homotopy
equivalence under $K$.  \end{exm}

\begin{prop} If $i \colon K \to X,j \colon K \to Y$ are cofibrations, then $f
\colon X \to Y$ is a homotopy equivalence in $\ms{Top}$ if and only if it is a
homotopy equivalence in $\ms{Top}^K$.  \end{prop}

\begin{proof} Let $g$ denote the homotopy inverse of $f$. Then consider the
    space $(X, g \circ j)$ under $K$. If we fix a homotopy $gf \sim \mr{id}$,
    this induces an isomorphism $\varphi^{\sharp} \colon [(X,i), (X,gfi)]^K \to
    [(X,i), (X,i)]^K$. This is done by extending to $X \times I \to K$ by the
    homotopy extension property.

Note that $\varphi^{\sharp}$ is a transport map. If $i \colon A \to X$ is a
cofibration and $\varphi \colon A \times I \to Y$ is a homotopy.  \end{proof}

\begin{prop} Let $A \xrightarrow{i} X$ and $B \xrightarrow{j} Y$ be
    cofibrations. Then if $f \colon A \to B$ and $F \colon X \to Y$ make the
    diagram commute, then $(f, F)$ is a homotopy equivalence of pairs if and
    only if $f$ and $F$ are both homotopy equivalences.  \end{prop}

If we dualize everything, we replace $Y^I$ by $X \times I$. Now we consider a
map $p \colon E \to B$.

\begin{defn} A map $p \colon E \to B$ is a \textit{Hurewicz fibration} if all
    diagrams of the form \begin{equation} \begin{tikzcd} X \arrow{r} \arrow{d}
    & E \arrow{d}{p} \\ X \times I \arrow{r} \arrow[dashrightarrow]{ur} & B
    \end{tikzcd} \end{equation} admit a lift. This is called the
\textit{homotopy lifting property}.  \end{defn}

\begin{defn} A map $p \colon E \to B$ is a \textit{Serre fibration} if it
satisfies the homotopy lifting property for all cubes.  \end{defn}

\begin{lem} Pullbacks preserve fibrations.  \end{lem}

The test object we will use to study fibrations is the pullback $W(p) = \{
(e,w) \mid p(e) = w(0) \} \subset E \times B^I$.

\begin{prop} $W(p) \to E$ is a hommotopy equivalence. In addition, $p$ is a
fibration if and only if it has the homotopy lifting property for $W(p)$.
\end{prop}

Now, let $X \xrightarrow{f} Y$ be an arbitrary map. Then we can factor $X \to
W(f) \to Y$ as a fibration and a homotopy equivalence.

\begin{exm} All covering maps are fibrations. Also, if $A \to X$ is a
cofibration, the dual $B^X \to B^A$ is a fibration. Similarly, if $E \to B$ is
a fibration, then so is $Z^E \to Z^B$.  \end{exm}

Now suppose $f \colon X \to Y$ is a homotopy equivalence of spaces over $B$.
Then if $p \colon X \to B$ and $q \colon Y \to B$ are fibrations, $f$ is a
homotopy equivalence in $\ms{Top}$ if and only if it is a homotopy equivalence
in $\ms{Top}_B$.

\section{Homotopy Groups}% \label{sec:homotopy_groups}

Let $X$ be a based space.

\begin{defn} The $n$-th \textit{homotopy group}  of $X$ is \[ \pi_n(X,*) =
[(I^n, \partial I^n), (X,*)] \cong [I^n / \partial I^n, X]^0. \] \end{defn}

\begin{defn} Given a pair $(X,A)$ of based spaces, the $n$-th \textit{relative
    homotopy group} is \[ \pi_{n+1}(X,A,*) = [(I^n, \partial I^{n+1},
    \mc{J}^n), (X, A, *)] \] where $\mc{J}^n = \partial I^n \times I \cup I^n
    \times \{0 \}$. Here, the source triple is homotopy equivalent to
    $(D^{n+1}, S^n, *)$.  \end{defn}

We will attempt to develop some tools to compute homotopy groups. Let $F(X,A) =
\qty{w \colon I \to X \mid w(0) = *, w(1) \in A}$. By splitting $(F(I^{n+1},
\partial I^{n+1}, \mc{J}), (x, A, *)) \cong F((I^n, *), (F(X,A), *))$ and using
the suspension-loop adjunction, we obtain \[ \pi_n(X, *) \cong \pi_{n-1}(\Omega
X, *) \cong \cdots \cong \pi_1(\Omega^n X, *). \] Therefore the relative
homotopy group is the set of components of the $n$-th loop space of $F(X,A)$.
The loop space appears in the fiber exact sequence, and $F(X,A)$ is simply the
homotopy fiber of $A \to X$, so if we set $B = S^0$, we obtain from the long
exact sequence \[ \cdots \to \Omega(F(X,A)) \to \Omega A \to \Omega X \to
    F(X,A) \to A \to X \] the exact sequence of homotopy groups \[ \cdots \to
\pi_0(\Omega F(X,A)) \to \pi_0 \Omega A \to \pi_0 \Omega X \to \pi_0(F(X,A))
\to \pi_0(A) \to \pi_0(X) \] which becomes \[ \cdots \to \pi_2(X,A) \to
\pi_1(A) \to \pi_1(X) \to \pi_1(X,A) \to \pi_0(A) \to \pi_0(X). \] \begin{warn}
The relative homotopy group is \textbf{not} the same as the homotopy group of
the quotient.  \end{warn}

Here, we were very sloppy with basepoints and all of our homotopy groups should
have carried basepoints. Last time, we showed that a homotopy $K \times I
\xrightarrow{\varphi} X$ induces a transport map \[ (A, i), (X, \varphi_0)^K
\to [(A,i), (X, \varphi_1)]^k \] if $K \to A$ is a cofibration. Applying this
to $K = \mr{pt}, A = S^n$, we obtain a transport $\pi_n(X, *) \to \pi_n(X,
*')$.

\begin{prop} The assignment $* \to \pi_n(X, *)$ defines a functor $\Pi X \to
\ms{Set}$. If $n \geq 1$, the target of the functor can be replaced with
$\ms{Grp}$.  \end{prop}

\begin{cor} \begin{enumerate} \item Up to some isomorphism, the $n$-th homotopy
    group is invariant of the choice of basepoint. The choice is not canonical
    unless $\pi_1$ acts trivially.  \item If $f \colon X \to Y$ is a homotopy
    equivalence, then the induced map on homotopy groups is an isomorphism.
    \item $\pi_1(X,*)$ acts naturally on $\pi_n(X,*)$.  \end{enumerate}
    \end{cor}

Now suppose $E \xrightarrow{\pi} B$ is a fibration. Then the homotopy fiber is
homotopy equivalent to the actual fiber $F$, so the relative homotopy groups of
$F$ in $E$ are isomorphic to the homotopy groups of the base. To construct an
explicit map $\pi_k(E,F,*) \gets \pi_j(B,*)$, we begin with a sphere in $B$.
Then we use the homotopy lifting property to obtain a disc in $E$ with boundary
in $E$.

It is easy to see the following: \begin{enumerate} \item If $X$ is
    contractible, then $\pi_i(X,*) = 0$ for all $i > 0$.  \item The argument we
    gave for $\pi_1(S^n, *)$ for $n \geq 2$ also shows that $\pi_1(S^n, *) = 0$
    for $i < n$. To see this, consider $S^i \xrightarrow{f} S^n = \R^n \cup
    \infty$. First, we can find a homotopic map $f'$ which is smooth and
    transverse to $\infty$. This implies the image lies in $\R^n$ if $i < n$,
    so $f'$ is nullhomotopic because $\R^n$ is contractible.  \item If $\wt{X}
    \to X$ is a covering map, then $\pi_i(\wt{X}, \wt{x}) \to \pi_i(X,x)$ is an
    isomorphism for $i > 2$. To see this, we use the lifting property for maps
    \begin{equation*} \begin{tikzcd} & \wt{X} \arrow{d} \\ S^n \arrow{r}
    \arrow[dashrightarrow]{ur} & X \end{tikzcd} \end{equation*} because $0 =
    \pi_1(S^n) \to \pi_1(X)$. 

        As an example, this allows us to compute $\pi_1(S^1) = \Z$, and
        $\pi_i(S^1) = 0$ for $i > 1$ because the universal cover $\R$ is
        contractible.  \item Consider the Hopf fibration $S^1 \to S^3 \to S^2$.
        Applying the long exact sequence, we have \[ 0 = \pi_2(S^3) \to
    \pi_2(S^2) \to \pi_1(S^1) \to \pi_1(S^3) = 0 \] and observe that
    $\pi_2(S^2) = \Z$.  \end{enumerate}

We would naively expect that $\pi_i(S^n) = 0$ for $i > n$, but this is
incorrect. However, it is true that $\pi_n(S^n) = \Z$. For higher homotopy
groups, it is easy to see that an analog of the Seifert-van Kampen theorem does
not hold. If we write $S^2 = D^2 \cup D^2$, then $D^2$ and $S^1$ both have
trivial $\pi_2$, but $S^2$ does not.

What does hold is Blakers-Massey. Assume that $Y = Y_1 \cup Y_2$, where the
$Y_i$ are open. Suppose that $Y_0 = Y_1 \cap Y_2$ is nonempty. Then we have a
map \[ \pi_1(Y_2, Y_0) \to \pi_i(Y, Y_1) \] called the \textit{excision}. 

\begin{thm}[Blakers-Massey] Assume that $(Y_1, Y_0)$ is $p$-connected and
    $(Y_2, Y_0)$ is $q$-connected. Then excision is an isomorphism in degree $i
    < p+q$ and surjective in degree $i = p+q$. This means that excision is
    $(p+q)$-connected as a map of pairs.  \end{thm}

Note that a pair $(X,A)$ is $p$-connected if $\pi_1(X,A,*) = 0$ for $0 \leq i
\leq p$. This is equivalent to $\pi_i(A) \simeq \pi_i(X)$ for $i < p$ and
$\pi_p(A) \twoheadrightarrow \pi_p(X)$.

Now we can prove that $\pi_n(S^n) = \Z$. First consider $n = 2$. Then we have a
long exact sequence \[ \cdots \to \pi_2(D^2, S^1) \to \pi_1(S^1) \to \pi_1(D^2)
\to \cdots \] and we see that $\pi_2(D^2, S^1) \cong \Z$. We now apply excision
for $\pi_2(D^2_-, S^1) \to \pi_2(S^2, D^2_+) \cong \pi^2(S^2) \cong \Z$. To see
that excision is an isomorphism, use the Hopf fibration.

In the next dimension, we use the same computation to see that $\pi_3(D^3, S^2)
\cong \Z$ and the pairs $(D^3_+, S^2), (D^3_-, S^2)$ are $2$-connected. Then
the map $(D^3_+, S^2) \to (S^3, D^3_-)$ is $4$-connected, so $\pi_3(S^3) \cong
\pi_3(S^3, D^3_-) \cong \pi_3(D^3, S^2) \cong \Z$.

\begin{thm} If $Y_1 \to Y$ and $Y_2 \to Y$ are $p$ and $q$-connected, then
$F(Y_1, Y_1, Y_0) \subset F(Y_1, Y, Y_2)$ is $p + q - 1$ connected. Here,
$F(Y_1, Y_1, Y_0)$ are paths $w \colon I \to Y$ such that $w(0) \in Y$, $w(1)
\in Y_0$.  \end{thm}

This implies Blakers-Massey by taking the fiber over $0$. Note that the
homotopy fiber of $Y_0 \to Y_1$ is \begin{equation*} \begin{tikzcd} F(*, Y_1,
    Y_0) \arrow{d} \arrow{r} & F(*, Y, Y_2) \arrow{d} \\ F(Y_1, Y_2, Y_0)
    \arrow{r} \arrow{d}{ev_0} & F(Y_1, Y, Y_2) \arrow{d}{ev_0} \\ Y_1
\arrow{r}{=} & Y_1.  \end{tikzcd} \end{equation*} Then using the long exact
sequence of homotopy groups, we obtain the desired result.

Now consider the special case $Y = D^{q+1} \cup_{S^q} Y_0 \cup_{S^p} D^{p+1}$.
This is the pushout \begin{equation*} \begin{tikzcd} S^q \sqcup S^p \arrow{d}
\arrow{r} & D^{q+1} \cup D^{p+1} \arrow{d} \\ Y_0 \arrow{r} & Y.  \end{tikzcd}
\end{equation*} and looks something like \begin{figure}[H] \centering
\includegraphics[scale=0.8]{attachcell.png} \caption{Attaching two cells to
$Y_0$}% \label{fig:attachcell} \end{figure} The key idea is that if $I^n
\xrightarrow{\sigma} F(Y)$ is a family of paths, then generically, the
subfamily $Q \subset  I^n$ of paths which intersect the origin in $D^{q+1}$ has
dimension $n-q$. To see this, appeal to the fact that locally $D^{q+1}$ is a
manifold and then use Sard's theorem. If a path is not in $Q$, then we can
retract it to $F(Y_1, Y_1, Y_0)$ ``radially'' in $D^{q+1}$. Such a path lies in
$D^{p+1} \cup Y_0 \cup D^{q+1} \setminus 0$.

If our path lies in $Q$, then we have a dimension $n-q-p$ locus passing through
$0 \in D^{p+1}$. If $n < q+p$, then the dimension is negative, so it is empty.
Thus generically, every path misses either $0 \in D^{p+1}$ or $0 \in D^{q+1}$.
Then we can retract $Q$ to $F(Y_0, Y_2, Y_2)$. But then we can move the
basepoint along $Y_2$ back to $Y_0$, so we retract to \[ Y_0 \to F(Y_0, Y_0,
Y_0) \subset F(Y_1, Y_1, Y_0). \] We will ignore the details needed to make
this precise. To handle the general case, we simply need to consider the case
where an arbitrary number of cells are attached and then use CW approximation.

Here are some applications of Blakers-Massey: \begin{cor} Say $A \subset X$ is
a cofibration. Then suppose $A$ is $m$-connected and $(X,A)$ is $n-1$
connected. Then $(X,A) \to (X/A, *)$ is $n+m-1$ connected.  \end{cor}

\begin{proof} Take the mapping cylinder $Z(f)$. Cover this by $C(A) \cup_A X$.
    Then $A$ is $m$-connected if and only if $A \to CA$ is $m$-connected. Using
    the fact that $(X,A)$ is $n-1$ connected, we use Blakers-Massey to obtain
    the desired result.  \end{proof}

\begin{cor}[Freudenthal] Assume $X$ is well-pointed and $n-1$ connected. Then
$\pi_i(X) \to \pi_{i+1}(\Sigma X)$ is an isomorphism for $i \leq 2n-2$ and is
surjective for $i = 2n-1$.  \end{cor}

\begin{proof} Note that $\Sigma X = C_+X \cup_X C_-X$. The only thing we need
to check is that the map from Blakers-Massey is the same as the suspension map.
\end{proof}

\begin{cor} If $X$ is $n$-connected and $Y$ is $m$-connected, then $X \wedge Y$
is $n+m+1$ connected.  \end{cor}

\begin{proof} Note that $X \wedge Y = X \times Y / X \vee Y$. We need to
    understand $\pi_{i+1}(X \times Y, X \vee Y)$. But then $\pi_i(X \times Y) =
    \pi_i(X) \oplus \pi_i(Y)$, so \[ \pi_i(X \vee Y) \cong \pi_i(X) \oplus
    \pi_i(Y) \oplus \pi_{i+1}(X \times Y, X \vee Y). \] Then using excision to
compute $\pi_i(X \vee Y) = \pi_i(X) \oplus \pi_1(Y)$ in the range, we obtained
the desired result.  \end{proof}

In the text, there is more discussion of the homotopy groups of $\R\P^n$, which
has $S^n$ as its universal cover. Then if we take the colimit of \[ \R\P^1
\subset \R\P^2 \subset \cdots \] and obtain $\R\P^{\infty}$, this has trivial
homotopy. We can prove this by noting that $S^{\infty}$ is contractible.

We can also consider the action of $O(n)$ on $S^{n-1}$. We then obtain a fiber
sequence $O(n-1) \to O(n) \to S^{n-1}$. Then we can use induction to compute
the difference between $\pi_i(O(n-1))$ and $\pi_i(O(n))$. For $i \leq n-2$, the
groups are isomorphic. Then we consider the colimit \[ O(n-1) \hookrightarrow
O(n) \hookrightarrow O(n+1) \hookrightarrow \cdots \] to obtain the group
$O(\infty)$ with periodic homotopy groups $\Z_2, \Z_2, 0, \Z, 0, 0, 0, \Z$ by
Bott periodicity. We can do the same computation for the unitary group.

\chapter{CW Complexes and Homology}% \label{cha:changing_spaces}

\section{$K$-Spaces}% \label{sec:_k_spaces}

Recall that whenever $X,Y$ are locally compact, then we have the adjunction \[
F(X \times Y, Z) \to F(X, F(Y, Z)). \] We want this to always hold, so we will
need to study infinite complexes. For example, an infinite wedge of circles is
not locally compact. Our solution will be to change the topology on $F$ and on
$X$.

\begin{defn} $X$ is a \textit{$K$-space} if, for all $A \subset X$, if
$f^{-1}(A)$ is closed for all $f \colon K \to X$ with $K$ compact Hausdorff,
then $A$ is closed.  \end{defn}

Now we define a functor $K \colon \ms{Top} \to \ms{Top}$. Here, $KX$ is $X$ as
a set with closed sets those such that $f^{-1}(A)$ closed for all $f \colon K
\to X$ continuous in the original topology. Because $KX$ has more closed sets
than $X$, then we have a natural transformation between $K$ and the identity.

\begin{prop} $X$ is a $K$-space if and only if the following hold: Any map $f
\colon X \to Y$ is continuous if and only if $K \to X \to Y$ is continuous for
all $K \to X$ with $K$ compact Hausdorff.  \end{prop}

Let $\ms{kTop} \subset \ms{Top}$ be the full subcategory of $K$-spaces.

\begin{thm} Products exists in $\ms{kTop}$.  \end{thm}

\begin{thm} We have the adjunction \[ kF(X \times Y, Z) \cong kF(X, kF(Y, Z)).
\] \end{thm}

We did all of this because non locally compact spaces show up relative
naturally. 

\section{Simplicial Complexes}% \label{sec:simplicial_complexes}

A \textit{simplicial complex} is a set $V$ with a collection $S$ of finite
subsets $\sigma \subset V$ such that $\sigma \setminus \{v \} \in X$ for all $v
\in \sigma$.

Letting $\Delta(\sigma) = \qty{\sum_{v \in \sigma} i_V = 1} \subset I^{v}$,
then we have natural maps $\Delta(\sigma \setminus \{v\}) \subset
\Delta(\sigma)$.

\begin{defn} The \textit{geometric realization} $\abs{K}$ of a simplicial
    compex $K$ is the space \[ \bigsqcup_{\sigma \in S} \Delta(\sigma) / \sim
    \subset I^V \] where $\sim$ is the equivalence defined by the maps above.
\end{defn}

If we have a homeomorphism $\abs{K} \cong X$, then this is said to be a
\textit{trianglation} of $X$. All smooth manifolds can be triangulated.

This is very rigid, which is bad for homotopy theory, so we give an alternative
viewpoint. Let $K^n = (V, S^n)$, where $S^n$ is the subsets of size at most
$n+1$. This is called the \textit{$n$-skeleton}, so the geometric realization
$\abs{K^n}$ induces the simplices of dimension at most $n$. Then we have a
pushout \begin{equation*} \begin{tikzcd} \bigsqcup_{\sigma \in S^{n+1}
\setminus S^n} \partial \Delta(\sigma) \arrow{r} \arrow{d} & \abs{K^n}
\arrow{d} \\ \bigsqcup \Delta(\sigma) \arrow{r} & \abs{K}^{n+1}.  \end{tikzcd}
\end{equation*}

\begin{lem} $\abs{K} = \operatorname{colim}_n \abs{K}^n$.  \end{lem} To prove
this, we check that the topology agrees. Unfortunately, the maps from simplices
are too rigid, so to derigidify, we will relax the notion of the attaching
maps.

\section{CW complexes}% \label{sec:cw_complexes}

\begin{defn} A CW decomposition of a space $X$ is a filtration $X =
    \operatorname{colim} X_i \ni X_0 = \mr{pt}$ such that we have pushouts
    \begin{equation*} \begin{tikzcd} \bigsqcup_{i \in C_n} S_i^{n-1}
        \arrow{r}{\phi} \arrow{d} & X_{n-1} \arrow{d} \\ \bigsqcup_{i \in C_n}
    D_i^n \arrow{r} & X_n.  \end{tikzcd} \end{equation*}    \end{defn}

\begin{rmk} Let $E^n = D^n \setminus S^n$. We obtain a decomposition as a set
    \[ X = \bigsqcup_{\lambda \in \bigcup_n C_n} e_{\lambda} \] where
$e_{\lambda}$ is the image of $E_i^n$ in $X$.  \end{rmk}

A key property is that if $K \subset X$ is compact, then $K$ intersects only
finitely many cells. To see this, note that $K \subset X^n$ for some $n$. Then
$K$ lies in an infinite union of disks, so it must intersect finitely many of
them.

\begin{rmk} The abbreviation CW stands for closure-finite (C) and weak topology
(W).  \end{rmk}

\begin{defn} A \textit{CW decomposition} of a pair $(X,A)$ is a filtration $X =
    \mr{colim} X_i$ where $X_{-1} = A$ and $X_n$ is given as a pushout
    \begin{equation*} \begin{tikzcd} \bigsqcup_{i \in C_n} S_i^{n-1} \arrow{r}
        \arrow{d} & X_{n-1} \arrow{d} \\ \bigsqcup_{i \in C_n} D_i^n \arrow{r}
                  & X_n.  \end{tikzcd} \end{equation*} Here, the cell
              attachment happens in dimension $n$.  \end{defn}

If $A = \emptyset$, we have a CW decomposition of $X$. Then we say that $\dim X
\leq n$ if all cells have at most that dimension. Now there are two ideas for
working with CW-complexes.

\begin{enumerate} \item Suppose $A \xrightarrow{f} Y$ is a map. If $(X,A)$ is a
    relative CW complex, we want to extend $f$ to $F \colon X \to Y$. The
    obstruction is as follows. Say we only have one cell. Then $S^{n-1} \to A
    \to Y$ defines an element of $\pi_{n-1}(Y)$, and this vanishes if and only
    if an extension exists. If $X$ has more cells, then proceed by induction
    (we have a sequence of obstructions, and we need them all to vanish).
\item (Cellularity) Say that $(Y,B)$ is $n$-connected. If $X$ is a CW complex
    and $f \colon X \to Y$ is a map with $\dim X < n$, then $f$ is homotopic to
    some $f'$ with $f'(X) \subset B$.

        To prove this, use induction. We know that $Y,B$ have the same
components, so we may deform $f$ so that $X^0$ maps to $B$ (use the transport
with $X^0 \subset X$ a cofibration). Then each $1$-cell of $X$ determines an
element of $\pi_1(Y,B) = 0$, so we can make $X^1$ map to $B$.  \end{enumerate}

Here are some consequences: \begin{enumerate} \item If $\pi_i(Y) = 0$ for all
    $i \geq n$ and $(X,A)$ is a relative CW complex which is $(n+1)$-connected,
    then $[X,Y] \simeq [A,Y]$. Note all obstructions to the extension vanish.
\item Say $f \colon B \to Y$ is an $n$-connected map. If $X$ is a CW complex,
    then $[X,B] \to [X,Y]$ is an isomorphism if $\dim X < n$ and a surjection
    if $\dim X = n$. Here, use the mapping cylinder to reduce to the case of an
    inclusion and then note that obstructions vanish.  \end{enumerate}

\begin{rmk} Conditions on $\pi_i$ of the target are in some sense dual to the
source having no cell in a given dimension (replace this by vanishing
cohomology).  \end{rmk}

We can now let $n = \infty$ (i.e.~a weak homotopy equivaence).

\begin{prop} A map $f \colon X \to Y$ of CW complexes is a homotopy equivalence
if and only if $f_* \colon \pi_i(X) \to \pi_i(Y)$ is an isomorphism for all
$i$.  \end{prop}

\begin{proof} For any $n$-connected $Z$, we have an isomorphism $f_* \colon
[Z,X] \to [Z,Y]$. Then if we let $Z = Y$, note that $[Y,X] \to [Y,Y]$ and
choose an inverse fo $\mr{id}_Y$. Alternatively, this is just the Yoneda Lemma.
\end{proof}

\begin{rmk} If $\dim X = \dim Y \leq k$, then we only need to check $\pi_i$ for
$i \leq k$.  \end{rmk}

\begin{rmk} If it \textbf{not true} that CW complexes are determined up to
homotopy equivalence by their homotopy groups. The counterexample is $X = BU$
and $Y = \bigvee K(\Z, 2i)$, but to prove this, we need to use cohomology.
\end{rmk}

\begin{prop} For any space $Y$ there exists a CW complex $X$ and a map $X \to
    Y$ which is a weak homotopy equivalence. This is not a homotopy equivalence
    in general (see the pseudocircle from the homework), but for $Y$ a
    manifold, it is a homotopy equivalence.  \end{prop}

\begin{proof} By induction on $n$, we want $X^n \to $ which is $n$-connected.
    Using the mapping cylinder, we can assume that $X^n \hookrightarrow Y$.
    Consider $\pi_{n+1}(Y, X^n)$. Define $X^{n+1}$ as the result of attaching
    $n+1$ discs to $X^n$ indexed by a basis of this group. Extend the map to
    $X^{n+1}$ and use the long exact sequence to see that $X^{n+1} \to Y$ is
    $n+1$ connected. To see that we can extend, note that we have the diagram
    \begin{equation*} \begin{tikzcd} S^n \arrow{r} \arrow{d} & X^n \arrow{r}
    \arrow{d} & Y \\ D^{n+1} \arrow{r} & X^{n+1}. \arrow[dashrightarrow]{ur}
\end{tikzcd} \end{equation*} Then we can extend from the disk by using the
        associated element of $\pi_{n+1}(Y,X)$. Now we have a diagram
        \begin{equation*} \begin{tikzcd} \pi_{n+1}(X^n) \arrow{r} \arrow{d}{=}
        & \pi_{n+1}(X^{n+1}) \arrow{d} \arrow{r} & \pi_{n+1}(X^{n+1},X^n)
            \arrow{r} \arrow{d} & \pi_n(X^n) \arrow{d}{=} \\ \pi_{n+1}(X^n)
        \arrow{r} & \pi_{n+1}(Y) \arrow{r} & \pi_{n+1}(Y, X^n) \arrow{r} &
    \pi_n(X^n).  \end{tikzcd} \end{equation*} Then we can show that the left
    middle arrow is surjective, and then by surjectivity of the whole diagram,
    we see that the desired arrow is surjective.  \end{proof}

Now we give a useful computation. Suppose that $\pi_i(Y) = 0$ for all $i > n
\geq 2$ and that $X$ is a $(n-1)$-connected CW complex. Then $[X,Y] \cong
\Hom(\pi_n(X), \pi_n(Y))$.

Surjectivity is easy (use lemma about $[X,Y] \cong [A,Y] \ldots$). To prove
injectivity, we sill reduce to $X$ being the cone of $\bigvee S^n \to \bigvee
S^n$, by assumption, $n \geq 2$, so $X$ is a suspension. Then we have a
sequence of groups \begin{equation*} \begin{tikzcd} { [A,Y] }^0 \arrow{d}{\sim}
& { [B,Y] }^0 \arrow{l}{\phi^*} \arrow{d}{\sim} & { [X,Y] }^0 \arrow{d}
    \arrow{l} & { [\Sigma A, Y] }^0 \arrow{l} \arrow{d} \\ \Hom(\pi_n(A),
    \pi_n(Y)) & \Hom(\pi_n(B), \pi_n(Y)) \arrow{l} & \Hom(\pi_n(X), \pi_n(Y))
    \arrow{l} & 0. \arrow{l} \end{tikzcd} \end{equation*} Then we use
    Blakers-Massey to prove exactness and then obtain the desired result.

\section{Eilenberg-Maclane Spaces}% \label{sec:killing_homotopy_groups}

Now recall that the universal cover $\wt{Y} \to Y$ satisfies \begin{enumerate}
\item $\pi_1(\wt{Y}) = 0$ \item $\pi_i(\wt{Y}) \cong \pi_1(Y)$ if $i > 1$.
\end{enumerate} We want to generalize this to a general procedure
($n$-connected cover), which will be a fibration, but not a covering space.

Given a space $Y$ and integer $n$, let $Y[n]$ be the result of attaching cells
to kill $\pi_i$ for $i \geq n$. This means that $\pi_i(Y_m) = 0$ for $i \geq n$
and $\pi_i(Y_m) = \pi_i(Y)$ otherwise.

\begin{exm} There exists a space $S^n[n+1]$ with $\pi_i = \begin{cases} \Z & i
= n \\ 0 & \text{otherwise} \end{cases}$.  \end{exm}

Let $\pi$ be a group and $n \in \N$.  \begin{defn} A CW complex $X$ is a
    $K(\pi, n)$ if \[ \pi_i(X) = \begin{cases} 0 & i \neq n \\ \pi & i = n
    \end{cases}. \] \end{defn}

The key fact is that $K(\pi, n)$ is unique up to homotopy equivalence by a
previous lemma. To show existence, we will present $\pi$ as a quotient of $F^I
\to F^J$ (free if $n=1$, free abelian if $n \geq 2$). Then consider the cone of
$\bigvee_I S^n \to \bigvee_J S^n$. The $\pi_n$ is correct by Blakers-Massey, so
we simply kill the higher homotopy groups.

Now there is an additive structure on the $K(\pi,n)$. If $\pi$ is abelian, then
addition is a homomorphism $\pi \oplus \pi \to \pi$. This gives a natural map
$K(\pi \oplus \pi, n) \to K(\pi,n)$, but $K(\pi,n) \times K[\pi, n] \cong K(\pi
\oplus \pi, n)$, so we see that $K(\pi,n)$ is a commutative $H$-space. We have
a diagram \begin{equation*} \begin{tikzcd} K(\pi,n) \times K(\pi, n)
    \arrow{d}{\text{swap}} \arrow{r} & K(\pi \oplus \pi, n) \arrow{r}
    \arrow{d}{\text{swap}} &  K(\pi,n) \\ K(\pi, n) \times K(\pi, n) \arrow{r}
                           & K(\pi \oplus \pi, n). \arrow{ur} \end{tikzcd}
    \end{equation*} Then because the two rightmost arrows come from the same
    map $\pi \oplus \pi \to \pi$, we see that this diagram homotopy commutes.

\begin{rmk} In fact, we can make $K(\pi, n)$ into a commutative \textbf{group}.
It is also possible to show that these are the only abelian groups in
$\ms{hTop}$.  \end{rmk}

Now we will consider multiplicative structure. By excision, note that $K(\pi_1,
n) \wedge K(\pi_2, m)$ is $n+m-1$ connected. To compute $\pi_{n+m}$, look at
the $n+1$ and $m+1$ skeleta. We get that \[\mr{Cone}(A_{n+1} \to A_n) \wedge
\mr{Cone}(B_{m+1} \to B_m) \cong \mr{Cone}((A_{n+1} \wedge B_m) \vee (A_n
\wedge B_{m+1}) \to A_n \wedge B_m) \] where the wedge of smashes comes from
the relations of $\pi_1 \otimes \pi_2$ and $A_n \wedge B_m$ comes from the
generators. This gives us a map to $K(\pi_1 \otimes \pi_2, m+n)$.

If $\pi$ is a ring, then we obtain a map $K(\pi, n) \wedge K(\pi, m) \to K(\pi,
n+m)$, which makes $\bigvee_N K(\pi, N)$ a graded ring.

\section{Eilenberg-Steenrod Axioms}% \label{sec:eilenberg_steenrod_axioms}

\begin{defn} A \textit{homology theory} is a functor $\qty{h_n}_{n \in \Z}$ \[
    h_n \colon \ms{Top}(2) \to R\text{-}\ms{mod} \] and natural transformation
    $\partial_n \colon h_n \implies h_{n-1} \circ K$ such that
    \begin{enumerate} \item $h_n$ is homotopy invariant.  \item There is a long
        exact sequence \[ \cdots \to h_n(X, A) \to h_{n-1}(A, \emptyset) \to
        h_{n-1}(X, \emptyset) \to h_{n-1}(X,A) \to h_{n-2}(A, \emptyset) \to
    \cdots \] \item (Excision) If $\ol{U} \subset A$, then $h_n(X \setminus U,
    A \setminus U) \to h_n(X, A)$ is an isomorphism.  \end{enumerate}
\end{defn}

To produce such $h$, we can let $Y$ be a based space. Then set $h_n(X, A) =
\pi_n(X^+ \wedge Y, A^+ \wedge Y)$. Then both of the first two axioms are
clear, and the long exact sequence comes from the cofiber sequence.
Unfortunately, excision is false because Blakers-Masset does not hold in
general. However, it does hold in some range, and so we can extend this range
by suspending everything. Thus the groups $\pi_{n+k} (X^+ \wedge \Sigma^k Y,
A^+ \wedge \Sigma^k Y)$ stabilize, and are stably isomorphic to $\pi_{n+k}(X/A
\wedge \Sigma^k Y)$.

\begin{defn} For any space $Y$, the homology theory $h_n^Y$ is \[ (X,A) \mapsto
\operatorname{colim}_k [S^{n+k}, X/A \wedge \Sigma^k Y] \equiv \pi_n^S(X/A
\wedge Y). \] \end{defn}


\begin{rmk} The connecting map is just the boundary map for the pair $(X^+
    \wedge Y, A^+ \wedge Y)$. Alternatively, we can produce a boundary map
    $\pi_n(X/A) \to \pi_{n-1}(A)$ that commutes with the arrows to
    $\pi_n(\Sigma A)$. However, we have a sequence $A \to X \to X/A \to \Sigma
    A$. If $Y = S^0$, then we obtain \textit{stable homotopy}. This is easier
    to compute than ordinary homotopy, but is still mysterious.  \end{rmk}

Unfortunately, ordinary homology is not an $h_n^Y$ for some $Y$. Instead, we
have spaces $E(n)$ and map4 $\Sigma E(n) \to E(n+1)$, which form a
\textit{prespectrum}. In this setting, define \[ h_n^E(X) =
\operatornamewithlimits{colim}_k \pi_{n+k}(X \wedge E(K)). \] Then we have
$h_n^E(X,A) = h_n^E(X/A)$, so we only need to do this for spaces.
Unfortunately, these homotopy groups do not stabilize in general, and thus we
need additional assumptions to get excision.

\begin{exm} Let $G$ be an abelian group. Recall we have $\Omega K(G, n+1) \to
    \mc{P} K(G, n+1) \to K(G, n+1)$. Thus we have $\Omega K(G, n+1) \cong K(G,
    n)$. This is now adjoint to a map $\Sigma K(G, n) \to K(G, n+1)$. 

    For example, if $G = \Z$, we have $K(\Z, 0) = \Z$, $K(\Z, 1) \cong S^1$,
    and $K(\Z, 2) \cong \C\P^{\infty}$. Next, for $G = \Z/2$, we have $K(\Z/2,
    0) = \Z/2$ and $K(\Z/2, 1)$ is obtained from $S^1$ by attaching a $2$-cell
    that is twice the generator of $\pi_1$ and then attaching $n$-cells to kill
    higher homotopy, and thus we have $K(\Z/2, 1) \cong \R\P^{\infty}$. 

    Thus for every abelian group $G$ we have a homology theory \[ h_n^G(X, A)
    \cong H_n(X,A;G) \equiv \operatorname{colim} \pi_{n+k}(X/A \wedge K(G, k))
\] where $A \subset X$ is a cofibration.  \end{exm}

To construct the boundary map, we use the map $X/A \to \Sigma A$, where $X/A
\simeq C(X,A)$ and thus we have the boundary map
% replace with tikzcd later.
\[ \pi_{n+k}(X/A \wedge K(G, k)) \to \pi_{n+k}(\Sigma A \wedge K(G, k)) \to
\pi_{n+k}(A \wedge K(G, k+1)) \] and maps $\pi_{n+k}(\Sigma A \wedge K(G, k))
\to H_n(\Sigma A, G) \cong H_{n-1}(A;G) \gets \pi_{n+k}(A \wedge K(G, k+1))$.
To see the middle isomorphism is really an isomorphism, we know that $K(G, k)$
is $k$-connected and thus the homotopy groups stabilize. To establish excision,
we simply use Blakers-Massey. Then the homology theories associated to
prespectra satisfy additional properties: \begin{enumerate}
    \setcounter{enumi}{4} \item (Additivity) Homology preserves coproducts,
    that is, \[ h_n\qty(\bigvee_i X_i) \cong \bigoplus_i h_n(X_i). \] This
    follows from additivity of stable homotopy groups.  \item Weak homotopy
    equivalences induce isomorphisms on homology. This follows from the
    homework problem we were unable to solve (smash of weak equivalences is a
    weak equivalence).  \item (Dimension) $H_n(\mr{pt}, G) = G$ if $n=0$ and
    vanishes otherwise.  \end{enumerate}

\begin{rmk} Cohomology satisfies the additivity axiom with the direct sum
    replaced by a direct product. If we take the ``dual'' to cohomology, then
    we should obtain the dual to the product, and this is clearly not a direct
    sum. To see failure of weak homotopy equivalence, this fails because spaces
    can be nasty (like the topologist's sine curve circle).  \end{rmk}

Our long term goal is to show that any homology theory satisfying all six
axioms is represented by $K(\pi, n)$. Our first computation is that \[ H_d(S^n,
    \mr{pt}; G) = \colim_{d+k} \pi_{d+k}(S^n \wedge K(G, k)) \cong
    \begin{cases} G & d = 0,n \\ 0 & \text{otherwise} \end{cases}. \] Now from
    the axioms, we consider $D^1$. Because this is contractible, we see that
    $H_*(D^1) \cong H_*(\mr{pt}) = G$ and that we have a long exact sequence \[
    0 \to H_1(D^1, \partial D^1) \to H_0(\partial D^1) \to H_0(D^1) \to
H_0(D^1, \partial D^1) = 0. \] Then we have $H_1(D^1, \partial D^1) \cong
H_0(D^1) = G$ and then the map on the left is given by $\alpha \mapsto (\alpha,
-\alpha)$ and the map on the right is the sum of the two projections. Thus we
have $H_2(S^2, \mr{pt}) \cong H_2(D^2, S^1) \cong H_1(S^1, \mr{pt}) \cong G$
proceeding by induction. 

Next, we will define the reduced homology groups by $\wt{h}_n(X) = \ker (h_n(X)
\to h_n(\mr{pt}))$. Then looking at the diagram \begin{equation*}
    \begin{tikzcd} h_n(\mr{pt}) \arrow{r} & h_n(\mr{pt}) \arrow{r} &
        h_n(\mr{pt}, \mr{pt}) \arrow{r} & h_{n-1}(\mr{pt}) \arrow{r} & \cdots
        \\ h_n(A) \arrow{r} \arrow{u} & h_n(X) \arrow{r} \arrow{u} & h_n(X,A)
        \arrow{r} \arrow{u} & h_{n-1}(A) \arrow{r} \arrow{u} & h_{n-1}(X)
        \arrow{u} \\ \wt{h}_n(A) \arrow{r} \arrow{u} & \wt{h}_n(X) \arrow{r}
        \arrow{u} & \wt{h}_n(X,A) \arrow{r} \arrow{u} & \wt{h}_{n-1}(A)
        \arrow{r} \arrow{u} & \wt{h}_{n-1}(X) \arrow{r} \arrow{u} & \cdots \\
    \end{tikzcd} \end{equation*} we get that the bottom row is exact. Then if
    $A \subset X$ is a cofibration, then we can write $h(X,A) \simeq
    \wt{h}(X,A)$. This follows from the long exact sequence on $C(X,A)$ for \[
    \wt{h}_n(CA) \to \wt{h}_n(C(X,A)) \to h_n(C(X,A), CA) \to 0. \]

\begin{cor} Suppose $(X,A,B)$ is a triple. Then the sequence \[ \cdots h_n(A,B)
\to h_n(X,B) \to h_n(X,A) \to h_{n-1}(A,B) \to \cdots \] is exact.  \end{cor}

\begin{proof} If we take the quotient by $B$ and then use reduced homology. If
the inclusion of $B$ is not a cofibration, then replace everything with the
mapping cone.  \end{proof}

This is a key ingredient in the proof of Mayer-Vietoris. In fact, we can go
further with homology. We have a natural map $\pi_n(S^n)\to
\End(\wt{h}_n(S^n))$ that sends $f \colon S^n \to S^n$ to the map induced by
$f$. This is clearly a homomorphism, so first we recall that addition in
$\pi_n$ is induced by $S^n \vee S^n \to S^n$. But then we have $\wt{h}_n(S^n
\vee S^n) \cong \wt{h}_n(S^n) \oplus \wt{h}_n(S^n)$ and so the map is addition.
Now, er know that $[\mr{id}] \in \pi_n(S^n)$ maps to $\mr{id} \in
\End(\wt{h}_n(S^n))$, so by linearity, $k \in \Z = \pi_n(S^n)$ goes to
multiplication by $k$.

\begin{cor} If $h_*(\mr{pt}) \cong \Z$, then the map $\pi_n(S^n) \to h_n(S^n)$
is an isomorphism.  \end{cor}

We should caution that $\pi_k(S^n) \to h_k^{\Z}(S^n)$ is \textbf{not} an
isomorphism.

Now assume that $X = A \cup B$. We want to compute $h_* X$ given $h_* A, h_* B,
h_*(A \cap B)$. We do this if $A$ and $B$ are open. Here, $h_*(X,A) \cong
h_*(B, A \cap B)$ by excision on $U = A \setminus B$, and so we have a long
exact sequence \[ h_*(A) \to h_*(X) \to h_*(X,A) \cong h_*(B, A \cap B) \to
h_{*-1}(A \cap B). \]

\begin{thm}[Mayer-Vietoris] The sequence $h_*(A) \oplus h_*(B) \to h_*(X) \to
h_*(A \cap B)$ is exact.  \end{thm}

\begin{proof} Let $N(A,B) = A \times 0 \cup (A \cap B) \times I \cup B \times 1
    \subset I \times I$. Then we have $h_*(N(A,B), A \cup B) \cong h_*((I,
    \partial I) \times A \cap B) \cong h_{*-1}(A \cap B)$ using excision. Now
    we have homotopy equivalences $X \to N(A,B) \to X \times I$, so $h_*(X)
    \cong h_*(N(A,B))$, and thus the long-exact sequence \[ h_*(A \cup B) \to
    h_*(N) \to h_*(N, A \cup B) \] for relative groups gives us the desired
result.  \end{proof}

Now note that for unbased spaces, additivity tells us that \[
h_*\qty(\bigsqcup_i X_i) \cong \bigoplus_i h_*(X_i) \] for arbitrary indexing
sets. If the indexing set is finite, then this is a consequence of excision,
because in the long exact sequence \[ h_*(B) \to h_*(A \sqcup B) \to h_*(A
\sqcup B, B) \to h_{*-1}(B), \] we have $h_*(A \sqcup B, B) \cong h_*(A)$ and
the sequence splits because we have the map $A \to A \sqcup B$. Thus
Mayer-Vietoris does not depend on additivity.

\begin{rmk} There is a relative version of this. For $C \subset A \cap B$, we
    have a long exact sequence \[ \cdots \to h_*(A,C) \oplus h_*(B,C) \to
    h_*(X,C) \to h_{*-1}(A \cap B, C) \to \cdots \] To prove this, we can
    collapse $C$ when it is a cofibration and then replace it by a cofibration
    when it is not.  \end{rmk}

\begin{exm} Now we will compute the homology of lens spaces. Recall that \[
L(p;q) = S^3/(z,w) \sim (\zeta_p z, \zeta_p^q w) \] is the quotient of the
sphere by the action of $\mu_p$ with weights $1,q$. Note that if $q=0$, then
this action is not free and has fixed points $(0,w)$ for $w \in S^1$. Freeness
is needed to ensure the quotient is a manifold.

    Now we decompose $S^3$ as a neighborhood of $S^1_z = (z,0)$ and $S^1_w =
    (0,w)$, where our neighborhoods look like $D^2 \times S^1$. We can choose
    this to be invariant under $\mu_p$ by taking invariant tubular
    neighborhoods. Then the intersection is a copy of $S^1 \times S^1$, which
    is explicitly the set of points $\qty{(z,w) \mid \abs{z} = \abs{w}}$ with
    equal norm.

    This gives us a decomposition of the quotient $L(p;q)$ as $A \simeq D^2
    \times S^1 \cong D^2 \times S^1 / \mu_p$ and $B \simeq S^1 \times D^2$. Now
    the $S^1$ factor of $A$ is a $(1,0)$ curve in $S^1 \times S^1$ and the
    $S^1$ factor of $B$ is a $(p,q)$ curve in $S^1 \times S^1$. Here, a $(p,q)$
    curve is simply a line of slope $q/p$ in the square. The asymmetry comes
    from the choice of identification of $A \cap B$ with $S^1 \times S^2$.

    Finally, we compute $H_1(T^2) = \Z^{\oplus 2}$ and $H_2(T^2) = \Z$ by
    covering the torus with two halves, and now we can use Mayer-Vietoris to
    compute \begin{equation*} \begin{tikzcd} 0 \arrow{r} & H_3(L(p,q))
        \arrow[out=0, in=180, looseness=1]{dl} \\ H_2(S^1 \times S^1) \arrow{r}
        & H_2(S^1) \oplus H_2(S^1) \arrow{r} & H_2(L(p,q)) \arrow[out=0,
        in=180, looseness=1]{dll} \\ H_1(S^1 \times S^1) \arrow{r} & H_1(S^1)
        \oplus H_2(S^1) \arrow{r} & H_1(L(p,q)) \arrow[out=0, in=180,
        looseness=1]{dll} \\ H_1(S^1 \times S^1) \arrow{r} & H_1(S^1) \oplus
        H_2(S^1) \arrow{r} & H_0(L(p,q)) \arrow{r}  & 0 \end{tikzcd}
        \end{equation*} and then this becomes \begin{equation*} \begin{tikzcd}
        0 \arrow{r} & \Z \arrow[out=0, in=180, looseness=2]{dl}{\sim} \\ \Z
        \arrow{r} & 0 \arrow{r} & H_2(L(p,q)) \arrow[out=0, in=180,
        looseness=2]{dll} \\ \Z^2 \arrow{r} & \Z \oplus \Z \arrow{r} &
        H_1(L(p,q)) \arrow[out=0, in=180, looseness=2]{dll} \\ \Z
    \arrow{r}{(1,-1)} & \Z \oplus \Z \arrow{r} & H_0(L(p,q)) \arrow{r}  & 0
\end{tikzcd} \end{equation*} This tells us that $H_0(L(p,q)) = \Z$, so we now
have the exact sequence \[ 0 \to H_2(L(p,q)) \to \Z^2 \to \Z \oplus \Z \to
H_1(L(p,q)) \to 0. \] We simply need to compute the middle map, coming from
$S^1 \xleftarrow{(1,0)} S^1 \times S^1 \xrightarrow{(p,q)}$. This is injective,
so $H_2(L(p,q)) = 0$ and $H_1(L(p,q)) = \Z/p\Z$.

    This leads us to the following question: All of these spaces for a fixed
$p$ have the same homology. Are they homeomorphic? In fact, they are homotopy
equivalent, but they are not homeomorphic (although proving they are not
diffeomorphic is easier).  \end{exm}

Now we want to compute homology for colimits. Consider a sequence of space $X_0
\to X_1 \to \cdots$. We now have a map $\colim h_*(X_i) \to h_*(\colim X_i)$.
If we assume $X_k \subset X_{k+1}$ is a cofibration, we can consider the
mapping cylinder. The inclusion of the mapping cylinder in $[0,1] \times
X_{k+1}$ is a homotopy equivalence relative to $X_{k+1}$. Iterating this, we
can simply stack all of the mapping cylinders on top of each other to form the
\textit{mapping telescope} $T(i) \subset X \times [0, \infty)$. The key fact is
that this is a homotopy equivalence. More generally, if we consider any
sequence of maps \[ X_0 \xrightarrow{f_0} X_1 \xrightarrow{f_1} \cdots, \] we
can similarly define the mapping telescope $T(f)$. Then we have a map $T(f) \to
\colim_i X_i$, where we send $(x_i, t) \mapsto [x_i]$.

\begin{thm} The map $\colim_k h(X_k) \to h_*(Tf_{\bullet})$ is an isomorphism.
\end{thm}

The idea is that the diagram \begin{equation*} \begin{tikzcd} X_i \arrow{d}
\arrow{r} & T(f) \\ X_{i+1} \arrow{ur} \end{tikzcd} \end{equation*} commutes up
to homotopy. 

\begin{rmk} We should think of $T(f)$ as the ``homotopy colimit'' of the
diagram $f$, and thus we obtain the slogan that homology commutes with
(homotopy) colimits.  \end{rmk}

If additivity fails, then this is false for the sequence \[ Y_0 \to Y_0 \sqcup
Y_1 \to Y_0 \sqcup Y_1 \sqcup Y_2 \to \cdots \] where $Y = \bigsqcup_i Y_i$. In
fact, additivity is equivalent to commuting with homotopy colimits.

\begin{proof} Consider the decomposition given by \[ A = T \setminus \bigcup_i
    X_{2i} \setminus \qty{2i + \frac{1}{2}} \qquad B = T \setminus \bigcup_i
    X_{2i-1} \setminus \qty{2i - \frac{1}{2}}. \] Then additivity tells us that
    \[ h_*(A) \cong \bigoplus_i h_*(A_i) \qquad h_*(B) \cong \bigoplus_i
    h_*(B_i), \] but analyzing the pieces tells us that this becomes \[ h_*(A)
\cong \bigoplus_i h_*(X_{2i}) \qquad h_*(B) \cong \bigoplus_i h_*(X_{2i+1}). \]
Finally, we obtain $h_*(A \cap B) = \bigoplus_i h_*(X_i)$. Now by
Mayer-Vietoris, we have an exact sequence \[ \cdots \to h_*(A \cap B)
\xrightarrow{1-f_*} h_*(A) \oplus h_*(B) \to h_*(TX) \to \cdots \] and then we
obtain that $h_*(TX)$ is the cokernel of $\bigoplus_i h_*(X_i) \to \bigoplus_i
h_*(X_i)$.  \end{proof}

Going back to the case of cofibrations, we obtain \begin{cor} If $X = \bigcup_i
X_i$ and $X_i \to X_{i+1}$ is a cofibration, then $h_*(X) = \colim h_*(X_i)$.
\end{cor}

This can be used to compute the homology of $\C\P^{\infty}$.

\section{Cellular Homology}% \label{sec:cellular_homology}

Let $h$ be a homology and $X$ a CW complex. We will consider the relative
homology groups $h(X^n, X^{n-1})$. We have a diagram \begin{equation*}
    \begin{tikzcd} h(X^n, X^{n-1}) \arrow{d} \arrow{r}{\partial_n} & h(X^{n-1},
        X^{n-2}) \\ h(X^{n-1}) \arrow{ur} \end{tikzcd} \end{equation*} of
        degree $-1$ and thus we can attempt to form a chain complex.

\begin{prop} $\partial_{n-1} \circ \partial_n = 0$.  \end{prop}

\begin{proof} If we paste two such diagrams together to obtain
    \begin{equation*} \begin{tikzcd} h(X^n, X^{n-1}) \arrow{r}{\partial_n}
        \arrow{d} & h(X^{n-1}, X^{n-2}) \arrow{r}{\partial_{n-1}} \arrow{d} &
        h(X^{n-2}, X^{n-3}) \\ h(X^{n-1}) \arrow{ur} & h(X^{n-2}) \arrow{ur}
    \end{tikzcd} \end{equation*} then the sequence $h(X^{n-1}) \to h(X^{n-1},
    X^{n-2}) \to h(X^{n-2})$ is the long exact sequence of the pair $(X^{n-1},
    X^{n-2})$ and thus we obtain a chain complex. This is a bounded complex if
    and only if $X$ has cells in only finitely many dimensions.  \end{proof}

This gives us a chain complex \[ \cdots \to h(X^2, X^1) \to h(X^1, X^0) \to
h(X^0, \emptyset). \]

As for how this is related to $h(X)$, this is simply the ``first page of the
spectral sequence'' which computes such homology. Also, this makes sense for
any filtered space $X$ because we have not used any information about CW
complexes. Now consider the case when $h$ satisfies the dimension axiom, which
says that $h_*(\mr{pt})$ is supported in degree $0$.

\begin{thm} If $h$ satisfies the dimension axiom, then the complex defined in
the previous proposition computes $h(X)$. This means $h_n(X) = \ker(\partial_n)
/ \Im(\partial_{n+1})$.  \end{thm}

\begin{proof} We prove this by inducting on the dimension of $X$. Note this
    requires additivity, which is the same thing as homology commuting with
    homotopy colimits. The base case is simple: \[ h(X^0) \cong \bigoplus_{X^0}
    h_*(\mr{pt}). \] Now assume that the complex \[ 0 \to h(X^n, X^{n-1}) \to
    h(X^{n-1}, X^{n-2}) \to \cdots \to h(X^1, X^0) \to h(X^0) \to 0 \] computes
    $h(X^n)$. Now recall that we have the long exact sequence \begin{equation*}
        \begin{tikzcd} h(X^n) \arrow{rr} & & h(X^{n+1}) \arrow{dl} \\ &
        h(X^{n+1}, X^n) \arrow{ul} \end{tikzcd} \end{equation*} and so now we
        need to understand the connecting map $h(X^{n+1}, X^n) \to h(X^n)$. In
        the cell complex, this only interacts with $h(X^n, X^{n-1})$. Thus we
        need to know that the long exact sequence only changes in two degrees.
        We use the isomorphism \[ h_*(X^{n+1}, X^n) \cong \bigoplus_{e \in E}
        h_*(D_e^{n+1}, S_e^n) \cong 0 \] unless $* = n+1$, where $E$ is the set
        of $(n+1)$-cells. Here, the final isomorphism comes from the dimension
        axiom. Thus $h_*(X^n) \cong h_*(X^{n+1})$ if $* < n$ and $* > n+1$.

    For $* = n+1$, we simply see that \begin{align*} h_{n+1}(X^{n+1}) &=
    \ker(h(X^{n+1}, X^n) \to h(X^n)) \\ &\cong \ker(h(X^{n+1}, X^n) \to h(X^n)
\hookrightarrow h(X^n, X^{n-1})) \\ &= \ker(\partial^{n+1}) \end{align*}
because $h_n(X^n) = \ker(h_n(X^n, X^{n-1}) \to h_{n-1}(X^{n-1}))$ by the
inductive hypothesis. For $* = n$, we have the diagram \begin{equation*}
    \begin{tikzcd} h_{n+1}(X^{n+1}, X^n) \arrow{d} \arrow{r} & h_n(X^n)
        \arrow{r} \arrow[equal]{d} & h_n(X^{n+1}) \arrow{r} & h_n(X^{n+1}, X^n)
        = 0 \\ \Im \partial_{n+1} \arrow{r} & \ker \partial_n \end{tikzcd}
    \end{equation*} Then we have $h_n(X^{n+1}) = h_n(X^n) /
\Im(h_{n+1})(X^{n+1}, X^n)$. This is clearly isomorphic to $\ker \partial_n /
\Im \partial_{n+1}$.  \end{proof}

In order to compute this, we need to understand the map $h(X^{n+1}, X^n) \to
h(X^n, X^{n-1})$. Denote the set of $(n+1)$-cells by $E$ and the set of
$n$-cells by $F$. Then we have \[ h(X^{n+1}, X^n) \cong \bigoplus_{e \in E}
h(D_e^{n+1}, S_e^n) \cong \bigoplus_e h_n(S^n_e) \cong \bigoplus_e \Z_e [n]. \]
Here, if $A$ is an abelian group, $A[n]$ is the chain complex $A$ shifted in
degree by $n$. In addition, we have \[ h(X^n, X^{n-1}) \cong \wt{h}(X^n /
X^{n-1}) \cong \bigoplus_f h_n(D_f^n / D_f^{n-1}) \cong \bigoplus_f \Z_f [n].
\] The attaching map gives rise to $S_e^n \to D_f^n / S_f^{n-1}$ of degree
$d(e,f)$. Note this choice relies on orienting all of the cells. Then the
matrix $M = (d(e,f))$ computes the map $h(X^{n+1}, X^n) \to h(X^n, X^{n-1})$,
which is really \[ \bigoplus \Z_e [n+1] \xrightarrow{M} \bigoplus \Z_f [n]. \]
This formula also arises from the study of the compatibility of homology with
suspension. Now we define the chain complex $C_n^{\mr{CW}}(X; R)$ to be the
free $R$-module given by the $n$-cells of $X$. The differential is simply the
degrees of all attaching maps.

\begin{exer} Directly prove that $d^2 = 0$ by analyzing $X^{n-2}
\hookrightarrow X^{n-1} \hookrightarrow X^n$.  \end{exer}

In fact, the differential is always given by the matrix $M$ defined above, and
this implies uniqueness of homology theories on spaces which are homotopy
equivalent to CW complexes.

Now if $X \to Y$ is a cellular map, then we obtain maps $h_n(X^n, X^{n-1}) \to
h_n(Y^n, Y^{n-1})$ and these are maps of complexes. These are again given by
the degree. (Note that all maps $X \to Y$ are homotopic to cellular maps). Now
the problem is to compute the maps $h_*(X) \to h_*(Y)$ from the cellular point
of view. If we consider the commutative diagram \begin{equation*}
    \begin{tikzcd} X_n \arrow{r} & Y_n \\ X_{n-1} \arrow{r} \arrow{u} & Y_{n-1}
    \arrow{u} \end{tikzcd} \end{equation*} then we see that the map $h_*(X_n /
    X_{n-1}) \to h_*(Y_n / Y_{n+1})$ is given by the degrees of the maps of
    cells and thus all maps $h_*(X) \to h_*(Y)$ are axiomatically determined.
    Thus $h_*(X)$ is determined axiomatically as a \textbf{functor}, not just
    as a group.

\begin{exm} Consider $X = T^2$. Then all differentials vanish because the
    attaching map to $S^1 \vee S^1$ is the element $\alpha \beta \alpha^{-1}
    \beta^{-1}$ and thus the map is $\Z \to \Z \oplus \Z \xrightarrow{(+1-1,
    +1-1) = 0} \Z$. In degree $1$, the loop in the fundamental square is still
    $\alpha \beta \alpha^{-1} \beta^{-1}$ and thus we have the same map. Thus,
    we have \[ H_2(T^2) = \Z \qquad H_1(T^2) = \Z \oplus \Z \qquad H_0(T^2) =
    \Z. \] \end{exm}

The same analysis works for both $S^n \times S^n$ and for higher genus surfaces
$\Sigma_g$.

\section{Simplicial Homology}% \label{sec:simplicial_homology}

Simplicial homology is one of the original versions of homology. Let $E$ be a
partially ordered set and $S$ be a subset of $2^E$ such that for all $s \in S$
and $v \in s$, then $s \setminus v \in S$ and all $s \in S$ are totally
ordered. Thus we can write $s = [v_0, \ldots, v_n]$ as an $n$-simplex. Then let
$\abs{K}$ be its geometric realization. Now define $C(K; R) =
C_n^{\mr{simp}}(\abs{K}; R)$ to be the free $R$-module generated by
$n$-simplices. Note that attaching maps in this case all have degree $\pm 1$
because they are linear, and this is why we choose orientations using a partial
order. The differential is given by \[ \partial [v_0, \ldots, v_n] =
\sum_{i=1}^n {(-1)}^i [v_0, \ldots, \wh{v}_i, \ldots, v_n]. \] This is a very
old and famous formula. The $(-1)^i$ is simply here to keep track of
orientations. Also, we can consider $\abs{K}$ as a CW complex and then the CW
and simplicial chain complexes are the same. Then we can collapse the $n-2$
skeleton to obtain a wedge of spheres, and then we have maps of degree $\pm 1$.
The sign is determined by the orientation, where we will consider clockwise to
be the standard orientation. For example, consider a single $2$-simplex:
\begin{figure}[H] \centering \includegraphics[scale=1]{simporient.png}
    \caption{Simplicial orientations.}% \label{fig:simporient} \end{figure} Now
    if $K \to L$ is a map of ``simplicial sets,'' then we get maps $\abs{K} \to
    \abs{L}$. We can try to compute $h_*\abs{K} \to h_*\abs{L}$, and this is
    determined by the cell complex, which is the same as the simplicial
    complex. Suppose $s \in S_n$. Then if $s = [v_0, \ldots, v_n]$, either all
    $f(v_i)$ are distinct, in which $f(s) = [f(v_0), \ldots, f(v_n)]$, or we
    have $f(v_i) = f(v_j)$ and then we set $s \to 0$.

(Here, $K^n / K^{n-1} \to L^n / L^{n-1}$ commutes with $\Delta^n / \partial
\Delta^n \to \Delta^n / \partial \Delta^n$ or the map from $\Delta^n \to K^n
\to L^n$ factors through $L^{n-1}$ and hence the quotient factors through a
point.) 

Now if $X$ is a simplicial complex, we can consider the groups $h(X),
C^{\mr{cell}}(X), C^{\mr{simp}}(X)$. The first is small, the second is medium,
and the last is large. Then there is no differential for $h(X)$ and the
cellular differentials are hard to compute, but the simplicial differentials
are very easy to compute.\footnote{This is a common tradeoff in mathematics,
where making one aspect of our computation easier tends to make something else
much harder. Later, we will define singular homology, which has massive chain
groups but is useful for proving various exactness results.}

Now we can define a very weak invariant from homology: the \textit{Euler
characteristic} \[ \chi(X; R) = \sum (-1)^i \mr{Rk}(H_i(X, R)). \] If $\chi$ is
defined, it is in fact independent of $R$. It is very easy to compute this for
Riemann surfaces. For finite CW complexes, $\chi$ is given by the alternating
sum of the number of $n$-cells.

\section{Singular Homology}% \label{sec:singular_homology}

We will define the complex $S_{\bullet}(X)$ of singular chains for any space
$X$. We will see that this is functorial and that $X \to
H_{\bullet}(S_{\bullet})$ is a homology theory. If $X$ has the homotopy type of
a CW complex, we get the same result as for cellular homology. This satisfies
the dimension axiom and is ordinary homology.

Let $S_n(X)$ be the free abelian group generated by maps $\Delta^n
\xrightarrow{\sigma} X$. First, we identify \[ \Delta^n = \qty{(t_0, \ldots,
t_n) \mid \sum t_i = 1, 0 \leq t_i } \subset \R^{n+1}. \] We can now think of
this as a convex polytope in Euclidean space, and it is thus the convex hull of
the vertices $v_i = (0, \ldots, 1, \ldots, 0)$. Next, we define $\delta_i
\colon \Delta^{n-1} \hookrightarrow \Delta^n$ given by $\mr{Span}(v_j \mid i
\neq j)$ induced by $\R^{n} \to \R^{n+1}$ skipping the $i$-th component. Now we
define \[ \partial \colon S_n(X) \to S_{n-1}(X) \qquad \sigma \mapsto \sum
(-1)^i \sigma \circ \delta_i. \] Like in the simplicial case, the sign comes
from the transposition. We can avoid explicit signs by assigning to $\Delta^n$
its orientation line $o_{\Delta^n}$. Now from an orientation on $\Delta^n$, we
induce an orientation on the boundary, so we can set \[ S_n(X) \cong
\bigoplus_{\sigma} o_{\sigma} \] and define the map by simply restricting
orientation to the boundary. The advantage of this secondary approach is that
we can see that $\partial^2 = 0$ topologically instead of combinatorially. On a
manifold with corners, when we consider the intersection of two facets, the two
restrictions are clearly opposite to each other: \begin{figure}[H] \centering
    \includegraphics[scale=1]{orientsimp.png} \caption{Tracking orientations}%
\label{fig:orientsimp} \end{figure}

Now for $A \subset X$, we clearly have an inclusion $S_n(A) \hookrightarrow
S_n(X)$. Then define $S_n(X,A)$ to be the quotient $S_n(X) / S_n(A)$. Note that
this is different from $S_n(X/A)$. If two maps agree away from $A$ but are
different in $A$, then they correspond to different elements of $S_n(X,A)$.

\begin{cor} There exists a long exact sequence \[ H_n(A) \to H_n(X) \to
H_n(X,A) \to H_n(X,A)[1]. \] This comes from the definition of the singular
chain complex as a quotient complex.  \end{cor}

Functoriality is clear at the chain level. For $f \colon (X,A) \to (Y,B)$, the
map of chains is simply $\sigma \to f \circ \sigma$, and checking that
everything is well-defined is easy.

Now we check the dimension axiom. First, note that $H_0(S_{\bullet}(\mr{pt}))
\simeq \Z$ and $H_i(S_{\bullet}(\mr{pt})) = 0$ otherwise. Then in the chain
complex \[ \cdots \to \Z \to \Z \to \Z, \] we see that \[ \partial \sigma =
\sum (-1)^i \sigma \circ \delta_i = \sum_{i=0}^n (-1)^i \] and thus when we
pass to homology, we see that everything vanishes except in degree $0$.

To check additivity, we simply see that \[ S_{\bullet}\qty(\bigsqcup X_i) \cong
\bigoplus_i S_{\bullet} (X_i) \] because $\Delta$ is connected. Then we pass to
homology. 

This leaves homotopy invariance, excision, and weak homotopy. Homotopy
invariance will be proved by using the acyclic model theorem or by using
prisms. Excision follows from barycentric subdivision, and weak homotopy is
proved using cellular approximation.

First we will prove that the homology of a contractible space is trivial. If
$X$ is contractible to $x \in X$, then there exists $h \colon X \times I \to X$
such that $h(x', 0) = x'$ and $h(x',1) = x$. We want to associate to this a
homotopy between $\mr{id}_S$ and \[ S_{\bullet}(X) \to S_{\bullet}(\mr{pt}) \to
S_{\bullet}(X). \] Here a homotopy between $f,g \colon C_{\bullet} \to
D_{\bullet}$ is a map $H \colon C_{\bullet} \to D_{\bullet + 1}$ such that $dH
- Hd = f-g$.  This $H$ is given by the diagram \begin{equation*} \begin{tikzcd}
    \Delta^n \times I \arrow{r}{\sigma \times \mr{id}_I} \arrow{dr} & X \times
    I \arrow{r}{h} & X \\ & \Delta^{n+1} \arrow{ur}{H\sigma}.  \end{tikzcd}
\end{equation*} Here, the map $\Delta^n \times I \to \Delta^{n+1}$ is simply
given by collapsing one of the interval segments. Now we note that $\partial
H(\sigma) = H \partial(\sigma) + \sigma - x$, where the last $x$ is the
constant $0$-simplex at $x$. Now we obtain that $\partial H \sigma - H \partial
\sigma = \sigma - x$ and thus they are homotopic. As a corollary, this gives an
isomorphism in homology.

\begin{cor} If $X$ is contractible, then $H_{\bullet}(S_{\bullet}(X))$ is
isomorphic to $\Z$.  \end{cor}

Now consider the two inclusions $i_0, i_1 \colon X \rightrightarrows X \times
I$.

\begin{lem} The two maps $S(i_0), S(i_1)$ are homotopic.  \end{lem}

\begin{proof} This is easy to see on $H_0$ by sending every $\sigma$ to the
    component of its image. Then the isomorphism on homology is clear. Now
    consider the functors $X \xrightarrow{G} S(X \times I), X \xrightarrow{F}
    S(X)$. We see that $F$ is free and $G$ is acyclic, so by the acyclic model
    theorem, any natural transformations $F \Rightarrow G$ are chain homotopic.
\end{proof}

Note that a direct proof of this uses the subdivision of the prism into
simplices. The idea is that the map $\sigma \times I \colon \Delta^n \times I
\to X \times I$ has domain not a simplex, but there are maps $p_{\alpha} \colon
\Delta^{n+1} \to \Delta^n \times I$. Then we send \[ \sigma \mapsto
\sum_{\alpha} (\sigma \times \mr{id}_I) \circ p_{\alpha}. \] Next, we use the
fact that $\partial(\Delta^n \times I) = \Delta^n \times \partial I \cup
\partial \Delta^n \times I$ to give the fact that $\partial \circ H = S(i_0) -
S(i_1) + H \circ \partial$.

To prove excision, let $X = X_1 \cup X_2$ and suppose their interiors cover
$X$. We will show that $H_{\bullet}(X_2, X_1 \cap X_2) \simeq H_{\bullet}(X,
X_1)$. Then consider the subcomplex $S^k(X) \subset S(X)$ given by $\sigma$
such that $\Im(\sigma) \subset X_1^{\circ}$ or $X_2^{\circ}$. We have the
diagram \begin{equation*} \begin{tikzcd} S(X_1) \arrow{d} \arrow{r} & S^k(X)
\arrow{d} \arrow{r} & S^k(X, X_1) \arrow{d} \\ S(X_1) \arrow{r} & S(X)
\arrow{r} & S(X, X_1).  \end{tikzcd} \end{equation*} By definition, we see that
$S^k(X, X_1) = S(X_2, X_1 \cap X_2)$. Now we need to prove that $S^k(X) \to
S(X)$ is a quasi-isomorphism, and we will do this using barycentric
subdivision. This defines a chain map $B \colon S(X) \to S(X)$, and so we
obtain a map $S(X) \to S^k(X)$ given by iterating $B$ until all $B(\sigma)$ are
excisive.

We will now fill in some details about the acyclic model theorem. This
generalizes the idea that if $M$ is a free module over a ring $R$ with basis
$\qty{b_i}$, then any map $M \to N$ is specified by the values $f(b_i)$. For
chain complexes, we need additionally $f(\dd b_i) = \dd{f(b_i)}$.

\begin{defn} A functor $F \colon \mc{C} \to \ms{Ch}_R$ is \textit{free} if
    there exist models $\qty{b_i}_{i=0}^{\infty} \in \mc{C}$ such that $F(X)$
    is free (as a graded $R$-module) with basis $F(f) (b_i)$ indexed over all
    models and maps $f \colon b_i \to X$.  \end{defn}

\begin{exm} The singular chain functor $X \mapsto S_{\bullet}(X)$ is free with
models $\qty{\Delta^i}$.  \end{exm}

\begin{defn} A functor $G \colon \mc{C} \to \ms{Ch}_R$ is \textit{acyclic} if
$H^{\bullet} (G(b_i)) = 0$ for all $\alpha \neq 0$. This means the homology of
the models is supported in degree $0$.  \end{defn}

Here, for the singular chain functor, we know that all $\Delta^n$ are
contractible, and thus $S_{\bullet}(\Delta^n)$ is acyclic. However, we need to
prove this explicitly without appealing to homotopy invariance.

\begin{thm} If $F$ is free and $G$ is acyclic, then every natural
    transformation $H^0 F \Rightarrow H^0(G)$ lifts uniquely up to chain
    homotopy. In other words, we can find a natural transformation $F
    \Rightarrow G$ and any two such choices are chain homotopic.  \end{thm}

This arises in our proof of homotopy invariance, where if we consider the map
$S(X \times I) \xrightarrow{\mr{pr}} S(X) \xrightarrow{\iota_0} S(X \times I)$,
we can see that this is the same on homology as the identity.

Now we will prove that if $X \to Y$ is a weak homotopy equivalence, then the
induced map on $H_{\bullet}$ is an isomorphism. By the use of the mapping
cylinder, it suffices to consider an inclusion, so if $(X, A)$ is
$n$-connected, then $H_{\bullet}(A) \to H_{\bullet}(X)$ is an isomorphism for
$\bullet < n$.

For each $\sigma \colon \Delta^i \to X$, choose a homotopy $P_{\sigma} \colon
\Delta^i \times I \to X$ from the identity to a simplex in $A$. In fact, if
$\pi_0(A) \to \pi_0(X)$ is surjective, we can always take a homotopy to make
$\sigma$ lie in $A$.

Inductively, we will get $\partial P_{\sigma} = P_{\partial \sigma}$. Starting
with $0$-simlices, the union of $\sigma$ with $P_{\partial \sigma}$ defines an
element of $\pi_i(X, A) = 0$. Now we can proceed by induction, and therefore we
have $H_i(A) \to H_i(X)$ is an isomorphism for $i < n$. Letting $n \to \infty$,
the we see that $H_{\bullet}(X)$ depends only on the weak homotopy type.

\section{Comparison of Homology and Homotopy}%
\label{sec:comparison_of_homology_and_homotopy}

Now going back to cellular homology, we know that if $X$ is $n$-connected, then
$H_n(X) \cong \pi_n(X)$. To prove this, use the fact that the Moore space
$M(\pi_n(X), n)$ is an $n$-connected approximation of $X$.

For example, if $X \cong K(\pi, n)$, then we get $H_n(K(\pi, n); \Z) \cong \pi$
and $H_i(K(\pi, n); 0)$ for $0 < i < n$. For $i > n$, the homology is actually
nonzero! This is related to Steenrod operations.

To fix this, we will show that if $X,Y$ are simply connected, then $f \colon X
\to Y$ is a weak homotopy equivalence if and only if it induces an isomorphism
on homology. Combining this with the Whitehead theorem, we obtain

\begin{cor} If $X,Y$ are simply connected CW-complexes, then $f \colon X \to Y$
is a homotopy equivalence if and only if it induces an isomorphism on homology.
\end{cor}

Note that the simple connectivity assumption is essential because there exist
groups $G$ with $H_{\bullet}(BG) = 0$ but $G$ is nontrivial. This can be
resolved by generalizing homology to homology with local coefficients, where
the input is a local system. Also note that this result does \textbf{not} say
that if $H_{\bullet}(X) \cong H_{\bullet}(Y)$ then $X \sim Y$. We can find
$X,Y$ with isomorphic homology, but this is not induced by any map. An example
of such spaces is $X = S^2 \vee S^4, Y = \C\P^2$.

\section{Homology with Coefficients}% \label{sec:homology_with_coefficients}

Consider $S_{\bullet}(X;G) = S_{\bullet}(X) \otimes G$. Then the homology of
this is $H_{\bullet}(X;G)$. One reason to consider this is to obtain better
structure than when we use $\Z$-coefficients. For example, $H_{\bullet}(\R\P^n,
\Z/2\Z)$ is much nicer than $H_{\bullet}(\R\P^n, \Z)$. The same is true for the
lens space with $\Z/p\Z$-coefficients.

A natural problem is to compute $H_{\bullet}(X;G)$ given $H_{\bullet}(X,\Z)$.
The answer is purely algebraic. If we consider the chain complex $\Z
\xrightarrow{2} \Z$, the homologies are $0, \Z/2\Z$. However, if we tensor with
$\Z/2\Z$, we obtain $\Z/2\Z \xrightarrow{0} \Z/2\Z$. The first $\Z/2\Z$ comes
from $H_{\bullet}(X, \Z) \otimes G$ and the other one comes from the derived
functor. In fact, there is only one derived functor $\mr{Tor}$ because all
abelian groups have a two-step free resolution. Now we define \[ A \otimes^L B
\cong H_{\bullet}(P_A \otimes P_B) \cong H_{\bullet}(A \otimes P_B) \cong
H_{\bullet}(P_A \otimes B) \] where $P_A$ is a projective resolution $0 \to F_1
\to F_2 \to A \to 0$ of $A$. The key facts are $(A \otimes^L B)_0 \cong A
\otimes B$ and $(A \otimes^L B)_i \cong 0$ if $i \neq 0,1$.

Now all of this is the same for graded abelian groups, but instead of resolving
each component, we can instead pick a free chain complex with $A$ as its
homology. If $C_{\bullet}$ is a chain complex of free abelian groups, then \[
H_{\bullet}(C_{\bullet} \otimes G) = H_{\bullet}(C_{\bullet}) \otimes^L G. \]
Now if $X$ is a topological space, we have \[ H_{\bullet}(X) \otimes G \to
H_{\bullet}(X, G) \to \mr{Tor}(H_{\bullet - 1}(X), G) \] and in fact this exact
sequence splits. Note that this splitting is not natural in $X$. This means
that we can compute all torsion in $H_{\bullet}(X, \Z)$ from $H_{\bullet}(X,
\Z/p\Z)$. The idea is that every two copies of $\Z/p^i\Z$ in consecutive
degrees give rise to one copy in the higher degree if they don't come from the
$\Z/p^n\Z$ homology for arbitrary $n$. Now we can consider $H_{\bullet}(X,
\Z/p^n\Z) \to H_{\bullet}(X, \Z/p^{n-1}\Z)$. The free part of $H_{\bullet}(X,
\Z)$ contributes a copy of $\Z/p^n\Z$ on the left and $\Z/p^{n-1}\Z$ on the
right, and so these will stabilize for arbitrary $n$. (Here we assume $X$ is a
finite CW complex). 

\begin{rmk} This reconstruction is not canonical.  \end{rmk}

\chapter{Cohomology}% \label{cha:cohomology}

A \textit{cohomology theory} is a functor $h^* \colon \ms{hTop}_2^{\mr{op}} \to
\ms{Mod}_R^{\Z}$ together with natural transformations $h^{n-1} \circ \kappa
\xRightarrow{\delta^n} h^n$ such that \begin{enumerate} \item The sequence \[
\cdots \to h^n(X,A) \to h^n(X) \to h^n(A) \xrightarrow{\delta}^{n+1}
h^{n+1}(X,A) \to \cdots \] is exact.  \item If $\ol{U} \subset \mr{Int}(A)$,
then the map $h^*(X,A) \to h^*(X \setminus U, A \setminus U)$ is an
isomorphism.  \end{enumerate} Just like with homology, we can add two axioms:
\begin{enumerate} \setcounter{enumi}{2} \item (Additivity) $h^*\qty(\bigsqcup_i
X_i) \cong \prod_i h^*(X_i)$.  \item (Dimension) $h^*(\mr{pt})$ vanishes when
$* > 0$.  \end{enumerate} If all of these hold, then $h^*(X)$ is determined by
its value on CW complexes and agrees with ordinary cohomology. A key difference
with $h_*$ is that the map \[ h^*(\operatorname{colim}_i X_i) \to \lim_i
h^*(X_i) \] is not always an isomorphism when $X_i \to X_{i+1}$ are
cofibrations. The error term is $\lim^1 h^*(X_i)$, which is the derived
functor. Here, the sequence \[ 0 \to \lim^1 h^*(X_i) \to
h^*(\operatorname{colim}_i X_i) \to \lim_i h^*(X_i) \to 0 \] is exact.

Now we will discuss constructions of cohomology theories. Recall that we have
prespectra, which are sequences of spaces $Y_n$ with maps $\Sigma Y_n \to
Y_{n+1}$. Now the prespectrum is an \textit{$\Omega$-spectrum} if the induced
map $\Omega Y_n \simeq Y_{n-1}$ is a homotopy equivalence. For example, $\Omega
K(G,n) \cong K(G, n-1)$. Now let $Y$ be an $\Omega$-spectrum. Then we can
define $h_Y^n(X) \cong [X_+, Y_n]$. Because we assumed $Y$ is an
$\Omega$-spectrum, we have \[ h_Y^n(X) \cong [X_+, Y_n] \cong [\Sigma X_+,
Y_{n+1}] \cong [\Sigma^2 X_+, Y_{n+1}] \cong \cdots \]

Another approach is to use singular homology with coefficients in an abelian
group $G$. Define $\mc{S}^{\bullet}(X; G) \cong \Hom(\mc{S}_{\bullet}(X), G)$
with differential $\delta \varphi = {(-1)}^{n+1} \varphi \circ \partial$. Then
the cohomology of this complex is denoted by $H_{\mc{S}}^{\bullet}(X,G)$ and is
called \textit{singular cohomology}. This agrees with $h_{K(G)}$ for spaces
homotopy equivalent to CW complexes by the same argument as for CW complexes.

Now for $X$ a CW complex, we can take $C_{\mr{CW}}^*(X, G) =
\Hom(C_*^{\mr{CW}}(X), G)$ and take the cohomology. This is called cellular
homology, so in some sense $h^*$ is the ``derived dual'' of $h_*$.

\section{Multiplicativity}% \label{sec:multiplicativity}

For singular chains, define \[ \varphi^p \smile \psi^q (\sigma) = {(-1)}^{pq}
\varphi\qty(\eval{\sigma}_{[0, \ldots, p]}) \cdot \psi\qty(\eval{\sigma}_{[p,
\ldots, p+q]}). \] This defines a product on the set of singular chains. The
meaning is that given a choice of an approximation of the diagonal, $\varphi
\smile \psi (\sigma)$ should be $\varphi \times \psi (\Delta \circ \sigma)$.
Intuitively, we want to make the diagram \begin{equation*} \begin{tikzcd}
\Delta^{p+q} \arrow{r} \arrow{drr} & X \arrow{r}{\Delta} & X \times X \\ & &
\Delta^p \times \Delta^q \arrow{u} \end{tikzcd} \end{equation*} work in a
simplicial manner. Now we can check that the cup product makes
$\mc{S}^{\bullet}(X)$ a \textit{differential graded algebra}. To do this, we
check the graded Leibniz rule \[ \dd{\psi \smile \varphi} = \dd{\psi} \smile
\varphi + {(-1)}^{\abs{\psi}} \psi \smile \dd{\varphi}. \] Passing to
cohomology, we see that $H^*(X)$ is a graded algebra. In fact, we have
graded-commutativity, which says \[ [\varphi] \smile [\psi] =
{(-1)}^{\abs{\varphi}\abs{\psi}} [\psi] \smile [\varphi]. \] \textbf{Warning:}
this equality is not true at the chain level. In fact, there is no way to
construct the cup product that makes the chain a commutative dg-algebra, which
leads to the theory of Steenrod operations. We can actually derive all of this
from the homotopical point of view by noting that if $\mathbb{k}$ is a ring,
then \[ K(\k, n) \wedge K(\k, m) \to K(\k, n+m) \] induces a map \[ [X_+, K(\k,
n)] \times [X_+, K(\k, m)] \to [X_+ \wedge X_+, K(\k, n+m)] \to [X_+, K(\k,
n+m)]. \] If we want an algebraic structure on homology, recall that we have a
natural map $C_{\bullet}(X) \otimes C_{\bullet}(Y) \to C_{\bullet}(X \times
Y)$. Now we consider the diagonal map $C_*(X) \to C_*(X \times X)$, which gives
a map $H_*(X) \to H_*(X \times X)$. Unfortunately, there is no way to obtain a
coproduct because the Kunneth formula has an extra $\mr{Tor}$ term. However, if
the homology of $X$ is free, then there is a coproduct. The other problem here
is that coproducts are unintuitive (even if they are probably the same for a
computer). 

Next, we will show that $h_*$ is a module over $h^*$. In the setting of
spectra, a homology class is a map $S^i \to X \wedge K(\k, n)$ and a cohomology
class is a map $S^j \to \ms{Map}(X, K(\k, m))$. The only way to do this is \[
S^{i+j} \cong S^i \wedge S^j \to X_+ \wedge K(\k, n) \wedge \mr{Map}(X_+, K(\k,
m)) \to X_+ \wedge K(\k, n) \wedge K(\k, m) \to X \wedge K(\k, n+m). \] In
fact, there are other products, like the \textit{slant product}. In the
singular theory, the formula for $\mc{S}^k(X) \otimes \mc{S}_n(X) \to
\mc{S}_{n-k}(X)(X)$ is given by \[ \varphi \otimes \sigma \mapsto
{(-1)}^{k(n-k)} \varphi(\sigma([v_{n-k}, \ldots, v_n])) \cdot \sigma([v_0,
\ldots, v_{n-k}]). \] This defines a chain map, so it descende to homology, and
we obtain a map $H^k(X) \otimes H_n(X) \to H_{n-k}(X)$ satisfying \[ (\varphi
\smile \psi) \frown \sigma = \varphi \frown (\psi \frown \sigma). \] Now we can
axiomatize this setting as a \textit{(co)-homology theory equipped with cap
products}. If $(h^*, h_*, \frown)$ are such that $h^*, h_*$ are ordinary, then
this is determined by $h^0(\mr{pt}) \otimes h_0(\mr{pt}) \to h_0(\mr{pt})$. Now
we are ready to state Poincar\'e duality.

\begin{thm} If $M$ is a closed manifold of dimension $n$, then there exists a
    class $[M] \in H_n(M; \F_2)$, then the map \[ H^k(M; \F_2)
    \xrightarrow{\frown [M]} H_{n-k}(M; \F_2) \] is an isomorphism.  \end{thm}

\begin{rmk} We can remove the compactness assumption using compactly supported
homology (or the one-point compactification) and we can allow boundaries by
using relative homology.  \end{rmk}

To state the result for general homology theories, we need the local system of
orientations. Recall that $h_*(M, M \setminus \mr{pt}) \cong h_*(\R^n, \R^n
\setminus 0) \cong h_*(\R^n, \R^n \setminus D^n) \cong h_*(S^n)$. Then we have
suspension isomorphisms $h_{*-n}(\mr{pt}) = \wt{h}_*(S^n)$. Suppose
$h_0(\mr{pt})$ has a distinguished element $e$.

\begin{defn} An \textit{$h$-orientation} of $M$ is a class $[M] \in h_n(M)$
(called the \textit{fundamental class}) whose restriction to $h_*(M, M
\setminus \mr{pt})$ is $e$ for all points in $M$.  \end{defn}

\begin{prop}[Poincar\'e Duality] If $[M]$ is an $h$-orientation of a closed
manifold $M$, then the cap product $h^*(M) \xrightarrow{\frown [M]} h_{n-*}(M)$
is an isomorphism.  \end{prop}

Now, we can use Mayer-Vietoris to analyze the problem of the existence of
orientations.  Orientations restrict along open inclusions. First, if $A
\subset M$, then we can define a notion of an \textit{orientation of $M$ along
$A$} to be a class $[M] \in h_*(M, M \setminus A)$ such that the image of $[M]$
in $h_*(M, M \setminus \mr{pt})$ is $e \in h_*(\R^n, \R^n \setminus \mr{pt})$
for all points in $A$.

Next, this is functorial for inclusions, as in if $B \subset A$, then an
orientation along $A$ induces one along $B$. Every point has an open
neighborhood along which $M$ has an $h$-orientation, which is just a coordinate
chart. 

We will now use Mayer-Vietoris to produce \[ \cdots \to h_*(M, M \setminus (A
\cup B)) \to h_*(M, M \setminus A) \oplus h_*(M, M \setminus B) \to h_*(M, M
\setminus (A \cap B)) \to \cdots \] and so we need $[M]_A$ and $[M]_B$ to
agree.

\begin{lem} Every $M$ has a $\Z/2\Z$ orientation. Moreover, $H_i(M, \Z/2\Z) =
0$ for $i > n$.  \end{lem}

Proof of this is by taking a cover $U_{\alpha}$ and running the above argument
noting that $1 = -1$ in characteristic $2$. However, there is not always a
$\Z$-orientation, where the classic example is the M\"obius strip.

\section{Proof of Poincar\'e duality}% \label{sec:proof_of_poincar'e_duality}

Let $M$ be a compact manifold with fundamental class $[M] \in h_n(M)$. First,
if we have $x \in U$ an open neighborhood, we can cap with the image of $[M]$
in $h_*(U, U \setminus X)$ to get $h^*(\mr{pt}) \cong h^*(U) \to h_{*-n}(U, U
\setminus X)$. Now we will consider compact subsets $K$ of $M$. Define \[
\check{h}(K) = \operatorname{colim}_{K \subset U} h^*(U). \] If we take a
represented cohomology theory, then this is isomorphic to $h^*(K)$.
Unfortunately, this is false for singular cohomology, where the counterexample
is the pseudocircle.

Now capping with the image of $[M]$ gives $\check{h}^*(K) \to h_{*-n}(M, M
\setminus K)$. Here, we use the diagram \begin{equation*} \begin{tikzcd}
    \check{h}^*(K) \arrow{r}{{[M]}} & h_{*-n}(M, M \setminus K) \\ h^*(U)
    \arrow{r} \arrow{r}{{[M]}} & h_*(M, M \setminus U).  \end{tikzcd}
\end{equation*}


\begin{thm}[Alexander Duality] If $K$ is compact, the above map is an
isomorphism.  \end{thm}

\begin{proof} First, we will establish that if Alexander duality holds for $K,
    L, K \cap L$, then it holds for $K \cup L$. To see this, we use the
    Mayer-Vietoris sequences \begin{equation*} \begin{tikzcd} \check{h}^*(K
        \cup L) \arrow{r} \arrow{d}{{[M]}} & \check{h}^*(K) \oplus
        \check{h}^*(L) \arrow{r} \arrow{d}{{[M]}} & \check{h}^*(K \cap L)
        \arrow{d}{{[M]}} \\ h_*(M, M \setminus (K \cup L)) \arrow{r} & h_*(M, M
    \setminus K) \oplus h_*(M, M \setminus L) \arrow{r} & h_*(M, M \setminus (K
\cap L)), \end{tikzcd} \end{equation*} note that two of the vertical arrows are
isomorphisms, and then use the five lemma.

    The next step is to prove continuity. If Alexander duality holds for
    compact sets $K_i$, we will prove that it holds for $\bigcap K_i$. To see
    this, we note that $h_*$ commutes with colimits, so that $h_*(M, M
    \setminus K) = \operatorname{colim} h_i(M, M \setminus K_i)$. Also, we use
    the definition of Cech cohomology.

    Finally, we have reduced to subsets of $\R^n$, and the result clearly holds
    for convex subsets of $\R^n$, so to complete the argument, we use the fact
    that any compact set can be written \[ K = \bigcap_{k \in K} B_{1/i}(K). \]
    Thus we write $B_{1/i}(K) = \bigcup_{k \in K} B_{1/i}(K)$, and this can be
    handled by compactness (reduce to a finite cover), so now we have a
    reduction to $B_{1/i}(0) \subset \R^n$. But then we have $h^n(\R^n, \R^n
    \setminus 0) \cong h^n(\R^n, \R^n \setminus B_{1/i}(0))$.  \end{proof}

\begin{cor} For compact $M$, we have $h^*(M) \simeq h_{*-n}(M)$.  \end{cor}

\begin{proof} Set $K = M$ and use Alexander duality.  \end{proof}

Here are some consequences of Poincare duality: \begin{enumerate} \item If $M$
    is an odd-dimensional manifold, then $\chi(M) = 0$. If we use field
    coefficients, we know that $\dim H_i(M) = \dim H^i(M) = \dim H_{n-i}(M)$,
    and when $n$ is odd then $i, n-i$ have different parity, so they cancel in
    the alternating sum.  \item Assume $M$ is an orientable manifold. If we
    consider the diagram \begin{equation*} \begin{tikzcd} H^n(M) \otimes
        H^{n-k}(M) \arrow{rr}{\smile} \arrow{d}{\frown{[M]}} & & H^n(M)
        \arrow{d}{\frown {[M]}} \\ H^k(M) \otimes H_k(M) \arrow{dr} & & H_0(M)
        \arrow{dl} \\ & \mathbb{K}.  \end{tikzcd} \end{equation*} For ordinary
        cohomology, commutativity follows from either the actual cup and cap
        product formulas or from Eilenberg-Maclane spaces. This tells us that
        the cup product gives us a perfect pairing $H^k(M) \otimes H^{n-k}(M)
        \to H^n(M) \simeq \mathbb{K}$. This tells us that cohomology is a
        graded algebra $A$ with a map $A \xrightarrow{\tr} \mathbb{K}$ such
        that $A^k \otimes A^{n-i} \to A^n \to \mathbb{K}$ is a perfect pairing.
        This is sometimes called a \textit{Frobenius algebra} or a
        \textit{Calabi-Yau algebra}.  

    It is better to do this at the chain level for singular cohomology. Here,
    we consider the map \[ C^k(M) \otimes C^{n-k}(M) \xrightarrow{\smile}
    C^n(M) \xrightarrow{\frown{{[M]}}} C_0(M) \to C_0(\mr{pt}) \simeq \Z. \]
\item Consider the case when $M$ has dimension $2n = 4k+2 = 2(2k+1)$. Then we
    get a map $H^n(M) \otimes H^n(M) \otimes \mathbb{K}$. For $n$ odd, we see
    that $\alpha \cup \beta = - \beta \cup \alpha$, and thus we have an even
    antisymmetric pairing, which is a \textit{symplectic form}. This can be
    decomposed into pieces that look like $\mqty(0 & 1 \\ -1 & 0)$. This
    implies that the Euler characteristic is even.

    If $\dim = 4k$, then $\chi(M)$ can be arbitrary. For example, $\chi(\C\P^2)
    = 3$ and $\chi(S^4) = 2$. We can also produce $4$-manifolds of arbitrary
    Euler characteristic from this process by taking linear combinations of $2$
    and $3$.  \end{enumerate}

Now consider manifolds with boundary $\partial B^{n+1} = M^n$. The statement of
Poincar\'e duality for manifolds with boundary is that the fundamental class
lives in $[B] \in H_{n+1}(B, M)$ and capping gives us an isomorphism $H^k(B)
\to H_{n-k+1}(B, M)$. Also, $M$ is orientable and $[M]$ is the image of $[B]$
under the boundary homomorphism. Now capping with $[B]$ gives a commutative
diagram \begin{equation*} \begin{tikzcd} H^i(B) \arrow{r}{\frown {[B]}}
\arrow{d} & H_{n+1-i}(B,M) \arrow{d} \\ H^i(M) \arrow{r}{\frown {[M]}} &
H_{n-i}(M).  \end{tikzcd} \end{equation*} If we consider the middle dimension
cohomology where $\dim M = n = 4k$, we have a commutative diagram
\begin{equation*} \begin{tikzcd} H^{2k}(B) \arrow{r}{i^*} \arrow{d}{\sim} &
    H^{2k}(M) \arrow{d}{\sim} \arrow{r}{\delta} & H^{2k+1}(B,M) \arrow{d}{\sim}
    H_{2k}(B) \\ H_{2k+1}(B,M) \arrow{r}{\partial} & H_{2k}(M) \arrow{r}{i_*} &
    H_{2k}(B).  \end{tikzcd} \end{equation*} Note that $\rank (\Im i^*) = \rank
    (\Im \partial) = \rank (\Im \delta)$. Also, $\rank(H^{2k}(M)) = \rank(\Im
    i^*) + \rank (\Im \delta)$, so $\rank (\Im H^{2k}(B)) = \frac{1}{2} \rank
    (H^{2k}(M))$. Moreover, the map \[ H^i(B) \to H^i(M) \xrightarrow{{[M]}}
        H_{n-i}(M) \to H_{n-i}(B) \] is zero by exactness. Dualizing, we see
        that the pairing \[ H^i(B) \otimes H^{n-i}(B) \to H^n(B) \to H^n(M)
        \xrightarrow{{[M]}} \Z \] vanishes, so the intersection pairing
        vanishes on $\Im (H^{2k}(B))$ and thus the pairing is isotropic. If we
        do the same thing for $n = 4k+2$, we obtain a Lagrangian subspace.

Now consider a Riemann surface embedded in $\R^3$. This bounds some manifold
$B$. There are some curves bounding discs and some curves bounding ``holes'' of
the surface, and these are the symplectic basis for the intersection pairing.
In summary, the map $H^n(B) \to H^n(M)$ has half-dimensional image.
Unfortunately, we can make the homology of $B$ more complicated by adding
stuff, so we cannot say anything about the entire homology of $B$.

Finally, suppose that $\dim (M) = 4k$. Over $\R$, a nondegenerate form splits
into positive and negative-definite parts $V_+, V_-$.

\begin{defn} Define the \textit{sign} of a manifold $M$ as $\mr{sign}(M) = \dim
V_+ - \dim V_-$.  \end{defn}

\begin{thm} If $M = \partial B$, then $\mr{sign}(M) = 0$.  \end{thm}

\begin{proof} The image of $H^{2k}(B) \to H^{2k}(M)$ is half-dimensional, but
the pairing vanishes on it (because $[B]$ lives in degree $4k+1$), and then by
linear algebra the only way this can happen is when $\dim V_+ = \dim V_-$.
\end{proof}

This means there are manifolds which cannot be boundaries (all $3$-manifolds
are boundaries of $4$-manifolds), such as $M = \C\P^2$. Here, the form is $\Z
\otimes \Z \to \Z$ and is positive definite.

\end{document}

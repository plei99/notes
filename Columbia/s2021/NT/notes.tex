\documentclass[leqno, openany]{memoir}
\setulmarginsandblock{3.5cm}{3.5cm}{*}
\setlrmarginsandblock{3cm}{3.5cm}{*}
\checkandfixthelayout

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
%\usepackage{MnSymbol}
\usepackage{bm}
\usepackage{accents}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{automata,positioning}
\usepackage{tikz-cd}
\usepackage{forest}
\usepackage{braket} 
\usepackage{listings}
\usepackage{mdframed}
\usepackage{verbatim}
\usepackage{physics}
\usepackage{stackengine} 
\usepackage{stmaryrd}

%font
\usepackage[sc]{mathpazo}
\usepackage{eulervm}
\usepackage[scaled=0.86]{berasans}
\usepackage{inconsolata}
\usepackage{microtype}

%CS packages
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{algorithm}

% typeset and bib
\usepackage[english]{babel} 
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage[backend=biber, style=alphabetic]{biblatex}
\usepackage[bookmarks, colorlinks, breaklinks]{hyperref} 
\hypersetup{linkcolor=black,citecolor=black,filecolor=black,urlcolor=black}

% other formatting packages
\usepackage{float}
\usepackage{booktabs}
\usepackage[shortlabels]{enumitem}
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage{titling}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{parskip}

\usepackage{lipsum}

% delimiters
\DeclarePairedDelimiter{\gen}{\langle}{\rangle}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}


\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{quest}[thm]{Question}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{defns}[thm]{Definitions}
\newtheorem{con}[thm]{Construction}
\newtheorem{exm}[thm]{Example}
\newtheorem{exms}[thm]{Examples}
\newtheorem{notn}[thm]{Notation}
\newtheorem{notns}[thm]{Notations}
\newtheorem{addm}[thm]{Addendum}
\newtheorem{exer}[thm]{Exercise}

\theoremstyle{remark}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{rmks}[thm]{Remarks}
\newtheorem{warn}[thm]{Warning}
\newtheorem{sch}[thm]{Scholium}


% unnumbered theorems
\theoremstyle{plain}
\newtheorem*{thm*}{Theorem}
\newtheorem*{prop*}{Proposition}
\newtheorem*{lem*}{Lemma}
\newtheorem*{cor*}{Corollary}
\newtheorem*{conj*}{Conjecture}

% unnumbered definitions
\theoremstyle{definition}
\newtheorem*{defn*}{Definition}
\newtheorem*{exer*}{Exercise}
\newtheorem*{defns*}{Definitions}
\newtheorem*{con*}{Construction}
\newtheorem*{exm*}{Example}
\newtheorem*{exms*}{Examples}
\newtheorem*{notn*}{Notation}
\newtheorem*{notns*}{Notations}
\newtheorem*{addm*}{Addendum}


\theoremstyle{remark}
\newtheorem*{rmk*}{Remark}

% shortcuts
\newcommand{\Ima}{\mathrm{Im}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\I}{\mathbb{I}}
\renewcommand{\k}{\Bbbk}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\M}{\overline{M}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\h}{\mathfrak{h}}
\newcommand{\n}{\mathfrak{n}}
\renewcommand{\b}{\mathfrak{b}}
\newcommand{\ep}{\varepsilon}
\newcommand*{\dt}[1]{%
   \accentset{\mbox{\Huge\bfseries .}}{#1}}
\renewcommand{\abstractname}{Official Description}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\mf}[1]{\mathfrak{#1}}
\newcommand{\mr}[1]{\mathrm{#1}}
\newcommand{\ms}[1]{\mathsf{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}

\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\spec}{Spec}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Ass}{Ass}
\DeclareMathOperator{\dpth}{depth}
\DeclareMathOperator{\pdim}{proj.dim}
\DeclareMathOperator{\idim}{inj.dim}
\DeclareMathOperator{\gdim}{gl.dim}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Mod}{\mathsf{Mod}}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Inf}{Inf}
\DeclareMathOperator{\Cor}{Cor}
\DeclareMathOperator{\Nm}{Nm}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Frob}{Frob}

% Section formatting
\titleformat{\section}
    {\Large\sffamily\scshape\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[runin]
    {\large\sffamily\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}[runin]{\normalfont\itshape}{\thesubsubsection}{1em}{}

\title{COURSE TITLE}
\author{Lectures by INSTRUCTOR, Notes by NOTETAKER}
\date{SEMESTER}

\newcommand*{\titleSW}
    {\begingroup% Story of Writing
    \raggedleft
    \vspace*{\baselineskip}
    {\Huge\itshape Algebraic Number Theory \\ Spring 2021}\\[\baselineskip]
    {\large\itshape Notes by Patrick Lei}\\[0.2\textheight]
    {\Large Lectures by Chao Li}\par
    \vfill
    {\Large \sffamily Columbia University}
    \vspace*{\baselineskip}
\endgroup}
\pagestyle{simple}

\chapterstyle{ell}


%\renewcommand{\cftchapterpagefont}{}
\renewcommand\cftchapterfont{\sffamily}
\renewcommand\cftsectionfont{\scshape}
\renewcommand*{\cftchapterleader}{}
\renewcommand*{\cftsectionleader}{}
\renewcommand*{\cftsubsectionleader}{}
\renewcommand*{\cftchapterformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsubsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}
\renewcommand{\cftsubsectionafterpnum}{\cftparfillskip}
\setrmarg{3.55em plus 1fil}
\setsecnumdepth{subsection}
\maxsecnumdepth{subsection}
\settocdepth{subsection}

\begin{document}
    
\begin{titlingpage}
\titleSW
\end{titlingpage}

\thispagestyle{empty}
\section*{Disclaimer}%
\label{sec:disclaimer}

These notes were taken during lecture using the \texttt{vimtex} package of the
editor \texttt{neovim}.  Any errors are mine and not the instructor's.  In
addition, my notes are picture-free (but will include commutative diagrams) and
are a mix of my mathematical style and that of the instructor.  If you find any
errors, please contact me at \texttt{plei@math.columbia.edu}.

\newpage

\tableofcontents


\chapter{Motivation}% \label{cha:motivation}

Here is a very classical question (that the ancients were interested in):

\begin{quest} Which prime numbers $p$ can be written as $p = x^2 + y^2$ for
integers $x,y$?  \end{quest}

We can try to answer this by experiment. Clearly, $2=1+1,5=1+4,13=4+9,17=1+16$
and the other primes below $20$ cannot be written as a sum of two squares.
Then, because any square is congruent to $0$ or $1$ modulo $4$, we see that if
$p$ is an odd prime, then

\begin{thm}[Fermat, Christmas Day, 1640] An odd prime $p$ can be written as a
    sum of two squares if and only if $p \equiv 1 \pmod 4$.\footnote{Of course,
    Fermat never actually proved anything, and this statement was proved by
Euler in the 1740s.} Similarly, we have: \begin{itemize} \item $2 \neq p = x^2
+ 2y^2$ if and only if $p \equiv 1,3 \pmod 8$.  \item $3 \neq p = x^2 + 3y^2$
if and only if $p \equiv 1 \pmod 3$.  \end{itemize} \end{thm}

In the modern day, we should reinterpret $p = x^2 + y^2$ as a factorization
problem in the number field $k = \Q(i)$. Now we write our problem as $p =
(x+iy)(x-iy)$. Similarly, the second problem can be written as $p = (x +
\sqrt{-2} y)(x - \sqrt{-2} y)$ in $\Q(\sqrt{-2})$ and the third problem can be
expressed in the field $\Q(\sqrt{-3})$. More generally, we can consider $k =
\Q(\sqrt{d})$ for an arbitrary $d$, called the \textit{discriminant} of $k$.
For a general quadratic extension, the ring of integers is not a UFD, but it is
Dedekind, so we have unique factorization of prime ideals. Therefore we can
write \[ (p) = \begin{cases} \mf{p}_1 \mf{p}_2 & \qty(\frac{d}{p}) = 1 \\
\mf{p} & \qty(\frac{d}{p}) = -1 \\ \mf{p}^2 & \qty(\frac{d}{p}) = 0 (\text{ or
} p \mid d).  \end{cases} \] What we want to know is when the ideal $(p)$
splits, and this behavior is governed by the Legendre symbol. This symbol
satisfies the miraculous identity (due to Gauss)

\begin{thm}[Quadratic Reciprocity] Let $p,q$ be odd primes. Then we have the
    identity \[ \qty(\frac{q}{p}) \qty(\frac{p}{q}) = {(-1)}^{\frac{p-1}{2}
    \frac{q-1}{2}}. \] \end{thm}

Recall that if $p$ is odd and $p \nmid d$, then $\qty(\frac{d}{p}) = 1$ if and
only if $x^2 \equiv d \pmod p$ has solutions. Quadratic reciprocity tells us
that the equation $x^2 \equiv q \pmod p$ is highly related to the equation $x^2
\equiv p \pmod q$. This ability to change the modulus is very helpful in
solving these classical problems.

\begin{exm} A prime $p$ splits in $\Q(\sqrt{-3})$ if and only if
$\qty(\frac{-3}{p}) = 1$ if and only if $\qty(\frac{p}{3}) = 1$ if and only if
$p \equiv 1 \pmod 3$.  \end{exm}

Now we can generalize our question about splitting in quadratic fields to more
general fields:

\begin{quest} Is there a criterion of the form $p$ splits in $k$ if and only if
$p \equiv * \pmod N$ for some $N$? If so, we can generalize quadratic
reciprocity. This is one of the main questions of class field theory.
\end{quest}

\begin{exm} We have some examples of splitting behavior: \begin{itemize} \item
    $p$ splits in $k = \Q(\sqrt{-5})$ if and only if $p \equiv 1,3,7,9 \pmod
    20$.  \item $p$ splits in $k = \Q(\sqrt{-5}, i)$ if and only if $p \equiv
    1,9 \pmod 20$.  \item $p$ splits in $k = \Q(\zeta_5)$ if and only if $p
    \equiv 1 \pmod 5$.  \end{itemize} However, there is no congruence condition
    for splitting in $k = \Q(\sqrt[3]{2})$ for any modulus $N$. The question is
    what is different about the last example. First, the fields $\Q(\sqrt{-5}),
    \Q(\sqrt{-5}, i), \Q(\zeta_5)$ are all Galois extensions of $\Q$ with
    Galois groups $\Z/2, \Z/2 \times \Z/2, \Z/4$. On the other hand, $k =
    \Q(\sqrt[3]{2})$ is not Galois and its Galois closure $\Q(\sqrt[3]{2},
    \zeta_3)$ has Galois group $S_3$.  \end{exm}

\begin{defn} A field extension $L/K$ is called \textit{abelian} if $L/K$ is
Galois and $\Gal(L/K)$ is abelian.  \end{defn}

This gives us the following slogan: given a number field $k$, class field
theory \begin{enumerate} \item classifies all abelian extensions $L/K$ in an
    accessible way; \item describes factorization of primes of $K$ in $L$ in
    terms of groups intrinsic to $K$ (for example the class group of $K$).
    \end{enumerate}

\section{A Special Case of CFT}% \label{sec:a_special_case_of_cft}

Here, we will classify all \textit{unramified} abelian extensions $L/K$. Recall
that the \textit{class group} $\Cl(K)$ of a number field $K$ is \[ \Cl(K)
\coloneqq \qty{\text{fractional ideals of $K$}} / \qty{\text{principal ideals
of $K$}}. \] This is always a finite abelian group.

\begin{defn} Let $H \subset \Cl(K)$ be a subgroup. Then a finite unramified
abelian extension $L/K$ is a \textit{class field} for a subgroup $H \subset
\Cl(K)$ if $\mf{p}$ splits in $L/K$ if and only if $[\mf{p}] \in H \subset
\Cl(K)$.  \end{defn}

\begin{thm}[Unramified CFT] Given $H \subset \Cl(K)$, the class field for $H$
    exists and is unique. Moreover, each finite unramified abelian extension
    arises as a class field. This gives us a bijection \[ \qty{\text{finite
    unramified abelian extensions}} \longleftrightarrow \qty{\text{subgroups of
    $\Cl(K)$}}. \] Moreover, $\Gal(L/K) \cong \Cl(K) / H$.  \end{thm}

\begin{defn} Note that the class field for $H = 0$ is the maximal unramified
    abelian extension $H_K$ of $K$, called the \textit{Hilbert class field}.
    This gives a canonical isomorphism $\Gal(H_K/K) \cong \Cl(K)$. Also, we see
    that $\mf{p}$ splits in $H_K$ if and only if $\mf{p}$ is a principal ideal.
\end{defn}

\begin{exm} For the fields $K = \Q, \Q(i), \Q(\sqrt{-2}), \Q(\sqrt{-3})$, we
have $\Cl(K) = 0$ and thus $H_K = K$.  \end{exm}

\begin{exm} The simplest example of a number field with nontrivial class group
is $K = \Q(\sqrt{-5})$. Here, $\Cl(K) = \Z/2$ and $H_K = \Q(\sqrt{-5}, i)$.
\end{exm}

\begin{rmk} More generally, class field theory will add ramification on both
    sides of the correspondence to obtain a correspondence \[ \qty{\text{finite
    abelian extensions}} \longleftrightarrow \qty{\text{subgroups of $\mc{C}_K
    = \A_K^{\times}/K^{\times}$}}. \] \end{rmk}

\section{Back to Fermat}% \label{sec:back_to_fermat}

Consider the equation $p = x^2 + 5y^2$. Recall that we have $2,5 \neq p = x^2 +
5y^2$ if and only if $p \equiv 1,9 \pmod 20$. Note that this is
\textbf{different} from the splitting behavior in $K = \Q(\sqrt{-5})$. This
happens because $\Cl(\Q(\sqrt{-5})) = \Z/2$ is not trivial, and so we need both
the condition that $(p) = \mf{p}_1 \mf{p}_2$ \textbf{and} that the $\mf{p} _i$
are principal. By unramified CFT, we know that $\mf{p}_i$ are principal if and
only if they split in $H_K = \Q(\sqrt{-5}, i)$, and therefore $p = x^2 + 5y^2$
if and only if $p$ splits in $\Q(\sqrt{-5}, i)$. In this case, $H_K/\Q$ is
abelian, so we have a nice answer.

\begin{exm} The primes of the form $p = x^2 + 14 y^2$ \textbf{cannot} be
described in terms of a congruence condition. The field $K = \Q(\sqrt{-14})$
has $\Cl(K) = \Z/4$ and $\Gal(H_K/\Q) \cong D_4$ is \textbf{non-abelian}.
\end{exm}

\begin{rmk} We can study non-abelian extensions to get some nice answers that
involve modular forms, and this is called the \textit{Langlands program}, which
is beyond the scope of this course.  \end{rmk}

Our outline for the semester is to prove local CFT, then prove global CFT, then
do applications if time permits. This will be done using group cohomology.

\chapter{Local Fields}% \label{cha:local_fields}

Recall that it is very difficult to detect whether a polynomial equation over a
global field like $\Q$ has solutions. However, we can embed $\Q$ into the local
field $\R$ and then checking whether the polynomial has real solutions is very
easy because we can do analysis. To try to recover all information about $\Q$,
we can embed $\Q \hookrightarrow \Q_p$ for a prime $p$. We then have the
following slogan, known as the local-to-global principle:

\begin{quotation} \itshape We will study problems in $\Q$ by studying problems
in all the local fields $\R$ and $\Q_p$.  \end{quotation}

\section{Absolute Values}% \label{sec:absolute_values}

\begin{defn} Let $K$ be a field. An \textit{absolute value} on $K$ is a
    function $\abs{-} \colon K \to \R$ such that \begin{enumerate} \item
        $\abs{-}$ sends $K^{\times}$ to $\R_{>0}$ and $0$ to $0$.  \item We
        have $\abs{xy} = \abs{x} \cdot \abs{y}$ for all $x,y \in K$.  \item For
all $x,y \in K$, we have $\abs{x+y} \leq \abs{x} + \abs{y}$.  \end{enumerate}
\end{defn}

\begin{exm} The usual absolute value on $\R$ defines an absolute value in this
    semse. This induces an absolute value on $\Q \subseteq \R$ usually denoted
    by $\abs{-}_{\infty}$. This is known as the archimedean absolute value on
    $\Q$.

    Similarly, any embedding $K \xhookrightarrow{\sigma} \R$ or $K
\xhookrightarrow{\sigma} \C$ induces an absolute value on $K$ defined by
$\abs{x}_{\sigma} \coloneqq \abs{\sigma(x)}$.  \end{exm}

There is a different kind of absolute value that is not archimedian. Here, we
will strengthen the triangle inequality.

\begin{defn} If $\abs{-}$ satisfies the ultrametric inequality \[ \abs{x+y}
\leq \max \qty{\abs{x}, \abs{y}} \] then we say $\abs{-}$ is
\textit{nonarchimedean}.  \end{defn}

\begin{rmk} Recall that $\R$ satisfies the archimedean property: If $0 \neq x
    \in \R$ there exists $n \in \Z$ such that $\abs{nx} > 1$. This property
    fails for nonarchimedean absolute values because $\abs{nx} \leq \abs{x}$
    for all $n \in \Z$. In fact, $\abs{-}$ is nonarchimedean if and only if the
    set $\qty{\abs{n \cdot 1}}_{n \in \Z}$ is bounded.  \end{rmk}

\begin{exm} Let $a \in \Q^{\times}$ and $p$ be a prime. Then define
    $\mr{ord}_p(a) \in \Z$ such that \[ a = \pm \prod_{p} p^{\mr{ord}_p(a)}. \]
    Now for any $c < 1$, we define \[ \abs{a}_p \coloneqq c^{\mr{ord}_p(a)}. \]
    Then we simply need to check that $\abs{-}_p$ is a nonarchimedean absolute
    value on $\Q$. Here, it is easy to check the ultrametric inequality, and
    this absolute value is called the \textit{$p$-adic absolute value}. By
    convention, we will choose $c = p^{-1}$ and this is the \textit{normalized
    $p$-adic absolute value} on $\Q$.  \end{exm}

\begin{exm} For any number field $K$ and prime ideal $\mf{p} \subseteq
    \mc{O}_K$. Then we have a normalized $\mf{p}$-adic absolute value \[
    \abs{a}_{\mf{p}} \coloneqq \qty(\frac{1}{N\mf{p}})^{\mr{ord}_{\mf{p}}(a)}
\] where $N\mf{p} = \# \mc{O}_K / \mf{p}$.  \end{exm}

\begin{defn} An absolute value $\abs{-}$ is \textit{discrete} if
$\abs{K^{\times}} \subset \R$ is discrete under the usual topology on $\R$.
\end{defn}

\begin{exm} For a number field $K$ and prime $\mf{p}$, the $p$-adic absolute
value $\abs{-}_{\mf{p}}$ is discrete. On the other hand, $\abs{-}_{\infty}$ is
not discrete.  \end{exm}

\begin{defn} Suppose $\abs{-}$ be nonarchimedean. Then define \begin{enumerate}
    \item $A \coloneqq \qty{a \in K \mid \abs{a} \leq 1}$. This is a subring of
        $K$.  \item Now define $A^{\times} = \qty{a \in K \mid \abs{a} = 1}$.
        This is a subgroup of $A$ of invertible elements.  \item Set $\mf{m} =
\qty{a \in K \mid \abs{a} < 1}$. This is the unique maximal ideal of $A$.
\end{enumerate} Then $\abs{-}$ is discrete if and only if $\mf{m}$ is
principal. In this case, a generator $\pi$ of $\mf{m}$ is called a
\textit{uniformizer}. Then every $a \in K$ can be uniquely written as $a =
\pi^r \cdot u$ for some $r \in \Z, u \in A^{\times}$.  \end{defn}

\begin{exm}(Non-example) Consider the field $\Q(\qty{p^{1/n}}, n \in \Z)$ with
$p$-adic absolute value. This is not a discrete absolute value.  \end{exm}

\begin{defn} An absolute value defines a \textit{metric} on $K$ by $d(a,b) =
    \abs{a-b}$ for all $a,b \in K$. This induces a topology on $K$ where a
    basis of open neighborhoods of $a \in K$ is given by open balls \[ B(a,r)
    \coloneqq \qty{x \in K \mid \abs{x-a} < r}. \] \end{defn}

\begin{exm} In the $p$-adic topology, we see that $a,b \in \Q$ are closer under
    $\abs{-}_p$ if and only if $\abs{a-b}_{p}$ is smaller, which is equivalent
    to $\mr{ord}_p(a-b)$ being larger, which is equivalent to $a-b$ being
    divisible by a large power of $p$. In other words, $a \equiv b \pmod p^N$
    for $N$ large.  \end{exm}

\begin{defn} We say two absolute values on $K$ are \textit{equivalent}, or
$\abs{-} \sin \abs{-}'$ if they induce the same topology on $K$.  \end{defn}

\begin{thm}[Ostrowski, 1916] Let $\abs{-}$ be an absolute value on $\Q$.
    \begin{enumerate} \item If $\abs{-}$ is archimedean, then $\abs{-} \sim
        \abs{-}_{\infty}$.  \item If $\abs{-}$ is nonarchimedean, then $\abs{-}
        \sim \abs{-}_p$ for a unique $p$.  \end{enumerate} \end{thm}

\begin{rmk} Similarly, absolute values on a number field $K$ are given by
    \begin{enumerate} \item $\abs{-}_{\mf{p}}$ for a prime ideal $\mf{p}
        \subseteq \mc{O}_K$ ($\mf{p}$-adic place); \item $\abs{-}_{\sigma}$ for
        some $\sigma \colon K \hookrightarrow \R$ (real place); \item
$\abs{-}_{\sigma}$ for some complex embeddings $\sigma \colon K \hookrightarrow
\C$ (complex place). Here, note that complex embeddings come in conjugate
pairs.  \end{enumerate} \end{rmk}

\begin{defn} An equivalence class of absolute values on $K$ is called a
\textit{place (or prime)} of $K$.  \end{defn}

\begin{rmk} When $v$ is a complex place it corresponds to a pair of complex
    embeddings $\sigma, \ol{\sigma}$, so we define \[ \abs{x}_v \coloneqq
    \abs{\sigma(x)}^2 \] and this is the \textit{normalized absolute value for
$v$}.  \end{rmk}

One reason for this normalization is

\begin{thm}[Product Formula] Let $K$ be a number field. Then for all $a \in
    K^{\times}$, we have \[ \prod_{v \text{ place of }K} \abs{a}_v = 1. \]
\end{thm}

\begin{rmk} When $K = \Q$, let $a = \frac{m}{n}$ for $m,n \in \Z$. Then all but
    finitely many terms in the product are finite. Now it suffices to check
    this formula for $a = p$ and $a = -1$.

    When $a = p$, we see that $\abs{a}_p = p^{-1}$ and for primes $\ell \neq
    p$, we have $\abs{a}_{\ell} = 1$. Finally, we see that $\abs{a}_{\infty} =
    p$, so the formula holds. When $a = -1$, all absolute values are $1$, so
    the product of all absolute values is trivial.

    For a general number field, we can simply take the norm map $N_{K/\Q}$ to
$\Q$ and check that it behaves well with respect to the places.  \end{rmk}

\begin{thm}[Weak Approximation] Let $\abs{-}_1, \ldots, \abs{-}_n$ be
    inequivalent absolute values on a field $K$. Let $a_1, \ldots, a_n \in K$.
    Then for all $\ep > 0$, there exists $a \in K$ such that $\abs{a-a_i}_i <
    \ep$ for all $i = 1, \ldots, n$.  \end{thm}

\begin{rmk} This allows us to approximate any finite collection $a_i \in K$ for
inequivalent $\abs{-}_i$.  \end{rmk}

\begin{rmk} As a sanity check, consider $K = \Q$ and suppose $\abs{-}_i =
\abs{-}_{p_i}$. Then given $a_1, \ldots, a_n$, we simply find $a \in \Q$ such
that $a_i \equiv a \pmod p_i^N$, which is possible by the Chinese remainder
theorem.  \end{rmk}

\begin{rmk} More generally, if $\abs{-}_1 \nsim \abs{-}_2$ then one can choose
    $a \in K$ such that $\abs{a}_1 > 1$ and $\abs{a}_2 < 1$. Then if we
    consider $\frac{a^r}{1+a^r}$ as $r \to \infty$, the absolute value under
    $\abs{-}_1$ approaches $1$ and under $\abs{-}_2$ it approaches $0$.
\end{rmk}

\section{Completions}% \label{sec:completions}

Consider the field $\Q$ equipped with the the absolute value
$\abs{-}_{\infty}$. Then we can complete $\Q$ as a metric space to obtain the
field $\R$. More generally, if $(K, \abs{-})$ is a field equipped with an
absolute value (a \textit{valued field}), then we will produce a general
completion $\wh{K}$. Our aim is to produce a field that contains the original
field and whose arithmetic is easier to understand.

\begin{defn} Let $(K, \abs{-})$ be a valued field. Then a sequence $\qty{a_n}$
    of elements in $K$ is called \textit{Cauchy} if for all $\ep > 0$, there
    exists $N \geq 1$ such that $\abs{a_n - a_m} < \ep$ for all $n,m > N$. We
    say that $K$ is \textit{complete} if any Cauchy sequence in $K$ has a limit
    in $K$.  \end{defn}

\begin{exm} Consider the sequence of integers $\qty{a_n = 2^n} = 2, 4, 8, 16,
    32, \ldots$. Clearly, this is not Cauchy under the usual absolute value on
    $\Q$, but then if $m > n$, we see that \[ \abs{a_n - a_m}_2 =
    \qty(\frac{1}{2})^n, \] so $\qty{a_n}$ is Cauchy in $(\Q, \abs{-}_2)$. We
then see that $\abs{a_n - 0}_2 = \qty(\frac{1}{2})^n \to 0$ and thus the limit
of the sequence is $0$.  \end{exm}

\begin{exm} Consider $\qty{a_n} = \qty{4, 34, 334, 3334, \ldots}$. Then if $m >
    n$, we have \[ \abs{a_n - a_m}_5 = {\qty(\frac{1}{5})}^n \] and therefore
    $\qty{a_n}$ is Cauchy in $(\Q,\abs{-}_2)$. We then see that \[ \abs{3 a_n -
    2}_5 = \frac{1}{5^n} \xrightarrow{n \to \infty} 0 \] and therefore $a_n \to
\frac{2}{3}$.  \end{exm}

\begin{rmk} In general, the limit of a Cauchy sequence may not exist.
\end{rmk}

\begin{thm} Let $(K, \abs{-})$ be a valued field. Then there exists a complete
    valued field $(\wh{K}, \abs{-})$ and an embedding $K \hookrightarrow
    \wh{K}$ of valued fields such that any other embedding $K \hookrightarrow
    L$ of $K$ into a complete valued field factors uniquely through $\wh{K}$.
    In particular, $\wh{K}$ is unique up to isomorphism and is called the
    \textit{completion} of $(K, \abs{-})$.  \end{thm}

\begin{proof} Let $\wh{K}$ be the set of all Cauchy sequences in $K$ under the
    equivalence relation where $\qty{a_n} \sim \qty{b_n}$ where $\lim_{n \to
    \infty} \abs{a_n - b_n} = 0$. Then $\wh{K}$ is equipped with termwise
    addition and multiplication and absolute value $\abs{\qty{a_n}} = \lim_{n
    \to \infty} \abs{a_n}$. Thus $\wh{K}$ is a complete valued field.

    To verify the universal property, we see that $x \mapsto (x, x, \ldots, x)$
embeds $K \hookrightarrow \wh{K}$ and this satisfies the desired universal
property.  \end{proof}

\begin{defn} Let $K$ be a number field and $v$ a place of $K$. Denote by $K_v
    \coloneqq (K, \abs{-}_v)$. When $v$ is a finite place, denote by
    $\mc{O}_{K_v} = \mc{O}_{K,v} = \mc{O}_v$ the valuation ring $\qty{x \in K_v
    \colon \abs{x} \leq 1} \subseteq K_v$. When $v$ is an infinite place, we
    see that $K_v \cong \R, \C$.  \end{defn}

\begin{exm} Let $K = \Z$. Then we see that $\Q_{\infty} = \R$ and $\Q_p$ has a
subring $\Z_p$, which is a discrete valuation ring. Here, elements of $\Z_p$
have a nonnegative lowest power of $p$.  \end{exm}

\begin{exm} If $K = \Q(i)$, then $K_{\infty} = \C$ and $K_{\mf{p}}$ for $\mf{p}
\subset \mc{O}_K = \Z[i]$ prime ideals are the completions of $K$.  \end{exm}

\begin{rmk} Let $K$ be a nonarchimedean discrete valued field. Then $\wh{K}$ is
    a complete discrete valued field and the valuation ring $\wh{A} \subset
    \wh{K}$ is the closure of $A \subseteq K$ in $\wh{K}$. Also, the maximal
    ideal $\wh{\mf{m}} \subseteq \wh{A}$ is the closure of $\mf{m} \subseteq A$
    in $\wh{K}$. Finally, a uniformizer $\pi$ of $K$ is also a uniformizer of
    $\wh{K}$.

    We also see that the natural map $A / \mf{m}^n \to \wh{A} / \wh{\mf{m}}^n$
is an isomorphism. This tells us that we can approximate elements in $\wh{A}$
up to $\pi^n A$ using elements in $A$.  \end{rmk}

\begin{prop} Let $K$ be a discrete valued field. Let $S$ be a complete set of
    representatives of $A/\mf{m}$ and $\pi$ be a uniformizer of $K$. Then any
    element of $\wh{K}$ can be uniquely written as $a_k \pi^k + a_{k+1}
    \pi^{k+1} + \cdots$ where $a_i \in S$ and $k \in \Z$.  \end{prop}

\begin{cor} Let $x \in \Q_p$. Then $x$ has a \textit{$p$-adic expansion} $x =
\sum_{i \geq k} a_i p^i$, where $a_i \in S = \Z/p\Z = \qty{0, 1, \ldots, p-1}$
and $k \in \Z$.  \end{cor}

\begin{rmk} The main term of the $p$-adic expansion is the lowest term $p^k$.
This is completely unlike the situation with the decimal digits of $x \in \R$,
where the highest power of $10$ is the main term.  \end{rmk}

\begin{rmk} $\Q_p$ resembles $\F_p((T))$ but is more complicated
    arithmetically. When we add two power series, we simply add the
    coefficients, but addition in $\Q_p$ requires carrying. In addition, we see
    that $\F_p [[T]] / T^n \hookrightarrow \F_p[[T]]$ but $\Z_p / p^n$ does
    \textbf{not} embed in $\Z_p$.  \end{rmk}

\begin{cor} We have an isomorphism \[ \wh{A} = \lim_{\longleftarrow} \wh{A} /
    \wh{\mf{m}}^n \cong \lim_{\longleftarrow} A/\mf{m}^n. \] For example, we
    have \[ \Z_p = \lim_{\longleftarrow} \Z/p^n \Z. \] \end{cor}

\begin{proof}[Proof of Proposition 2.2.10] Let $x \in \wh{K}^{\times}$. Then $x
    = \pi^k \cdot y$ for some $k \in \Z$ and $y \in \wh{A}^{\times}$. Then we
    find the first digit $a_0$ by considering $y \equiv a_0$ in $A/\mf{m} = S$.
    Then we replace $\pi^{-1} (y-a_0) = a_1 + a_2 \pi^2 + \cdots$ and repeat
    the process. Repeating this, we simply use the completeness of $\wh{K}$ to
    obtain the desired expansion.  \end{proof}

The advantage of completeness is that it is much easier to solve equations.
Here, we take solutions modulo a high power of $p$ and then take the limit.

\begin{thm}[Hensel's Lemma] Let $K$ be a complete discrete valued field and $k
    = A/\mf{m}$ be the residue field. Now let $f(x) \in A[x]$ be a monic
    polynomial and let $\ol{f}(x) \coloneqq f(x) \mod \mf{m} \in k[x]$. Assume
    that $\ol{f}(x) = g_0(x) h_0(x)$ in $k[x]$ where $g_0, h_0$ are monic and
    coprime. Then there exist unique $g,h \in A[x]$ such that $f(x) = g(x)
    h(x)$ and $\ol{g} \equiv g_0, \ol{h} = h_0$.  \end{thm}

\begin{cor} Suppose $\ol{f}$ has a simple root $\alpha_0 \in k$. Then $f(x)$
has a unique zero $\alpha \in A$ such that $\ol{\alpha} = \alpha_0$.  \end{cor}

\begin{cor} If $k = \F_q$ for $q = p^t$, then $f(x) = x^q - x$ has $q$ distinct
    roots in $k = \F_q$ and hence $q$ distinct roots in $K$. In particular,
    $K^{\times}$ contains all $(q-1)$-th roots of unity, so we have a map
    $\F_q^{\times }\hookrightarrow K^{\times}$, called the \textit{Teichmuller
    lift}.  \end{cor}

\begin{proof}[Proof of Hensel's lemma] Let $g_0, g_0 \in A[x]$ be arbitrary
    monic lifts. Then $f - g_0 h_0 \in \pi A[x]$. Now inductiely we assume that
    there exist $g_n, h_n \in A[x]$ monic such that $f - g_n h_n \in \pi^{n+1}
    A[n]$. We simply write $g_{n+1} = g_n + \pi^{n+1} u$ for some $u \in A[x]$
    such that $\deg u < \deg g_n$ and $h_{n+1} = h_n + \pi^{n+1} v$ where $\deg
    v < \deg h_n$. Then $f - g_{n+1} h_{n+1} \in \pi^{n+2} A$ if and only if \[
    u h_n - v g_n \equiv \frac{f - g_n h_n}{\pi^{n+1}} \pmod \pi \] but we can
    find such $u,v$ by Bezout's lemma. Thus the desired $g_{n+1}, h_{n+1}$
    exist, and we obtain $g,h$ by taking the limit.  \end{proof}

\section{Extension of Absolute Values and Unramified Extensions}%
\label{sec:extension_of_absolute_values_and_unramified_extensions}

Let $K$ be a complete discrete valued field and $L$ be a finite separable
extension of $K$. Suppose $[L:K] = n$. The main result is

\begin{thm} Let $K,L$ be as above. Then \begin{enumerate} \item $\abs{-}_K$
    extends uniquely to a discrete absolute value $\abs{-}_L$ on $L$; \item $L$
    is complete with respect to $\abs{-}_L$; \item For all $\beta \in L$, we
    have \[ \abs{\beta}_L = \abs{N_{L/K}(\beta)}_K^{1/n}. \] \end{enumerate}
\end{thm}

\begin{rmk} To perform a sanity check, if $\beta \in K$, we have $\abs{\beta}_L
= \abs{N_{L/K}(\beta)}_K^{1/n} = \abs{\beta^n}_K^{1/n} = \abs{\beta}_K$.
\end{rmk}

\begin{proof}\leavevmode \begin{enumerate} \item We first need to prove that a
    unique extension exists. We know that $\abs{-}_K$ comes from a discrete
    valuation (hence is nonarchimedean), so let $A \subseteq K$ be the
    valuation ring. Then $A$ is a Dedekind domain. Then let $B$ be the integral
    closure of $A$ in $L$. Then $B$ is also a Dedekind domain. But then any
    absolute value on $L$ extending $\abs{-}_K$ comes from a maximal iddeal of
    $B$ lying above the unique maximal ideal $\mf{p} \subseteq A$. Therefore,
    we need to show that $B$ is a local ring.

            To see this, assume not. Suppose there exist two prime ideals
            $\mf{P}_1, \mf{P}_2 \subseteq B$ lying above $\mf{p}$. Let $\beta
            \in \mf{P}$ but $\beta \notin \mf{P}_2$. This implies that
            $A[\beta] \cap \mf{P}_1 \neq A[\beta] \cap \mf{P}_2$. Let $f(x) \in
            A[x]$ be the minimal polynomial of $\beta$. Then $\ol{f}(x) = f(x)
            \mod \mf{p} \in A/\mf{p}[x] = k[x]$ must satisfy $\ol{f}(x) =
            {h(x)}^m$ for an irreducible $h(x) \in k[x]$ (otherwise it has two
            distinct irreducible factors and Hensel tells us that the
            factorization can be lifted to $A[x]$). This implies that \[
            A[\beta] / \mf{p} A[\beta] = A[x]/(\mf{p}, f(x)) = k[x] /
        (\ol{f}(x)) = k[x]/(h(x))^m \] has a unique prime ideal, generated by
        $h(x)$, which contradicts our original assumption that $A[\beta] \cap
        \mf{P}_1, A[\beta] \cap \mf{P}_2$ were distinct prime ideals.  \item
        Now we show that $L$ is complete. Let $\qty{a_k}$ be a Cauchy sequence
        in $L$. Choose a $K$-basis $\qty{e_1, \ldots, e_n}$ of $L$ and write \[
        a_k = a_{1,k} e_1 + \cdots + a_{n,k} e_n \qquad a_{i,k} \in K. \] But
        then each sequence $\qty{a_{i,k}}_k$ forms a Cauchy sequence in $K$. By
        completeness of $K$, we can take $a_i \coloneqq \lim_{k \to \infty}
        a_{i.k} \in K$ and so we have \[ \lim_{k \to \infty} a_k = a_1 e_1 +
        \cdots + a_n e_n \in L, \] and thus $L$ is complete.  \item Let
        $\wt{L}$ be the Galois closure of $L/K$. Then we know that $\abs{-}_K$
        also extends uniquely to $\wt{L}$. For any $\sigma \in \Gal(\wt{L}/K)$,
        the map $L \in \beta \mapsto \abs{\sigma(\beta)}_{\wt{L}}$ is also an
        absolute value on $L$ extending $\abs{-}_K$. Therefore, by the
        uniqueness of the extension, we see that $\abs{\beta}_L =
        \abs{\sigma(\beta)}_{\wt{L}}$. This implies that \[
        \abs{N_{L/K}(\beta)}_K = \abs{N_{L/K}}_{\wt{L}} = \prod_{\sigma \colon
    L \to \wt{L}} \abs{\sigma(\beta)}_{\wt{L}} = \prod_{\sigma \colon L \to
    \wt{L}} \abs{\beta}_L = \abs{\beta}_L^n, \] as desired. \qedhere
    \end{enumerate} \end{proof}

\begin{cor} If $L/K$ is merely an algebraic and separable extension, then
$\abs{-}_K$ also extends uniquely to an absolute value on $L$, but $\abs{-}_L$
may fail to be discrete or complete.  \end{cor}

\begin{proof} Note that $L$ is the union of all of its finite subextensions.
\end{proof}

\begin{defn} Let $K$ be a complete discrete valued field and $L$ be a finite
    separable extension. Let $\mc{O}_K \subseteq K$ and $\mc{O}_L \subseteq L$
    be the valuation rings and $\mf{p} \subseteq \mc{O}_K, \mf{P} \subseteq
    \mf{O}_L$ be the maximal ideals. Next, let $k = \mc{O}_K/\mf{p}, \ell =
    \mf{O}_L / \mf{P}$ be the residue fields. 

    Define the \textit{ramification index} $e(L/K)$ to be the $e \geq 1$ such
that $\mf{p} \mc{O}_L = \mf{P}^e$. Next, define the \textit{residual degree}
$f(L/K)$ to be $f \geq 1$ such that $f = [\ell : k]$. Then $n = ef$.
\end{defn}

\begin{defn} The extension $L/K$ is called \begin{enumerate} \item
    \textit{Unramified} if $e(L/K) = 1$ (which implies $f(L/K) = n$ and $\mf{p}
    = \mf{P}$); \item \textit{Totally ramified} if $e(L/K) = n$ (which implies
    $\ell = k$ and $\mf{p} = \mf{P}^n$).  \end{enumerate} \end{defn}

\section{Unramified Extensions}% \label{sec:unramified_extensions}

We will study unramified extensions. Here, we will try to understand $L/K$ via
$\ell / k$.

\begin{prop} If $L/K$ is unramified, write $\ell = k(\alpha_0), \alpha_0 \in
\ell$. Then for any $\alpha \in \mc{O}_L$ such that $\ol{\alpha} = \alpha_0$ we
have $L = K(\alpha)$.  \end{prop}

\begin{proof} Let $f(x) \in \mc{O}_K[x]$ be the minimal polynomial of $\alpha$.
    Then $\deg \ol{f} = \deg f = [K(\alpha) : K] \leq [L:K]$. But then we know
    that $\deg \ol{f} \geq [k(\alpha_0) : k] = [\ell : k] = [L:K]$. But this
    implies that $\deg f = [L:K]$, so $K(\alpha) = L$.  \end{proof}

\begin{prop} If $L = K(\alpha)$ with minimal polynomial of $\alpha$ given by
$f(x)$ such that $\ol{f}(x)$ has no repeated roots over $\ol{k}$, then $L/K$ is
unramified.  \end{prop}

\begin{proof} If $f(x)$ is irreducible, then by Hensel's lemma, we have
    $\ol{f}(x) = h(x)^m$ where $h(x) \in k[x]$ is irreducible. But then because
    $\ol{f}(x)$ has no repeated roots, we see that $m = 1$. But then we see
    that $[\ell : k] = [L:K]$ and thus $L/K$ is unramified.  \end{proof}

\begin{prop}\leavevmode \begin{enumerate} \item Let $K \subset L \subset M$ be
    a tower of field extensions. Then $M/K$ is unramified if and only if $M/L$
    and $L/K$ are unramified.  \item Assume $k$ is perfect. If $L/K$ is
    unramified and $L'/K$ is finite, then $LL'/L'$ is unramified.  \item Assume
    $k$ is perfect. Then if $L/K$ and $L'/K$ are unramified, then $LL'/K$ is
    unramified.  \end{enumerate} \end{prop}

\begin{proof}\leavevmode \begin{enumerate} \item Note that $M/K$ is unramified
    if and only if $e(M/K) = 1$, which is equivalent to $e(M/L) = e(L/K) = 1$
    by multiplicativity of the ramification index.  \item Suppose $L/K$ is
    unramified. Then let $L = K(\alpha)$ and let $f(x) \in \mc{O}_K[x]$ be the
    minimal polynomial of $\alpha$. Then the reduction $\ol{f}(x) \in k[x]$ is
    irreducible and $\ell = k(\ol{\alpha})$. Because $k$ is perfect,
    $\ol{f}(x)$ has no repeated roots.

            Because $LL'/L' = L'(\alpha)/L'$, let $g(x) \in \mc{O}_{L'}[x]$ be
            the minimal polynomial of $\alpha$. Then $\ol{g}(x) \mid \ol{f}(x)$
            and thus $\ol{g}(x)$ has no repeated roots, so $LL'/L'$ is
            unramified.  \item Consider the tower $K \subseteq L' \subseteq
            LL'$. Because $L/K, L'/K$ are unramified, we know $LL'/L$ is
            unramified. This implies that $LL'/K$ is unramified. \qedhere
    \end{enumerate} \end{proof}

\begin{thm} Assume that $k$ is perfect. Then there is an inclusion-preserving
    bijection \[ \qty{L/K\ \text{finite unramified}} \xleftrightarrow{\simeq}
    \qty{\ell / k\ \text{finite}} \qquad L \mapsto \ell. \] Moreover, $L/K$ is
    Galois if and only if $\ell/k$ is Galois and $\Gal(L/K) \simeq
    \Gal(\ell/k)$ in this case.  \end{thm}

\begin{proof} We prove surjectivity. Let $\ell / k$ be a finite extension.
    Write $\ell = k(\alpha_0)$ and let $\ol{f}(x) = k[x]$ be the minimal
    polynomial of $\alpha_0$. Then any monic lift $f(x) \in \mc{O}_K[x]$ of
    $\ol{f}(x)$ has a root $\alpha$ such that $\ol{\alpha} = \alpha_0$ by
    Hensel's Lemma. Then $L = K(\alpha)$ has residue field $\ell =
    k(\alpha_0)$. Because $\ol{f}$ is irreducible and $k$ is perfect, we know
    $L/K$ is unramified.

    Now we will prove injectivity. Let $L/K, L'/K$ be unramified with the same
    residue field $\ell$. Then $LL'/K$ is also unramified with residue field
    $\ell$. But this implies that \[ [LL' : K] = [\ell : k] = [L : K] = [L' :
    K], \] so we must have $L = LL' = L'$.
    
    Now we will show the statements about Galois extensions. If $L/K$ is
Galois, then $\Gal(L/K)$ preserves $\mc{O}_L$ and $\mf{p}_L \subseteq \mc{O}_L$
and acts trivially on $\mc{O}_K$ and $\mf{p}_K \subseteq \mc{O}_K$. This
implies that any $\sigma \in \Gal(L/K)$ induces $\ol{\sigma} \in \Aut(\ell/k)$.
If $L = K(\alpha)$ and $\alpha_0 = \ol{\alpha}$, then $L/K$ is Galois if and
only if it contains $\alpha$, but this is equivalent to $\ell$ containing all
conjugates of $\alpha_0$, which is equivalent to $\ell/k$ being Galois. Then
the natural map $\Gal(L/K) \to \Gal(\ell / k)$ is an isomorphism because the
permutation on conjugates of $\alpha$ induces the same permutation on the
conjuages of $\alpha_0$.  \end{proof}

\begin{cor} If $L/K$ is an algebraic extension (possibly infinite), then there
exists a largest unramified subextension $K_0 / K$ of $L/K$. Moreover, $L/K_0$
is totally ramified.  \end{cor}

\begin{proof} Let $K_0$ be the compositum of all finite unramified
    subextensions of $L/K$. Then the residue field of $K_0$ is equal to the
    residue field of $L$ (otherwise, we can create an even larger unramified
    extension). This implies $L/K_0$ is totally ramified.  \end{proof}

\begin{cor} Assume $k = \F_q$. Then for all $n \geq 1$ there is a unique
unramified extension $L/K$ of degree $n$ and $\Gal(L/K) = \Gal(\F_{q^n} / \F_q)
\cong \Z/n\Z$.  \end{cor}

\begin{proof} There is a unique degree $n$ extension of $\F_q$.  \end{proof}

\begin{defn} Define the \textit{Frobenius element} $\sigma \in \Gal(L/K)$ when
    $k = \F_q$ to be the generator of $\Gal(L/K)$ corresponding to the
    Frobenius map under $\Gal(L/K) \xrightarrow{\simeq} \Gal(\F_{q^n} / \F_q)$.
    We will call this element $\mr{Frob}_{L/K}$, and $\mr{Frob}_{L/K}(\alpha)
    \equiv \alpha^q \pmod \mf{p}_L$ for all $\alpha \in \mc{O}_L$.  \end{defn}

\begin{cor} When $k = \F_q$, the maximal unramified extension of $K$ is \[
    K^{\mr{ur}} = \bigcup_{(n,q) = 0} K(\zeta_n). \] In particular, we have \[
\Q_p^{\mr{ur}} = \bigcup_{(n,p) = 1} \Q_p(\zeta_n). \] \end{cor}

\begin{proof} We know $\F_{q^n} = \F_q(\zeta_{q^n-1})$, so $\ol{\F}_q$ is given
by adjoining all coprime-to-$p$ roots of unity.  \end{proof}

\section{Totally Ramified Extensions}% \label{sec:totally_ramified_extensions}

\begin{defn} A polynomial $f(x) \in K[x]$ is \textit{Eisenstein} if \[ f(x) =
a_n x^n + \cdots + a_1 x + a_0 \] such that $\abs{a_n} = 1, \abs{a_i} < 1,
\abs{a_0} = \abs{\pi}$.  \end{defn}

\begin{exm} The polynomial $x^n - \pi$ is Eisenstein. Note that $K[x] / f(x) =
K(\sqrt[n]{\pi})$ is totally ramified.  \end{exm}

\begin{prop} A finite extension $L/K$ is totally ramified if and only if $L =
K(\alpha)$ where $\alpha$ is a root of an Eisenstein polynomial.  \end{prop}

\begin{proof} Let $\alpha$ be the root of an Eisenstein polynomial. Then
    $\abs{\alpha^n} = \prod_{\sigma \colon L \hookrightarrow \wt{L}}
    \abs{\sigma(\alpha)} = \abs{a_0} = \abs{\pi}$. Therefore $e(L/K) \geq n$
    and thus $L/K$ is totally ramified.

    Now suppose $L/K$ is totally ramified. Let $\alpha$ be a uniformizer of
    $L$. Therefore $(\alpha^n) = (\pi)$ and thus $\abs{\alpha}_L =
    \abs{\pi}_L^{1/n}$. Then $1, \alpha, \ldots, \alpha^{n-1}$ have absolute
    values representing different cosets in $\abs{L^{\times}} /
    \abs{K^{\times}}$. Thus the minimal polynomial of $\alpha$ has degree $n$.
    Moreover, if we write the minimal polynomial as

    \[ \alpha^n + a_{n-1} \alpha^{n-1} + \cdots + a_1 \alpha + a_0 = 0, \] then
    $\abs{\alpha}^n = \abs{a_0} = \abs{\pi}$ and $\abs{a_i} < 1$ so that the
    required cancellation happens. But this implies that $\alpha$ is a root of
    an Eisenstein polynomial.  \end{proof}

\begin{prop} Assume $k = \F_q$. Then there are only finitely many totally
ramified extensions of $K$.  \end{prop}

\begin{proof} Recall \textbf{Krasner's lemma}: Let $f(x) = \sum_{i=0}^n a_i
    x^i, g(x) = \sum_{i=0}^n b_i x^i \in K[x]$ and assume $\abs{a_i - b_i}$ is
    sufficiently small for all $i$. If $f(x)$ is irreducible, then so is
    $g(x)$, and \[ \qty{K(\alpha) \mid f(\alpha) = 0} = \qty{K(\beta) \colon
    g(\beta) = 0}. \] Therefore a totally ramified extension depends only on a
    small neighborhood of $(a_0, \ldots, a_{n-1})$ in the set \[ \qty{\abs{a_0}
    = \abs{\pi}} \times \qty{\abs{a_1} < 1} \times \cdots \times
\qty{\abs{a_{n-1}} < 1}, \] which is compact, so it can be covered by finitely
many such small neighborhoods.  \end{proof}

Recall that if $K$ is a complete discrete valued field with residue field $k =
\F_q$, there exists a unique unramified extension $L/K$ of degree $n$. Together
with the proposition, there exist finitely many totally unramified extensions
$L/K$ of degree $n$. This is of course false for number fields; for example,
$\Q$ has infinitely many quadratic extensions.

\begin{rmk} Krasner (1966) gave an explicit formula for the number of
    extensions of $p$-adic fields of degree $n$ and an algorithm to construct
    the set of generating polynomials of degree $n$. More desirable is a way to
    organize all these extensions, and local class field theory achieves this
    for abelian extensions of all local fields.  \end{rmk}

\begin{defn} A \textit{local field} is a valued field $K$ that is locally
compact under the topology induced by the absolute value.  \end{defn}

\begin{rmk} Recall that \begin{enumerate} \item A topological space is compact
    if and only if open cover has a finite subcover.  \item A topological space
    is locally compact if every point has compact neighborhood.  \item A metric
    space is compact if and only if it is complete and totally bounded.  \item
    A metric space is compact if and only if all closed balls are compact.
\item This tells us that local fields are always complete. To find a limit for
    a Cauchy sequence, everything is contained in a closed ball, which is
    complete and thus has a limit.  \end{enumerate} \end{rmk}

\begin{exm}\leavevmode \begin{enumerate} \item The easiest examples of local
fields are $\R, \C$.  \item If $K$ is archimedean and complete, then $K \simeq
\R$ or $\C$.  \end{enumerate} \end{exm}

\begin{lem} Let $K$ be a complete discrete valued field. Then $K$ is locally
compact if and only if the residue field $k$ is finite.  \end{lem}

\begin{proof} Let $K$ be locally compact. Then $\mc{O}_K = \qty{x \in K \mid
    \abs{x} \leq 1}$ is a closed ball. This means that $\mc{O}_K$ is compact.
    If we consider an open cover \[ \mc{O}_K = \bigcup_{x \in k} (x +
    \mf{p}_K), \] this has a finite subcover. But all of the $x + \mf{p}_K$ are
    disjoint, so $k$ is finite.

    Now suppose $k$ is finite. We show that every $x \in K$ has a compact
neighborhood. In particular, we will show that $x + \mc{O}_K$ is compact and
therefore that $\mc{O}_K$ is compact. To do this, we need to show that
$\mc{O}_K$ is totally bounded. Choose $r > 0$ and consider the open balls
$B_{a,r}$ give a cover of $\mc{O}_K$ as long as $a \in \mc{O}_K / \mf{p}_K^n$
and $n$ is sufficiently large. By finiteness of $k$, we know that $\mc{O}_K
/\mf{p}_K^n$ is finite, as desired.  \end{proof}

\begin{thm} Every local field is one of the following: \begin{enumerate} \item
$\R$ or $\C$; \item A finite extension of $\Q_p$; \item $\F_q((t))$ for a prime
power $q$.  \end{enumerate} \end{thm}

\begin{proof} Suppose $\operatorname{char} K = 0$. Then $\Q \subseteq K$. If
    $K$ is archimedean, then $K = \R$ or $\C$. Otherwise, $\Q_p \subseteq K$
    and by local compactness, $K/\Q_p$ must be finite.

    If $\operatorname{char} K = 0$, then $\F_p \subseteq K$. Let $k = \F_q$ be
    the residue field. Then \[ K = \qty{\sum_{n \geq k} a_n \pi^n \mid k \in
    \Z, a_n \in S = \mc{O}_K / \mf{p}_K}. \] By Hensel's lemma, we have
    $\F_q^{\times} \hookrightarrow K^{\times}$ and we thus have $\F_q \subseteq
    K$. Therefore $K \cong \F_q((\pi))$, as desired.  \end{proof}

\section{Statement of Local Class Field Theory}%
\label{cha:local_class_field_theory}

Recall that a field extension $L/K$ is \textit{abelian} if it is Galois and
$\Gal(L/K)$ is abelian.

\begin{exer} If $L_1/K, L_2/K$ are abelian, then $L_1 L_2 / K$ is also abelian.
\end{exer}

Define $K^{\mr{ab}}$ to be the maximal abelian extension of $K$. Equivalently,
this is the compositum of all finite extensions of $K$. Then $K^{\mr{ab}}/K$
has infinite degree, and classifying abelian extensions of $K$ is equivalent to
understanding $\Gal(K^{\mr{ab}}/K)$.

\begin{defn} Let $\Omega /K$ be a possible infinite extension. We call
    $\Omega/K$ \textit{Galois} if it is algebraic, separable, and normal.
    Equivalently, $\Omega$ is the union of all its finite Galois subextensions.
    In particular, we have \[ \Gal(\Omega/K) = \lim_{\substack{\longleftarrow
    \\ L/K \text{ finite Galois}}} \Gal(L/K) \] is an inverse limit of finite
    groups, known as a \textit{profinite} group. Then $\Gal(\Omega / K)$ has a
    \textit{profinite topology} with a basis of open neighborhoods of $1$ given
    by $\Gal(\Omega / L) \subseteq \Gal(\Omega / K)$ for finite subextensions
    $L/K$.  \end{defn}

\begin{exm} Consider $\Omega / K = \ol{F}_q / \F_q$. Then \[ \Gal(\ol{F}_q,
\F_q) = \lim_{\substack{\longleftarrow \\ n}} \Gal(\F_{q^n} / \F_q) =
\lim_{\substack{\longleftarrow \\ n}} \Z/n\Z \eqqcolon \wh{\Z}. \] The open
neighborhoods of $1$ are given by $\Gal(\ol{F}_q / \F_{q^n}) \cong n \wh{\Z}
\subseteq \wh{\Z}$.  \end{exm}

\begin{rmk} If $L/K$ is finite, then $\Gal(\Omega / L)$ is an open subgroup. In
    addition, $\Gal(\Omega / L)$ is also closed, so it is clopen.

    If $L/K$ is any extension, then \[ \Gal(\Omega / L) =
    \bigcap_{\substack{L_i \subseteq L \\ L_i/K \text{ finite}}} \Gal(\Omega /
L_i) \] is a closed subgroup.  \end{rmk}

\begin{thm}[Galois correspondence] Let $\Omega / K$ be Galois. Then there is a
    Galois correspondence \[ \qty{L/K \text{ subextension of }\Omega /K}
    \longleftrightarrow \qty{\text{closed subgroups of } \Gal(\Omega/K)}. \]
    Moreover, $L/K$ is Galois if and only if the corresponding closed subgroup
    $H \subseteq \Gal(\Omega /K)$ is normal.  \end{thm}

\begin{rmk} If $H \subseteq \Gal(\Omega /K)$ is not necessarily closed (for
    example, $\Z \subset \wh{\Z}$ is not closed and its closure is $\wh{\Z}$),
    then $\Omega^H$ corresponds to $\ol{H}$ under the Galois correspondence. In
    particular, $\Gal(K^{\mr{ab}}/K) = G/\ol{[G,G]} \eqqcolon G^{\mr{ab}}$,
    where $G = \Gal(\ol{K} / K)$.

    This gives us the slogan, that when $K$ is a local field,
$\Gal(K^{\mr{ab}}/K)$ can be understood in terms of $K^{\times}$.  \end{rmk}

\begin{thm}[Local Artin reciprocity] There exists a unique $\phi_K \colon
    K^{\times} \to \Gal(K^{\mr{ab}}/K)$ (local Artin reciprocity map) such that
    \begin{enumerate} \item For any finite abelian $L/K$, there is a
        commutative diagram \begin{equation*} \begin{tikzcd} K^{\times}
            \arrow{r}{\phi_K} \arrow[twoheadrightarrow]{d} &
            \Gal(K^{\mr{ab}}/K) \arrow[twoheadrightarrow]{d} \\ K^{\times} /
            N(L^{\times}) \arrow{r}{\sim}[swap]{\phi_{L/K}} & \Gal(L/K).
    \end{tikzcd} \end{equation*} \item For any finite unramified $L/K$ and
    uniformizer $\pi$ of $K$, we have $\phi_{L/K}(\pi) = \mr{Frob}_{L/K} \in
    \Gal(L/K)$.  \end{enumerate} \end{thm}

\section{Norm Subgroups}% \label{sec:norm_subgroups}

Let $K$ be a nonarchimedean local field.

\begin{defn} A subgroup of $K^{\times}$ is a \textit{norm subgroup} if it is of
the form $N(L^{\times})$ for some finite abelian extension $L/K$.  \end{defn}

\begin{prop} Assume local CFT I.  \begin{enumerate} \item $N(L_1^{\times}) \cap
    N(L_2^{\times}) = N({(L_1 L_2)}^{\times})$.  \item $N(L_1^{\times})
    \subseteq N(L_2^{\times})$ if and only if $L_1 \supseteq L_2$.  \item A
    subgroup of $K^{\times}$ containing a norm subgroup is also a norm
    subgroup.  \item $N(L_1^{\times}) N(L_2^{\times}) = N({(L_1 \cap
    L_2)}^{\times})$.  \end{enumerate} \end{prop}

\begin{proof} Recall that there exists a unique local Artin reciprocity map
    $K^{\times} \xrightarrow{\phi_K} \Gal(K^{\mr{ab}}/K)$.  \begin{enumerate}
        \item Note that if $K \subseteq L_2 \subseteq L_1$, then
            $N(L_1^{\times}) \subseteq N(L_2^{\times})$, so clearly for $L_1,
            L_2$, we see that $N({(L_1L_2)}^{\times}) \subseteq N(L_1^{\times})
            \cap N(L_2^{\times})$. Conversely, if $a \in N(L_1^{\times}) \cap
            N(L_2^{\times})$, then by local Artin reciprocity, we see that $a
            \in \ker \phi_{L_1/K} \cap \ker \phi_{L_2/K}$. But this means that
            $\eval{\phi_K(a)}_{L_1} = \eval{\phi_K(a)}_{L_2} = 1$, and thus
            $\eval{\phi_K(a)}_{L_1L_2} = 1$. But this implies that $a \in \ker
            \phi_{L_1L_2/K} = N({(L_1L_2)}^{\times})$.  \item One direction is
            obvious. Assume that $N(L_1^{\times}) \subseteq N(L_2^{\times})$.
            Therefore \[ N(L_1^{\times}) = N(L_1^{\times}) \cap N(L_2^{\times})
            = N({(L_1L_2)}^{\times}). \] However, we know that \[ [L_1L_2:K] =
        [K^{\times}:N({(L_1L_2)}^{\times})] = [K^{\times}:N(L_1^{\times})] =
    [L_1:K], \] which implies that $L_1 = L_1L_2$, so $L_1 \supseteq L_2$.
\item Assume $H \supseteq N(L^{\times})$. Let $M = L^{\phi_{L/K}(H) \subseteq
    \Gal(L/K)}$. Then by local Artin reciprocity, we have a commutative diagram
    \begin{equation*} \begin{tikzcd} H/N(L^{\times}) \arrow{r}{\simeq}
        \arrow[hookrightarrow]{d} & \Gal(L/M) \arrow[hookrightarrow]{d} \\
        K^{\times}/N(L^{\times}) \arrow{r}{\substack{\phi_{L/K}\\ \sim}}
        \arrow[twoheadrightarrow]{d} & \Gal(L/K) \arrow[twoheadrightarrow]{d}
        \\ K^{\times}/H = K^{\times/N(M^{\times})}
    \arrow{r}{\substack{\phi_{M/K}\\ \sim}} & \Gal(M/K).  \end{tikzcd}
\end{equation*} This tells us that $H = N(M^{\times})$ is also a norm subgroup.
\item Note that $L_1 \cap L_2$ is the largest subextension contained in both
    $L_1, L_2$. On the other hand, $N({(L_1\cap L_2)}^{\times})$ is the
    smallest subgroup containing both $N(L_1^{\times}), N(L_2^{\times})$, and
    the desired result follows. \qedhere \end{enumerate} \end{proof}

\begin{cor} The map $L \mapsto N(L^{\times})$ defines a bijection \[ \qty{L/K\
\text{finite abelian}} \longleftrightarrow \qty{\text{norm subgroups of }
K^{\times}}. \] \end{cor}

The idea of local Artin reciprocity was to understand extrinsic data about
extensions using intrinsic data about the group $K^{\times}$. However, the
notion of a norm subgroup still still extrinsic, so we want a more intrinsic
characterization of norm subgroups.

\begin{lem} Let $L/K$ be a finite extension. If $N(L^{\times})$ has finite
index in $K^{\times}$, it must be open.  \end{lem}

\begin{proof} Note that $N \colon L^{\times} \to K^{\times}$ is continuous and
    $\mc{O}_L^{\times}$ is compact. Then $N(\mc{O}_L^{\times}) \subseteq
    K^{\times}$ ic compact and hence closed. But then $\mc{O}_K^{\times} /
    N(\mc{O}_L^{\times}) \to K^{\times}/N(L^{\times})$, and thus
    $N(\mc{O}_L^{\times}) \subseteq \mc{O}_K^{\times}$ is open (and closed).
    But this implies that $N(\mc{O}_L^{\times}) \subseteq K^{\times}$ is open
    (because $\mc{O}_K^{\times} \subseteq K^{\times}$ is open), and thus
    $N(L^{\times})$ must be open.  \end{proof}

\begin{cor} If $L/K$ is finite abelian, then $N(L^{\times}) \subseteq
K^{\times}$ is a finite index open subgroup.  \end{cor}

\begin{thm}[Local CFT II: local existence] Every finite index open subgroup of
$K^{\times}$ is a norm subgroup.  \end{thm}

\begin{cor} We have a bijection \[ \qty{L/K\ \text{finite abelian}}
\longleftrightarrow \qty{\text{finite index open subgroups of } K^{\times}}. \]
\end{cor}

\begin{rmks}\leavevmode \begin{enumerate} \item This bijection also holds for
    archimedean local fields. For $K = \R$, the two extensions $\R, \C$
    correspond to $\R^{\times}, \R_{>0}$, while $\C$ is algebraically closed
    and $\C^{\times}$ is the only finite-index open subgroup of itself.  \item
    If $K$ is a finite extension of $\Q_p$, then any finite index subgroup of
    $K^{\times}$ is automatically open. However, this is not true for $K =
    \F_q((t))$. In fact, if $H \subseteq K^{\times}$ has finite index $n$, then
    ${(K^{\times})}^n \subseteq H$. Therefore, it suffices to show that
    ${(K^{\times})}^n$ is open. It is easy to see that ${(K^{\times})}^n
    \supseteq 1 + \mf{p}_K^m$ for some $m \gg 0$. Therefore the equation $x^n -
    a = 0$ has solutions in $K$ for $a \in 1 + \mf{p}_K^m$ by Hensel for $p
    \nmid n$ and a stronger version for $p \mid n$ (that does not always hold).
    \end{enumerate} \end{rmks}

Now we want a reformulation of local CFT using the norm topology.

\begin{defn} The \textit{norm topology} on $K^{\times}$ is given by declaring a
basis of open neighborhoods of $1$ to be the norm subgroups of $K^{\times}$,
which are the same as finite index open subgroups in the usual topology.
\end{defn}

\begin{exm} Note that $\mc{O}_K^{\times}$ is open under the usual topology, but
is not open under the norm topology.  \end{exm}

\begin{rmk} The norm topology has fewer open sets and is therefore coarses than
the usual topology.  \end{rmk}

\begin{defn} Define $\wh{K}^{\times}$ to be the completion of $K^{\times}$
    under the norm topology: \[ \wh{K}^{\times} \coloneqq \varprojlim_{L/K\
    \text{finite abelian}} K^{\times}/N(L^{\times}). \] Then the Artin
    reciprocity map induces an isomorphism $\wh{K}^{\times} \simeq
    \Gal(K^{\mr{ab}}/K)$.  \end{defn}

\begin{prop} We have an isomorphism $\wh{K}^{\times} \cong \mc{O}_K^{\times}
\times \wh{Z}$ as topological groups.  \end{prop}

\begin{proof} Choose a uniformizer $\pi$ of $K$. Then $K^{\times} \cong
    \mc{O}_K^{\times} \times \pi^{\Z}$. Then a basis of finite index open
    subgroups is given by $(q+\mf{p}_k^m) \times \pi^{n\Z}$ for some $m,n \geq
    1$. This implies that \[ \wh{K}^{\times} \cong \varprojlim_m
    \mc{O}_K^{\times} / (1+\mf{p}_K^m) \times \varprojlim_n \Z/n\Z =
\mc{O}_K^{\times} \times \wh{\Z}. \qedhere \] \end{proof}

\begin{cor} There is an isomorphism $\Gal(K^{\mr{ab}}/K) \cong
    \mc{O}_K^{\times} \times \wh{\Z}$ as topological groups for any choice of
    uniformizer $\pi$. Therefore, we have a decomposition $K^{\mr{ab}} =
    K_{\pi} \cdot K^{\mr{ur}}$, where $K_{\pi} = {(K^{\mr{ab}})}^{\phi_K(\pi)}$
    and $K^{\mr{ur}} = {(K^{\mr{ab}})}^{\phi_K(\mc{O}_K^{\times})}$ is the
    maximal unramified extension. This means that $K_{\pi}$ is the totally
    ramified part of $K^{\mr{ab}}$.  \end{cor}

\begin{rmk} More canonically, consider the short exact sequence \[ 0 \to
    \mc{O}_K^{\times} \to K^{\times} \to \Z \to 0. \] If we consider the
    profinite completion of this, we obtain an exact sequence \[ 0 \to
    \mc{O}_K^{\times} \to \wh{K}^{\times} \to \wh{\Z} \to 0. \] Because $\Z
\hookrightarrow \wh{\Z}$ is dense, so is $K^{\times} \hookrightarrow
\wh{K}^{\times}$.  \end{rmk}


Now, it remains to prove local class field theory. First, we will construct the
local Artin reciprocity map $\phi_K$ using Galois cohomology. After we prove
that $\phi_K$ has the desired property, we will prove the local existence
theorem by constructing enough norm subgroups using cyclic extensions.

\chapter{Group Cohomology}% \label{sec:group_cohomology}

\begin{defn} Let $G$ be a group. Then a \textit{$G$-module} is a (left) module
over the ring $\Z[G]$, or in other words, an abelian group with a linear (left)
$G$-action.  \end{defn}

\begin{exm} Let $L/K$ be a finite Galois extension of fields and $G =
\Gal(L/K)$. Then $M = L$ and $M = L^{\times}$ are both $G$-modules.  \end{exm}

\begin{exm} Any abelian group $M$ can be regarded as a $G$-module under the
trivial action.  \end{exm}

\begin{defn} A \textit{homomorphism of $G$-modules} $\alpha \colon M \to N$ is
a $G$-equivariant group homomorphism, or equivalently a morphism of
$\Z[G]$-modules. The set of such morphisms is denoted $\Hom_G(M,N)$.
\end{defn}

We will denote the category of $G$-modules with $G$-linear maps by
$\ms{Mod}_G$. Because $\ms{Mod}_G = \ms{Mod}_{\Z[G]}$, it is an abelian
category with enough injectives and projectives. This allows us to develop the
full theory of homological algebra in a concrete way.

\begin{defn} $M \in \Mod_G$ is \textit{injective} if the functor $\Hom_G(-,M)$
is exact. Dually, $M \in \Mod_G$ is \textit{projective} if $\Hom_G(M,-)$ is
exact.  \end{defn}

\begin{defn} An abelian category has \textit{enough injectives} if any object
can be embedded in an injective object. Similarly, an abelian category has
\textit{enough projectives} if any object has a surjection from a projective
object.  \end{defn}

\begin{exm} The free $\Z[G]$-module $M = \Z[G]$ is projective. In fact,
$\Hom_G(\Z[G], M) = M$.  \end{exm}

\section{Definition of Cohomology}% \label{sec:definition_of_cohomology}

\begin{defn} Let $M \in \Mod_G$. Define its \textit{$G$-invariants} by \[ M^G
\coloneqq \qty{ x \in M \mid gx = x\ \text{for all}\ g \in G } \subseteq M \]
to be the largest submodule with trivial $G$-action.  \end{defn}

\begin{exm} Let $G = \Gal(L/K)$. Then if $M = L$, Galois theory tells us that
$M^G = K$. Similarly, if $M = L^{\times}$, then $M^G = K^{\times}$.  \end{exm}

\begin{rmk} In other words, we have $M^G = \Hom_{\Z[G]}(\Z, M)$, where $\Z$ has
    the trivial action. This implies that the functor $M \mapsto M^G$ is always
    left-exact. Therefore, for a short exact sequence \[ 0 \to A \to B \to C,
    \] we have an exact sequence \[ 0 \to A^G \to B^G \to C^G. \] However, this
may fail to be right-exact.  \end{rmk}

We may resolve this failure of right-exactness by constructing the derived
functor of ${(-)}^G$. This will give us a long exact sequence.

\begin{defn} The \textit{group cohomology} $H^r(G, M)$ for any $r \geq 0$ is
    defined by be the functor $\Ext^r(G, M)$. This is the right derived functor
    of $\Hom_{\Z[G]}(\Z, M)$. It is characterized by \begin{enumerate} \item
        $H^0(G, M) = M^G$.  \item A short exact sequence $0 \to A \to B \to C
        \to 0$ induces a long exact sequence in group cohomology
        \begin{equation*} \begin{tikzcd} 0 \arrow{r} & A^G \ar{r} & B^G \ar{r}
        & C^G \ar[out=-20,in=160]{dll} \\ & H^1(G,A) \ar{r} & H^1(G,B) \ar{r} &
    H^1(C,G) \ar{r} & \cdots \end{tikzcd} \end{equation*} \item If $I \in
    \Mod_G$ is injective, then $H^r(G, I) = 0$ for all $r \geq 1$.
    \end{enumerate} \end{defn}

\begin{rmk} More concretely, we can compute $H^r(G, M)$ using an injective
    resolution of $M$. If we consider an injective resolution \[ 0 \to M \to
        I^0 \to I^1 \to I^2 \to \cdots, \] then we apply ${(-)}^G$ to obtain a
        complex \[ {(I^0)}^G \to {(I^1)}^G \to {(I^2)}^G \to \cdots \] and then
    we have $H^r(G, M) = H^r({(I^{\bullet})}^G)$.  \end{rmk}

\begin{rmk} We can also compute $H^r(G, M)$ using a projective resolution of
    $\Z$. If we consider a projective resolution \[ \cdots \to P_2 \to P_1 \to
        P_0 \to \Z \to 0, \] then we apply $\Hom_G(-,M)$ to this and obtain a
        complex \[ \Hom_G(P_0, M) \to \Hom_G(P_1, M) \to \Hom_G(P_2, M) \to
        \cdots \] and then $H^{\bullet}(G, M)$ is just the cohomology of this
    complex.  \end{rmk}

Now we will give a description of the cohomology in low degree. In particular,
what we will do is use an explicit free resolution of $\Z$.

\begin{defn} Define $P_r = \Z[\underbrace{G \times \cdots G}_{r+1}]$ where $G$
    acts on $P_r$ by \[ g \cdot (g_0, \ldots, g_r) = (gg_0, \ldots, gg_r). \]
    Note that $P_r$ is a free $\Z[G]$-module with basis $\qty{(1, g_1, \ldots,
    g_r)}$. Now we define the morphism $P_r \to P_{r-1}$ by \[ (g_0, \ldots,
    g_r) \mapsto \sum_{i=0}^r {(-1)}^i (g_0, \ldots, \wh{g}_i, \ldots, g_r). \]
\end{defn}

\begin{lem} The previous definition gives a free resolution of $\Z$ in
$\Mod_G$.  \end{lem}

\begin{defn} This is clearly a complex. To prove exactness, let \[ k_r \colon
P_r \to P_{r+1} \qquad (g_0, \ldots, g_r) \mapsto (1, g_0, \ldots, g_r). \]
Then we can check that $\dd_r \circ k_r + k_{r-1} \circ \dd_{r-1} = \mr{id}$.
Then taking the image of both sides of $\ker \dd_{r-1}$, we obtain $\dd_r \circ
k_r (\ker \dd_{r-1}) = \ker \dd_{r-1}$ and thus $\ker \dd_{r-1} \subseteq \Im
\dd_r$.  \end{defn}

\begin{cor} We can compute $H^r(G, M) = H^r(\Hom_G(P_{\bullet}, M))$.
\end{cor}

\begin{defn} We have an identification \[ \Hom_G(P_r, M) = \qty{\varphi \colon
G^{r+1} \to M \mid \varphi(g g_0, \ldots, g g_r) = g \varphi(g_0, \ldots,
g_r)}. \] These are called the \textit{homogeneous $r$-cochains of $G$ with
values in $M$} and are denoted by $\wt{C}^r(G, M)$. Then the differentials are
given by \[ \wt{C}^r(G,M) \xrightarrow{\wt{\dd}^r} \wt{C}^{r+1}(G,M) \qquad
(\wt{\dd}^r \varphi) (g_0, \ldots, g_{r+1}) = \sum_{i=0}^{r+1} {(-1)}^i \varphi
(g_0, \ldots, \wh{g}_i, \ldots, r+1). \] Then we have an explicit cochain
description \[ H^r(G, M) = \frac{\ker \wt{\dd}^r}{\Im \wt{\dd}^{r-1}} =
\frac{\qty{\text{homogeneous $r$-cocycles}}}{\qty{\text{homogeneous
$r$-coboundaries}}}. \] \end{defn}

Note that homogeneous $r$-cocycles $\varphi \colon G^{r+1} \to M$ are
determined by their values on elements of the form $(1, g_1, \ldots, g_r)$ for
$g_i \in G$, or equivalently on elements of the form $(1, g_1, g_1g_2, \ldots,
g_1 \cdots g_r)$. Therefore we may eliminate one degree of freedom. 

\begin{defn} Define the group of \textit{inhomogeneous $r$-cochains} to be the
    group \[ C^r(G, M) \coloneqq \qty{\varphi \colon G^r \to M\ \text{arbitrary
    function}}. \] Now we have an isomorphism $\wt{C}^r(G, M) \simeq C^r(G, M)$
    given by \[ \wt{\varphi} \mapsto \varphi(g_1, \ldots, g_r) \coloneqq
        \wt{\varphi}(1, g_1, g_1g_2, \ldots, g_1 \cdots g_r). \] The
        differentials $C^r(G, M) \xrightarrow{\dd^{r+1}} C^{r+1}(G, M)$ are
        given by \begin{align*} (\dd^r \varphi)(g_1, \ldots, g_{r+1}) &= g_1
            \varphi(g_2, g_3, \ldots, g_r) \\ &\ \ + \sum_{i=1}^r {(-1)}^i
        \varphi(g_1, g_2, \ldots, g_{i-1}, g_i g_{i+1}, g_{i+2}, \ldots, g_r)
                                           \\ &\ \ + {(-1)}^r \varphi(g_1, g_2,
                                       \ldots, g_r).  \end{align*} Now we can
                                       define the \textit{$r$-cocycles} $Z^r(G,
                                       M)$ and \textit{$r$-coboundaries}
                                       $B^r(G, M)$ and the corresponding
                                       cohomology groups $H^r(G, M)$.
        \end{defn}

\begin{exm} Suppose $r = 1$. Then we have \begin{align*} Z^1(G, M) &=
    \qty{\varphi \colon G \to M \mid \dd \varphi = 0} \\ &= \qty{\varphi \colon
    G \to M \mid g_1 \varphi(g_2) - \varphi(g_1g_2) + \varphi(g_1) = 0} \\ &=
    \qty{\varphi \colon G \to M \mid \varphi(g_1g_2) = g_1 \varphi(g_2) +
    \varphi(g_1)}.  \end{align*} Such functions are usually called
    \textit{crossed homomorphisms}. 

    On the other hand, we have \begin{align*} B^1(G, M) &= \qty{\dd^0 \varphi
        \mid \varphi \colon \qty{1} \to M} \\ &= \qty{(\dd^0\varphi)(g) = gm -
    m \mid m \in M} \\ &= \qty{\varphi \colon G \to M \mid \varphi(g) = gm - m\
\text{for some $m \in M$}}.  \end{align*} These functions are called
\textit{principal crossed homomorphisms}. Therefore, we have \[ H^1(G, M) =
\frac{\qty{\text{crossed homomorphisms}}}{\qty{\text{principal crossed
homomorphisms}}}. \] \end{exm}

\begin{exm} If $M$ acts trivially on $G$, then $Z^1(G, M) = \Hom_{\ms{Grp}}(G,
M)$ and $B^1(G, M)$ is trivial. Thus $H^1(G, M) = \Hom_{\ms{Grp}}(G, M)$.
\end{exm}

\begin{rmk} There is an explicit cochain description for $H^r(G, M)$, but
computing using this definition is extremely tedious. Instead, we will try to
break $G$ and $M$ into smaller pieces and then piece them back together.
\end{rmk}

\section{Change of Groups}% \label{sec:change_of_groups}

\begin{defn} Let $H \subseteq G$ be a subgroup and let $M \in \Mod_H$. Define
    the \textit{induced module} \[ \Ind_H^G M \coloneqq \Hom_{\Z[H]} (\Z[G], M)
    = \qty{\varphi \colon G \to M \mid \varphi(hg) = h \varphi(g)} \] with the
    action of $G$ given by \[ (g \varphi)(x) \coloneqq \varphi(xg). \]
\end{defn}

\begin{exm} For any $M \in \Mod_G$, we have $\Ind_G^G M = M$.  \end{exm}

\begin{defn} Let $M \in \Mod_G$. Then define the \textit{restriction} $\Res_H^G
M$ to be the same $M$ but viewed as an $H$-module.  \end{defn}

\begin{prop}\leavevmode \begin{enumerate} \item (Frobenius reciprocity) For any
    $M \in \Mod_G, N \in \Mod_H$, we have \[ \Hom_G(M, \Ind_H^G N) \cong
    \Hom_H(\Res_H^G M, N). \] \item The functor $\Ind_H^G$ is an exact functor.
\item The functor $\Ind_H^G$ preserves injections.  \end{enumerate} \end{prop}

\begin{proof}\leavevmode \begin{enumerate} \item We will construct explicit
    mutual inverses. We will define \begin{align*} \Hom_G(M, \Ind_H^G N)
    &\xleftrightarrow{\sim} \Hom_H(\Res_H^G M, N) \\ \alpha &\mapsto \beta(m)
    \coloneqq \alpha(m)(1_G) \\ \alpha(m)(g) \coloneqq \beta(gm) &\mapsfrom
\beta \end{align*} It is easy to check that these are inverse to each other.
\item Now we need to show that induction is right exact. Suppose $M
    \twoheadrightarrow N$ is a surjective map of $H$-modules. Now let $\varphi
    \in \Ind_H^G N$. Note that $\varphi$ is uniquely determined by its values
    on a complete set of representatives $s \in H \backslash G$. Then we lift
    $\varphi(s) \in N$ to $\wt{\varphi(s)} \in M$ using the surjection $M
    \twoheadrightarrow N$. Now define $\wt{\varphi}(hs) = h \wt{\varphi}(s)$
    for all $h \in H$, and now we obtain an element $\wt{\varphi} \in \Ind_H^G
    M$ mapping to $\varphi$.  \item Let $I \in \Mod_H$ be injective. Then
    $\Ind_H^G I$ is injective if and only if $\Hom_G(-, \Ind_H^G I)$ is exact.
    By Frobenius reciprocity, this is equivalent to exactness of
    $\Hom_H(\Res_H^G -, I)$, which is obvious. \qedhere \end{enumerate}
\end{proof}

\begin{prop}[Shapiro's lemma] Let $N \in \Mod_H$. Then $H^r(G, \Ind_H^G N)
\simeq H^r(H, N)$ for all $r \geq 0$.  \end{prop}

\begin{proof} Choose an injective resolution $N \to I^{\bullet}$ in $\Mod_H$.
    But then exactness of induction and preservation of injectives imply that
    $\Ind_H^G \to \Ind_H^G I^{\bullet}$ is an injective resolution in $\Mod_G$.
    But now we see that \[ H^r(G, \Ind_H^G N) = H^r(\Hom_G (\Z, \Ind_H^G
    I^{\bullet})) = H^r(\Hom_H(\Z, I^{\bullet})) = H^r(H, N). \qedhere \]
\end{proof}

\begin{defn} A module $M \in \Mod_G$ is called \textit{induced} if $M =
\Ind_1^G M_0$ for some abelian group $M_0$.  \end{defn}

\begin{cor} If $M$ is induced, then for all $r \geq 1$, $H^r(G, M) = 0$.
\end{cor}

\begin{proof} By Shapiro, this reduces to computing cohomology $H^r(1, M_0)$,
but then we know that $\Hom(\Z, -) = (-)$ is exact, so all higher derived
functors vanish.  \end{proof}

Now we will consider functorial properties of group cohomology with respect to
change of groups. Given $H \subseteq G$ and $M \in \Mod_G$, we will define
\begin{enumerate} \item The \textit{restriction} functor $\Res \colon H^r(G, M)
    \to H^r(H, M)$.  \item The \textit{corestriction} functor $\Cor \colon
    H^r(H, M) \to H^r(G, M)$ whenever $[G:H] < \infty$.  \item The
    \textit{inflation} functor $\Inf \colon H^r(G/H, M^H) \to H^r(G, M)$ when
    $H$ is a normal subgroup of $G$.  \end{enumerate}

Suppose we are given $\alpha \colon G' \to G$ and $\Mod_G \ni M
\xrightarrow{\beta} M' \in \Mod_{G'}$ that are compatible in the sense that \[
\beta(\alpha(g')m) = g' \beta (m) \] for all $g' \in G', m \in M$. Then we
obtain a morphism of cochain complexes \[ C^r(G, M) \to C^r(G', M') \qquad
(\varphi \colon G^r \to M) \to \beta \circ \varphi \circ \alpha^r \colon
{(G')}^r \to G^r \to M \to M'. \] This is compatible with the differentials, so
we obtain a morphism $H^r(G, M) \to H^r(G', M')$. Now using this generality, we
can define the three functors.

\begin{enumerate} \item (Restriction) We will set $\alpha \colon H
    \hookrightarrow G$ and $\beta \colon M \xrightarrow{\mr{id}} M$.  \item
    (Corestriction) We will set $\alpha \colon G \xrightarrow{\mr{id}} G$ and
    \[ \beta \colon \Ind_H^G M \to M \qquad \varphi \mapsto \sum_{g \in G/H} g
    \varphi(g^{-1}). \] This gives us the corestriction map by Shapiro.  \item
    (Inflation) We take $\alpha \colon G \twoheadrightarrow G/H$ and $\beta
    \colon M^H \hookrightarrow M$.  \end{enumerate}

\begin{rmk} Suppose $r = 0$. Then the functors are \begin{align*} \Res \colon
M^G &\hookrightarrow M^H \\ \Cor \colon M^H &\xrightarrow{N_{G/H}} M^G \\ m
    &\mapsto \sum_{g \in G/H} gm.  \end{align*} \end{rmk}

\begin{prop} The map $\Cor \circ \Res \colon H^r(G, M) \to H^r(H, M) \to H^r(G,
M)$ is given by multiplication by $[G:H]$.  \end{prop}

\begin{proof} Consider $M \to \Ind_H^G M \to M$. Then this map is given by \[ m
\mapsto \varphi(g) = gm \mapsto \sum_{g \in G/H} g \varphi(g^{-1}) = \sum_{g
\in G/H} m = [G:H]m. \qedhere \] \end{proof}

\begin{cor} If $G$ is finite, then $H^r(G, M)$ is killed by $\abs{G}$.
\end{cor}

\begin{proof} Take $H = 1$ and apply the previous proposition together with the
fact that all higher cohomology vanishes for $H = 1$.  \end{proof}

\begin{cor} If $G$ is finite and $M$ is a finitely generated abelian group,
then $H^r(G, M)$ is finite.  \end{cor}

\begin{proof} If $M$ is finitely generated, then so is $H^r(G, M)$ because the
cochain complex is finitely generated. But then $H^r(G, M)$ is torsion, so it
must be finite.  \end{proof}

\begin{thm}[Inflation-restriction exact sequence] There is an exact sequence \[
0 \to H^1(G/H, M^H) \xrightarrow{\Inf} H^1(G, M) \xrightarrow{\Res} H^1(H, M).
\] \end{thm}

\begin{proof} We will check this by hand.  \begin{description} \item[First map
    is injective:] Let $\varphi \in Z^1(G/H, M^H)$. Now assume that \[
    \Inf(\varphi) \colon G \twoheadrightarrow G/H \xrightarrow{\varphi} M^H
\hookrightarrow M \in Z^1(G, M)\]  is a coboundary. Thus there exists $m \in M$
such that $\Inf(\varphi) (g) = gm - m$ for all $g \in G$. But then
$\varphi(\ol{g}) = gm - m$, but then for all $h \in H$, we see that
$\varphi(\ol{h}) = hm-m = 0$ because $h$ fixes $M^H$. Therefore $\varphi$ is a
coboundary.  \item[Composition is zero:] Clearly we have $\Res \circ \Inf = 0$
because the composition \[ H \hookrightarrow G \twoheadrightarrow{G/H}
\xrightarrow{\varphi} M^H \hookrightarrow M \] is trivial because it passes
through $G/H$.  \item[Exactness on right:] Assume that $\Res(\varphi) \in
B^1(H, M)$. Then there exists $m \in M$ such that $\varphi(h) = hm - m$ for all
$h \in H$. Now define \[ \varphi' \in Z^1(G, M) \qquad \varphi'(g) \coloneqq
\varphi(g) - (gm-m). \] Now $\varphi', \varphi$ are cohomologous. We will now
write $\varphi'$ as an inflation. Because $\varphi'(h) = \varphi(h) - (hm-m) =
0$, we know that $\varphi'$ factors through $G/H$. Moreover, we see that
\begin{align*} \varphi'(hg) &= h \varphi'(g) + \varphi'(h) = h \varphi'(g) \\
&= \varphi'(gh') = g \varphi'(h') + \varphi'(g) = \varphi'(g).  \end{align*}
This implies that $\varphi'$ is valued in $M^H$, so it must have been an
inflation. \qedhere \end{description} \end{proof}

\begin{thm}[Inflation-restriction, general case] Let $r \geq 1$. Assume $H^i(H,
    M) = 0$ for all $1 \leq i < r$. Then we have an exact sequence \[ 0 \to
    H^r(G/H, M^H) \xrightarrow{\Inf} H^r(G, M) \xrightarrow{\Res} H^r(H, M). \]
\end{thm}

\begin{proof} We will proceed by induction on $r$ using a dimension-shifting
    argument. Consider the induced $G$-module $M_* = \Ind_1^G M$. Then look at
    the exact sequence \[ 0 \to M \to M_* \to M' \to 0, \] where we have the
    map $m \mapsto (g \mapsto gm)$. But then the higher cohomology of $M_*$
    vanishes, so we have isomorphisms $H^i(G, M') \simeq H^{i+1}(G, M)$ for all
    $i \geq 1$. But then $M_* = \Ind_H^G \Ind_1^H M$, so we have isomorphisms
    $H^i(H, M') \simeq H^{i+1}(H, M)$ for all $i \geq 1$. Similarly, because
    $H^1(H, M) = 0$, we have an exact sequence \[ 0 \to M^H \to H_*^H \to
    {(M')}^H \to 0, \] and therefore $M_*^H$ is also an induced $G/H$-module.
    Therefore $H^i(G/H, {(M')}^H) \simeq H^{i+1}(G/H, M^H)$ for all $i \geq 1$.

    Now, by assumption, we have $H^i(H, M) = 0$ for all $1 \leq i \leq r-1$.
    Therefore, $H^i(H, M') = 0$ for all $1 \leq i \leq r-2$ and now we can
    apply the inductive hypothesis to obtain an exact sequence \[ 0 \to
    H^{r-1}(G/H, {(M')}^H) \xrightarrow{\Inf} H^{r-1}(G, M') \xrightarrow{\Res}
H^{r-1}(H, M'). \] This implies that \[ 0 \to H^r(G/H, M^H) \xrightarrow{\Inf}
H^r(G, M') \xrightarrow{\Res} H^r(H, M) \] is also exact.  \end{proof}

\begin{rmk} We have a more general version of the dimension shift. Given an
    exact sequence \[ 0 \to M \to A^1 \to \cdots \to A^k \to N \to 0, \] where
each $A^i$ is induced, then $H^r(G, M) \simeq H^{r+1}(G, N)$ for all $r \geq
1$.  \end{rmk}

\begin{rmk} The inflation-restriction exact sequence is a special case of the
    \textit{Hochschild-Serre spectral sequence.} We have \[ E_2^{p,q} =
    H^p(G/H, H^q(H, M)) \Rightarrow H^{p+q}(G, M). \] In our case, only the
    rows $q = 0, q = r$ are nontrivial.  \end{rmk}

\section{Group Homology}% \label{sec:group_homology}

\begin{defn} Define the \textit{$G$-coinvariants} of $M$ by \[ M_G \coloneqq M
/ \ev{gm - m \mid g \in G, m \in M}. \] This is the largest quotient module of
$M$ where $G$ acts trivially.  \end{defn}

\begin{defn} The \textit{augmentation ideal} is defined to be \[ I_G \coloneqq
\ker (\Z[G] \xrightarrow{\ep} \Z) = \Z[g-1 \mid g \neq 1]. \] \end{defn}

Then we see that $M_G = M/I_G M = M \otimes_{\Z[G]} \Z[G]/I_G = M
\otimes_{\Z[G]} \Z$. In particular, the coinvariants functor is right-exact.
Applying the derived functor package, we obtain

\begin{defn} Define the \textit{group homology} by \[ H_r(G, M) \coloneqq
\Tor_r^{\Z[G]} (\Z, M) \] to be the left derived functor $\Tor_r^{\Z[G]}(\Z,
M)$ of $M \mapsto M_G$.  \end{defn}

\begin{rmks} Group homology is characterized by \begin{enumerate} \item $H_0(G,
    M) = M_G$; \item A short exact sequence $0 \to A \to B \to C \to 0$ in
    $\Mod_G$ gives a long exact sequence \begin{equation*} \begin{tikzcd}
        \cdots \arrow{r} & H_r(G, A) \ar{r} & H_r(G, B) \ar{r} & H_r(G, C)
        \ar[out=-20,in=160]{dll} \\ & H^{r-1}(G,A) \ar{r} & H^{r-1}(G,B) \ar{r}
                                    & H^{r-1}(C,G) \ar{r} & \cdots \end{tikzcd}
                            \end{equation*} \item If $P \in \Mod_G$ is
                    projective, then $H_r(G, P) = 0$ for all $r \geq 1$.
            \end{enumerate} \end{rmks}

\begin{rmk} Let $P_{\bullet} \to M$ be a projective resolution. Then $H_r(G, M)
= H^r({(P_{\bullet})}_G)$.  \end{rmk}

\begin{prop} For any $G$, we have $H_1(G, \Z) \simeq G^{\mr{ab}} = G/[G,G]$.
\end{prop}

\begin{proof} Consider the short exact sequence \[ 0 \to I_G \to \Z[G]
    \xrightarrow{\ep} \to \Z \to 0. \] This gives a long exact sequence \[
H_1(G, \Z[G]) \to H_1(G, \Z) \to H_0(G, I_G) \to H_0(G, \Z[G]) \to H_0(G, \Z)
\to 0. \] This becomes \[ 0 \to H_1(G, \Z) \to I_G / I_G^2 \to \Z
\xrightarrow{\sim} \Z \to 0. \] But this tells us that $H_1(G, \Z) \simeq I_G /
I_G^2$. Now define the map \[ G \to I_G / I_G^2 \qquad g \mapsto g-1. \] By the
identity \[ g_1 g_2 - 1 = (g_1 - 1) + (g_2 - 1) + (g_1 - 1)(g_2 - 1), \] we see
that this is a group homomorphism. Because $I_G/I_G^2$ is abelian, the group
homomorphism factors through $G^{\mr{ab}} \to I_G / I_G^2$. One can easily
check that have an inverse $I_G / I_G^2 \to G^{\mr{ab}}$ given by $g-1 \mapsto
g$.  \end{proof}

\begin{rmk} This gives a homological interpretation of ${\Gal(L/K)}^{\mr{ab}}$
as $H_1(\Gal(L/K), \Z)$.  \end{rmk}

\begin{rmk} This is analogous to the topological fact that if $X$ is
    path-connected, then $H_1(X, \Z) = {\pi_1(X)}^{\mr{ab}}$. In fact, for any
    group $G$, we can define a space $BG = K(G, 1)$ such that $\pi_1(BG) = G$
    and $\pi_i(BG) = 0$ for $i \neq 1$. We have $H_r(BG, \Z) = H_r(G, \Z)$,
    where the LHS is singular homology and the RHS is group homology. If we
    choose $r = 1$, we recover $H_1(G, \Z) = G^{\mr{ab}}$.  \end{rmk}

\begin{exm}\leavevmode \begin{enumerate} \item If $G = \Z$, then we have $B\Z =
\R / \Z = S^1$.  \item If $G = \underbrace{\Z * \Z * \cdots * \Z}_n$, then $BG
= \underbrace{S^1 \vee \cdots \vee S^1}_n$.  \end{enumerate} \end{exm}

\section{Tate Cohomology}% \label{sec:tate_cohomology}

The idea is that for a finite group $G$, we will patch both group cohomology
and group homology into a single theory.

\begin{defn} Let $G$ be a finite group and $M \in \Mod_G$. Define the
    \textit{norm map} \[ \Nm_G \colon M \to M \qquad m \mapsto \sum_{g \in G}
    gm. \] \end{defn}

By definition, the image of the norm map lies in the invariants and $\Nm_G (gm
- m) = 0$, so the kernel always contains $I_G M$. This gives us a commutative
diagram \begin{equation*} \begin{tikzcd} M \ar{r}{\Nm_G}
    \ar[twoheadrightarrow]{d} & M \\ M_G \ar{r}{\Nm_G} & M^G
    \ar[hookrightarrow]{u} \end{tikzcd} \end{equation*} and an exact sequence
    \[ 0 \to \frac{\ker \Nm_G}{I_G} \to M_G \xrightarrow{\Nm_G} M^G \to
    \frac{M^G}{\Im \Nm_G} \to 0. \] In particular, this gives us \[ 0 \to
\wh{H}^{-1}(G, M) \to H_0(G, M) \to H^0(G, M) \to \wh{H}^0(G, M) \to 0, \]
where $\wh{H}$ just means a modified version of cohomology.

\begin{defn} For $r \in \Z$, define the \textit{Tate cohomology groups} \[
    \wh{H}^r(G, M) \coloneqq \begin{cases} H^r(G, M) & r \geq 1 \\
    \frac{M^G}{\Im \Nm_G} & r = 0 \\ \frac{\ker \Nm_G}{I_G M} & r = -1 \\
H_{-(r+1)}(G, M) & r \leq -2.  \end{cases} \] \end{defn}

\begin{exm} Given a short exact sequence \[ 0 \to A \to B \to C \to 0 \] in
$\Mod_G$, we obtain a long exact sequence \begin{equation*} \begin{tikzcd}
    \cdots \ar{r} & H_1(G, C) \ar{d} \ar{r} & H_0(G, A) \ar{r} \ar{d}{\Nm_G} &
    H_0(G, B) \ar{r} \ar{d}{\Nm_G} & H_0(G, C) \ar{r} \ar{d}{\Nm_G} & 0 \ar{d}
    \\ & 0 \ar{r} & H^0(G, A) \ar{r} & H^0(G, B) \ar{r} & H^0(G, C) \ar{r} &
    H^1(G, A) \ar{r} & \cdots \end{tikzcd} \end{equation*} and by the snake
    lemma, these can be patched to form a very long exact sequence \[ \cdots
    \to \wh{H}^{-1}(G, C) \to \wh{H}^{-1}(G, A) \to \wh{H}^{-1}(G, B) \to
\wh{H}^{-1}(G, C) \to \wh{H}^0(G, A) \to \cdots \] \end{exm}

\begin{rmk}\leavevmode \begin{enumerate} \item If $M \in \Mod_G$ is induced,
    then $\wh{H}^r(G, M) = 0$ for all $r \in \Z$.  \item The dimension shift
    argument works for $\wh{H}^r$ in both directions. If $M \hookrightarrow
    \Ind_1^G M$, then $\wh{H}^r(M^1) = \wh{H}^{r+1}(M)$, where $M^1$ is the
    cokernel. Similarly, if $\Ind_1^G M \twoheadrightarrow M$, then
    $\wh{H}^r(M) = \wh{H}^{r+1}(M^1)$, where $M^1$ is the kernel.  \item
    Shapiro's lemma still holds for $\wh{H}^r$.  \item The property that
    $\Cor_H^G \circ \Res_H^G$ is multiplication by $[G:H]$ holds for
    $\wh{H}^r$.  \end{enumerate} \end{rmk}

\begin{rmk} Take $P_{\bullet} \to \Z$ to be a free resolution in $\Mod_G$.
    Taking the dual $M \mapsto M^* = \Hom_{\Z}(M, \Z)$ where $(g \varphi)(m) =
    \varphi(g^{-1}m)$. This gives a resolution $\Z \to P^{\bullet}$. If we take
    $P_{-n} \coloneqq P_{n-1}^*$, we obtain \[ \cdots \to P_2 \to P_1 \to P_1
    \to P_{-1} = P_0^* \to P_{-2} \to \cdots \] Then we can compute
$\wh{H}^r(G, M) = H^r(\Hom_G({(P_{\bullet})}, M))$.  \end{rmk}

Now we will compute Tate cohomology explicitly for finite cyclic groups $G =
\ev{\sigma}$. We can very explicitly write down the norm map, invariants, and
coinvariants: \begin{align*} \Nm_G(m) &= \sum_{g \in G} g m = (1 + \sigma +
    \sigma^2 + \cdots + \sigma^{n-1}) m \\ M^G &= M^{\sigma = 1} = \ker (\sigma
    - 1) \\ I_G M &= \Im (\sigma - 1) \\ M_G &= \coker (\sigma - 1).
    \end{align*} This implies that \begin{align*} \wh{H}^0(G, M) &=
    \frac{M^G}{\Im (\Nm_G)} = \frac{\ker (\sigma - 1)}{\Im (1 + \sigma + \cdots
    + \sigma^{n-1})} \\ \wh{H}^{-1}(G, M) &= \frac{\ker (\Nm_G)}{I_G M} =
\frac{\ker (1+ \sigma + \cdots + \sigma^{n-1})}{\Im (\sigma - 1)}.
\end{align*}

\begin{rmk} All remaining $\wh{H}^r(G, M)$ are determined by $\wh{H}^0,
\wh{H}^{-1}$.  \end{rmk}

\begin{thm}[Period $2$] Let $G = \ev{\sigma}$. Then we have isomorphisms
$\wh{H}^r(G, M) \simeq \wh{H}^{r+2}(G, M)$.  \end{thm}

\begin{proof} Note that we have a free resolution of $\Z$ in $\Mod_G$ given by
    \[ \cdots \to \Z[G] \xrightarrow{\sigma - 1} \Z[G] \xrightarrow{1 + \sigma
    + \cdots + \sigma^{n-1}} \Z[G] \xrightarrow{\sigma - 1} \Z[G]
\xrightarrow{\ep} \Z. \] This computes the Tate cohomology and has period $2$,
so the Tate cohomology also must have period $2$.  \end{proof}

\begin{defn} Define the \textit{Herbrand quotient} \[ h(M) \coloneqq
\frac{\abs{\wh{H}^0(G, M)}}{\abs{\wh{H}^1(G, M)}} \] if both $\wh{H}^0,
\wh{H}^1$ are finite.  \end{defn}

\begin{prop} If $0 \to A \to B \to C \to 0$ is an exact sequence, then $h(B) =
h(A) \cdot h(C)$.  \end{prop}

\begin{proof} Consider the long exact sequence \[ 0 \to K \to \wh{H^0}(G, A)
    \to \wh{H}^0(G, B) \to \wh{H}^-(G, C) \to \wh{H}^1(G, A) \to \wh{H}^1(G, B)
    \to \wh{H}^1(G, C) \to Q \to 0. \] This implies that \[ \abs{K} \cdot
\abs{\wh{H}^0(A)}^{-1} \cdot \abs{\wh{H}^0(B)} \cdot \abs{\wh{H}^0(C)}^{-1}
\cdot \abs{\wh{H}^1(A)} \cdot \abs{\wh{H}^1(B)}^{-1} \cdot \abs{\wh{H}^1(C)}
\cdot \abs{Q}^{-1} = 1. \] From this, we obtain \[ \frac{h(B)}{h(A)h(C)} =
\frac{\abs{Q}}{\abs{K}}, \] so it suffices to show that $\abs{Q} = \abs{K}$.
But here, we see that \[ Q = \coker (\wh{H}^1(B) \to \wh{H}^1(C)) = \coker
(\wh{H}^{-1}(B) \to \wh{H}^{-1}(C)) = K \] because Tate cohomology has period
$2$.  \end{proof}

\begin{prop} If $M$ is finite, then $h(M) = 1$.  \end{prop}

\begin{proof} Note that we have the exact sequence \[ 0 \to M^G \to M
    \xrightarrow{\sigma - 1} M \to M_G \to 0. \] This tells us that $\abs{M^G}
    = \abs{M_G}$. Next, we note that \[ 0 \to \wh{H}^{-1}(G, M) \to M_G
    \xrightarrow{\Nm_G} M^G \to \wh{H}^0(G, M) \to 0 \] is exact, so
$\abs{\wh{H}^{-1}(G, M)} = \abs{\wh{H}^0(G, M)}$.  \end{proof}

\begin{cor} If $\alpha \colon M \to N$ has finite kernel and cokernel, then
$h(M) = h(N)$.  \end{cor}

\begin{proof} Consider the exact sequence \[ 0 \to \ker \alpha \to M \to N \to
    \coker \alpha \to 0. \] This tells us that \[ h(\ker \alpha) \cdot { h(M)
}^{-1} \cdot h(N) \cdot { h(\coker \alpha) }^{-1} = 1. \] Because $\alpha$ has
finite kernel and cokernel, $h(\ker \alpha) = h(\coker \alpha) = 1$, so $h(M) =
h(N)$.  \end{proof}

Now we want to compute Tate cohomology for more general $G$.

\begin{thm} Let $G$ be a finite group. If for any subgroup $H \subseteq G$ we
have $H^1(H, M) = H^2(H, M) = 0$, then $\wh{H}^r(G, M) = 0$ for all $r \in \Z$.
\end{thm}

\begin{proof} If $G$ is cyclic, then it follows from the period $2$
    isomorphism. In the general case, if $G$ is solvable, we can induct on
    $\abs{G}$. If $H \triangleleft G$ is normal such that $G/H$ is cyclic. By
    the induction hypothesis, we know $\wh{H}^r(H, M) = 0$ for all $r \in \Z$.
    Applying inflation-restriction, we have an exact sequence \[ 0 \to H^r(G/H,
    M^H) \to H^r(G, M) \to H^r(H, M). \] By assumption, $H^r(G, M) = 0$ for $r
    = 1,2$. By exactness, we know $H^r(G/H, M^H) = 0$ for $r = 1,2$, so
    $\wh{H}^r(G/H, M^H) = 0$ for all $r \in \Z$ because $G/H$ is cyclic. By
    exactness and the inductive hypothesis, we know $\wh{H}^r(G, M) = 0$ for
    all $r \geq 1$. But now the hypotheses are invariant under dimension shift,
    so we obtain the desired result.

    Finally, if $G$ is an arbitrary finite group, reduce to the solvable case.
If we consider the Sylow subgroups $G_p \subseteq G$, we know $G_p$ is
solvable. Therefore $\wh{H}^r(G_p, M) = 0$ for all $r \in \Z$. By an exercise
from the homework, we see $\wh{H}^r(G, M) = 0$ for all $r \in \Z$.  \end{proof}

Unfortunately, $H^2$ generally does not vanish, but we can still gain insight
about the behavior of Tate cohomology in this case.

\begin{thm}[Tate] Let $G$ be a finite group. If for any subgroup $H \subseteq
G$ we have \begin{enumerate} \item $H^1(H, M) = 0$; \item $H^2(H, M) =
\Z/\abs{H} \Z$, \end{enumerate} then $\wh{H}^r(G, \Z) \simeq \wh{H}^{r+2}(G,
M)$ for all $r \in \Z$.
\end{thm}

\begin{exm} We will apply Tate's theorem to construct the local Artin map. Let
    $G = \Gal(L/K)$ and $M = L^{\times}$ and set $r = -2$. Then both conditions
    of the theorem are satisfied, and so \[ {\Gal(L/K)}^{\mr{ab}} = H_1(G, \Z)
    = \wh{H}^{-1}(G, \Z) \simeq \wh{H}^0(G, M) = M^G / \Im (Nm_G) = K^{\times}
/ N_{L/K}(L^{\times}). \] Now we have defined the inverse of the local Artin
map!  \end{exm}

\begin{rmk} Chao says that Tate was very brave to go from the object
$\wh{H}^0(G, M)$ that we want to understand to an object that did not exist at
the time!  \end{rmk}

Before we prove Tate's theorem, we will give an explicit description of $H^2(G,
M)$. Recall that \[ Z^2(G, M) = \qty{\varphi \colon G^2 \to M \mid g_1
\varphi(g_2, g_3) - \varphi(g_1g_2, g_3) + \varphi(g_1, g_2g_3) - \varphi(g_1,
g_2) = 0}. \] We also know that \[ B^2(G, M) = \qty{\varphi \colon G^2 \to M
\mid \varphi(g_1, g_2) = g_1 \psi(g_2) - \psi(g_1g_2) + \psi(g_1), \psi \colon
G \to M}. \] \begin{prop} The cohomology group $H^2(G, M) = \frac{Z^2(G,
M)}{B^2(G, M)}$ parameterizes extensions \[ 0 \to M \to E \to G \to 0 \] such
that the conjugation action of $E/M \cong G$ on $M$ agrees with the $G$-module
structure. Moreover, $0 \in H^2(G, M)$ corresponds to the split extension.
\end{prop}

\begin{proof} Given such an extension, choose a splitting of $E = G \times M$
    as \textbf{sets}. This gives us a section $s \colon E \to G$ Then for all
    $g_1, g_2 \in G$, we have $s(g_1) \cdot s(g_2) = \varphi(g_1,g_2)
    s(g_1g_2)$ for some $\varphi \colon G^2 \to M$.

    We check that $\varphi$ is actually a cocycle. To see this, note that \[
        (s(g_1) s(g_2))s(g_3) = s(g_1) (s(g_2) s(g_3)) \] by associativity,
        which gives us \[ ( \varphi(g_1,g_2) + \varphi(g_1g_2, g_3) )
        s(g_1g_2g_3) = (g_1 \varphi(g_2,g_3) + \varphi(g_1,g_2g_3))
    s(g_1g_2g_3), \] and therefore $\varphi$ is a cocycle. We can check that
any $\varphi$ gives such an extension together with a section $s$ and that
different choices of the section $s$ give coboundary relations.  \end{proof}

\begin{defn} For any $\varphi \in Z^2(G, M)$, define its \textit{splitting
    module} to be \[ M(\varphi) \coloneqq M \oplus \qty(\bigoplus_{g \neq 1} \Z
        X_g) \] with the action of $G$ given by \[ g_1 \cdot X_{g_2} \coloneqq
    X_{g_1g_2} - X_{g_1} + \varphi(g_1,g_2) \] for any choice of $g_1, g_2 \in
G$. By convention, we write $X_1 \coloneqq \varphi(1,1) \in M$.  \end{defn}

\begin{rmk} By construction, we have an exact sequence \[ 0 \to M \to
M(\varphi) \to I_G \to 0, \] where $X_g \mapsto g-1$.  \end{rmk}

\begin{lem} The image of $\varphi$ under $H^2(G, M) \to H^2(G, M(\varphi))$ is
$0$.  \end{lem}

\begin{proof} Note that $\varphi(g_1,g_2) = g_1 X_{g_2} - X_{g_1g_2} + X_{g_1}$
is the coboundary of $g \mapsto X_g$.  \end{proof}

\begin{rmk} The extension $E'$ associated to $\varphi$ \begin{equation*}
    \begin{tikzcd} 0 \ar{r} & M \ar{r} \ar{d} & E \ar{r} \ar{d} & G \ar{r}
    \ar[equals]{d} & 0 \\ 0 \ar{r} & M(\varphi) \ar{r} & E' \ar{r} & G \ar{r} &
0 \end{tikzcd} \end{equation*} of $M(\varphi)$ is a split extension.  \end{rmk}

\begin{proof}[Proof of Tate's theorem] There are two steps to the proof.
    \begin{enumerate} \item We know that $H^2(G, M) = \Z/\abs{G}\Z =
        \ev{\varphi}$ with splitting module $M(\varphi)$. We also know that
        $H^1(H, M) = 0$. We will show that $H^1(H, M(\varphi)) = 0$ and $H^2(H,
        M(\varphi)) = 0$. Consider the short exact sequence \[ 0 \to M \to
            M(\varphi) \to I_G \to 0. \] This gives a long exact sequence \[
        H^1(H, M) \to H^1(H, M(\varphi)) \to H^1(H, I_G) \to H^2(H, M) \to
    H^2(H, M(\varphi)) \to H^2(H, I_G). \] However, we know that $H^1(H_1, M) =
    0, H^1(H, I_G) = \Z/\abs{H} \Z$, and $H^2(H, I_G) = 0$. We also know that
    $H^2(H, M) \to H^2(H, M(\varphi))$ is the zero map (the restriction of
    $\varphi$ to $H^2(H, M)$ is a generator), so the map $H^1(H, I_G) \to
    H^2(H, M)$ must be an isomorphism and therefore $H^1(H, M(\varphi)) =
    H^2(H, M(\varphi)) = 0$.  \item Now we know that all Tate cohomology
    $\wh{H}^r(G, M(\varphi)) = 0$ for all $r \in \Z$. Now we use the four term
    exact sequence \[ 0 \to M \to M(\varphi) \to \Z[G] \xrightarrow{\ep} \Z \to
    0. \] Because $\wh{H}^r(G, M(\varphi)) = 0$ and $\wh{H}^r(G, \Z[G]) = 0$
    for all $r \in \Z$, By dimension shift, we have $\wh{H}^r(G, \Z) \cong
    \wh{H}^{r+2}(G, M)$. \qedhere \end{enumerate} \end{proof}

\begin{rmk} There is an alternative description of $\wh{H}^r(G, \Z) \simeq
    \wh{H}^{r+2}(G, M)$ as a cup product with some generator $\varphi \in
    H^2(G, M)$. Here, if $M, N \in \Mod_G$, we can consider the tensor product
    $M \otimes N$ as a $G$-module with the action $g(m \otimes n) = gm \otimes
    gn$.

    Now a \textit{cup product} is a family of $\Z$-bilinear maps \[ H^r(G, M)
        \otimes H^s(G, N) \to H^{r+s}(G, M \otimes N) \] given by the following
        properties: \begin{enumerate} \item The cup product is functorial in
            both $M, N$.  \item For $r = s = 0$, it is given by the natural map
            $M^G \otimes N^G \to {(M \otimes N)}^G$.  \item If $0 \to M' \to M
            \to M'' \to 0$ is a short exact sequence such that \[ 0 \to M'
            \otimes N \to M \otimes N \to M'' \otimes N \to 0 \] is also exact,
            then for all $m'' \in H^r(G, M'')$ and $n \in H^s(G, N)$, we have
            $\delta m'' \cup n = \delta (m'' \cup n) \in H^{r+s+1}(G, M'
            \otimes N)$.  \item If $0 \to N' \to N \to N'' \to 0$ is a short
            exact sequence such that \[ 0 \to M \otimes N' \to M \otimes N \to
            M \otimes N'' \to 0 \] is also exact, then for all $m \in H^r(G,
            M), n'' \in H^s(G, N'')$, we have $m \cup \delta n'' = {(-1)}^r
            \delta(m \cup n'')$.  \end{enumerate} The cup product exists and is
            unique. Given cocycles $\varphi, \psi$, we write \[ (\varphi \cup
            \psi) (g_1, \ldots, g_{r+s}) = \varphi(g_1, \ldots, g_r) \otimes
        g_1 \cdots g_r \psi(g_{r+1}, \ldots, g_{r+s}) \] and this is unique by
    dimension shift. If $G$ is finite, then the cup product extends to Tate
cohomology.  \end{rmk}

\chapter{Local Class Field Theory}% \label{cha:local_class_field_theory}

Now our goal is to understand $H^i(\Gal(L/K), L^{\times})$ for $i = 1,2$. This
will allow us to construct the local Artin reciprocity map.

\section{Vanishing of first cohomology}%
\label{sec:vanishing_of_first_cohomology}

This result was proved by Hilbert in 1894 Zahlbericht for cyclic extensions and
then by Noether for general extensions.

\begin{thm}[Hilbert Theorem 90] Let $L/K$ be a finite Galois extension of
    fields. Then \[ H^1(\Gal(L/K), L^{\times}) = 0. \] \end{thm}

\begin{rmk} Note that this applies to extensions of arbitrary fields, not just
local fields.  \end{rmk}

\begin{proof} Choose $\varphi \in Z^1 (\Gal(L/K), L^{\times})$. We want
    $\varphi(g) = \frac{gm}{m}$ for some $m \in L^{\times}$. For any $a \in
    L^{\times}$, construct \[ m \coloneqq \sum_{g \in \Gal(L/K)} \varphi(g)
    \cdot ga. \] Because $g \colon L^{\times} \to L^{\times}$ are distinct
    characters of $L^{\times}$ for $g \in G \coloneqq \Gal(L/K)$, we know that
    they are $L$-linearly independent, so the map \[ \sum_{g \in G} \varphi(g)
        \cdot g \] is not the zero map and thus there exists $a \in L^{\times}$
        such that $m \neq 0$. But now we compute \begin{align*} gm &= g \sum_{h
            \in G} \varphi(h) \cdot ha \\ &= \sum_{h \in G} g \varphi(h) \cdot
            gha \\ &= \sum_{h \in G} \frac{\varphi(gh)}{\varphi(g)} \cdot gha
                \\ &= \frac{1}{\varphi(g)} \sum_{h \in G} \varphi(gh) \cdot gha
                \\ &= \frac{1}{\varphi(g)} \sum_{h \in G} \varphi(h) \cdot ha
                \\ &= \frac{m}{\varphi(g)}, \end{align*} and thus $\varphi(g) =
            \frac{n}{gm} = \frac{gm^{-1}}{m^{-1}}$, so $\varphi \in B^1(G,
        L^{\times})$.  \end{proof}

\begin{exm} In the case where $L/K$ is a cyclic extension and $G =
    \ev{\sigma}$, then $\wh{H}^{-1}(G, L^{\times}) = H^1(G, L^{\times}) = 0$,
    and thus $\ker \Nm_G = \Im (\sigma - 1)$, which means that if $a \in
    L^{\times}$ satisfies $\Nm_{L/K}(a) = 1$, then $a = \frac{\sigma b}{b}$ for
    some $b \in L^{\times}$.  \end{exm}

\begin{exm} Let $L/K = \Q(i)/\Q$ be the simplest quadratic extension. Let $a =
    x+iy \in L^{\times}$ with $x,y = \Q$. Then we know $\Nm_{L/K}(a) = x^2 +
    y^2$. If $b = m + in \in L^{\times}$ for $m,n \in \Q$, we see that \[
    \frac{\sigma b}{b} = \frac{m-in}{m+in} = \frac{m^2-n^2}{m^2+n^2} +
\frac{2mn}{m^2+n^2} \cdot i. \] By Hilbert 90, if $x^2 + y^2 = 1$, then there
exist $m,n \in \Z$ such that \[ x = \frac{m^2 - n^2}{m^2 + n^2} \qquad y =
\frac{2mn}{m^2 + n^2}. \] In particular, this tells us how to classify all
Pythagorean triples.  \end{exm}

\begin{rmk} We may also consider infinite Galois extensions $L/K$, for example
    $L = K^{\mr{sep}}, K^{\mr{ab}}$. Then we know \[ \Gal(L/K) =
    \varprojlim_{\substack{L' \subseteq L \\ \text{$L'/K$ finite Galois}}}
\Gal(L'/K). \] This allows us to define \textit{continuous Galois cohomology}
\[ H^r_{\mr{cts}}(\Gal(L/K), L^{\times}) \coloneqq \varinjlim_{L'}
H^r(\Gal(L'/K), {(L')}^{\times}). \] The $H^r_{\mr{cts}}$ can be computed using
continuous cochains.  \end{rmk}

\begin{rmk} More generally, if $G = \varprojlim_{H} G/H$ is a profinite group
    and $M$ is a \textbf{discrete} $G$-module (which means $G \times M \to M$
    is continuous with respect to the profinite topology on $G$ and the
    discrete topology on $M$), we may consider the continuous group cohomology
    \[ H^r_{\mr{cts}}(G, M) \coloneqq \varinjlim_H H^r(G/H, M^H), \] where the
maps in the directed system are inflation.  \end{rmk}

\begin{notn} Let $G = \Gal(L/K)$. We will simply write \[ H^r(L/K, M) \coloneqq
H^r_{\mr{cts}}(\Gal(L/K), M) \qquad H^r(K, M) \coloneqq
H^r_{\mr{cts}}(\Gal(K^{\mr{sep}}/L), M) \] for the continuous Galois
cohomology.  \end{notn}

\begin{exm} Hilbert Theorem 90 implies that $H^1(K, {(K^{\mr{sep}})}^{\times})
= 0$. Equivalently, we have $H^1_{\text{\'et}}(\Spec K, \mathbb{G}_m) \cong
\Pic \Spec K = 0$. In other words, all line bundles on a point are trivial.
\end{exm}

\section{Second Cohomology}% \label{sec:second_cohomology}

Let $L/K$ be a finite unramified extension of local fields. Recall that \[ G =
\Gal(L/K) \simeq \Gal(\ell / k) = \ev{\Frob_{L/K}}, \] where $\ell/k$ is the
extension of residue fields. Our goal is to compute $H^2(L/K, L^{\times}) \cong
\Z/n\Z$, where $n = [L:K]$. The idea is to break $L^{\times}$ into pieces, so
choose a uniformizer $\pi_L$. Then we have $L^{\times} \cong \mc{O}_L^{\times}
\times \pi_L^{\Z}$. Because $L/K$ is unramified, we may choose $\pi_L = \pi_K
\in K^{\times}$. Therefore, as a Galois module, we have $L^{\times} \cong
\mc{O}_L^{\times} \oplus \Z$.

\begin{defn} Let $U_K = \mc{O}_K^{\times}$. Then write $U_K^{(i)} \coloneqq 1 +
    \mf{m}_K^i$ for all $i \geq 1$.  \end{defn} This gives us a natural
    filtration \[ U_K \supseteq U_K^{(i)} \supseteq U_K^{(2)} \supseteq
    U_K^{(3)} \supseteq \cdots \] with short exact sequences \[ 1 \to U_K^{(1)}
    \to U_K \to k^{\times} \to 1 \] and similarly \[ 1 \to U_K^{(i+1)} \to
U_K^{(i)} \to k \to 1 \] for $i \geq 1$.

\begin{lem} We have $\wh{H}^r(G, \ell^{\times}) = \wh{H}^r(G, \ell) = 0$ for
all $r \in \Z$.  \end{lem}

\begin{proof} By Hilbert Theorem 90, we know $H^1(G, \ell^{\times}) = 0$.
    Because $G$ is cyclic and $\ell^{\times}$ is finite, we can understand the
    Herbrand quotient. Therefore $h(\ell^{\times}) = 1$, so $H^2(G,
    \ell^{\times}) = 0$. Because $G$ is cyclic, we may apply period $2$ to
    obtain the desired result.

    Now we consider $\ell$. We know that $\ell$ is actually an induced module
by the homework, so all Tate cohomology vanishes by period $2$.  \end{proof}

\begin{cor} The norm map $\Nm_{\ell/k} \colon \ell^{\times} \to k^{\times}$ and
the trace map $\Tr_{\ell/k} \colon \ell \to k$ are surjective.  \end{cor}

\begin{proof} We know that $\wh{H}^0(G, \ell^{\times}) =
    \frac{k^{\times}}{\Nm_{\ell/k}(\ell^{\times})} = 0$, so the norm map is
    surjective. Similarly, we know $\wh{H}^0(G, \ell) =
    \frac{k}{\Tr_{\ell/k}(\ell)} = 0$, so the trace is surjective.  \end{proof}

\begin{lem} The norm map $\Nm_{L/K} \colon U_L \to U_K$ is surjective.
\end{lem}

\begin{proof} Consider the commutative diagram \begin{equation*} \begin{tikzcd}
U_L \ar{r}{\Nm} \ar{d} & U_K \ar{d} & U_L^{(i)} \ar{r}{\Nm} \ar{d} & U_K^{(i)}
\ar{d} \\ \ell^{\times} \ar{r}{\Nm} & k^{\times} & \ell \ar{r}{\Tr} & k.
\end{tikzcd} \end{equation*} Given any $a \in U_K$, we want $b \in U_L$ such
that $\Nm(b) = a$. Because $\Nm \colon \ell^{\times} \to k^{\times}$, we may
find $b_0 \in U_L$ such that $\Nm(b_0) \equiv a \pmod {\pi_K}$. Now let $a_1
\coloneqq \frac{a}{\Nm(b_0)} \in U_K^{(1)}$. Because $\Tr \colon \ell \to k$ is
surjective, we may find $b_1 \in U_L^{(1)}$ such that $a_2 \coloneqq
\frac{a_1}{\Nm(b_1)} \in U_K^{(2)}$. Repeating this to infinity, we can find
$b_i \in U_L^{(i)}$ such that $a_{i+1} \coloneqq \frac{a_i}{\Nm(b_i)} \in
U_K^{(i+1)}$. Setting \[ b \coloneqq \prod_{i=1}^{\infty} b_i, \] we know \[
\frac{a}{\Nm(b)} \in \bigcap_{i=0}^{\infty}U_K^{(i)} = \qty{1}, \] so $a =
\Nm(b)$.  \end{proof}

\begin{cor} For all $r \in \Z$, we have $\wh{H}^r(G, U_L) = 0$.  \end{cor}

\begin{proof} By the Lemma, we know that $\Nm \colon U_L \to U_K$ is
    surjective, so $\wh{H}^0(G, U_L) = 0$. But then we know $H^1(G, U_L)
    \subseteq H^1(G, L^{\times}) = 0$ is a direct factor, so $H^1(G, U_L) = 0$.
    The desired result is simply an application of period $2$.  \end{proof}

\begin{thm} If $L/K$ is an unramified extension, then $H^2(G, L^{\times}) \cong
\Hom(G, \Q/\Z) \cong \frac{1}{n} \Z / \Z$.  \end{thm}

\begin{proof} We know $H^2(G, L^{\times}) \cong H^2(G, U_L) \oplus H^2(G, \Z) =
H^2(G, \Z) = \Hom(G, \Q/\Z)$ by the homework. The final isomorphism is obvious.
\end{proof}

\begin{defn} Define the \textit{invariant map} \[ \mr{inv}_{L/K} \colon H^2(L
/K, L^{\times}) \simeq H^2(L/K, \Z) \simeq \Hom(G, \Q/\Z) \simeq \frac{1}{n} \Z
/ \Z \subseteq \Q/\Z. \] Taking the limit over all unramified extensions, we
obtain a map \[ H^2(K^{\mr{ur}}/K, {(K^{\mr{ur}})}^{\times}) \xrightarrow{\sim}
\bigcup_n \frac{1}{n} \Z / \Z = \Q/\Z. \] \end{defn}

To simplify our notation, we will write $H^2(L/K) \coloneqq H^2(L/K,
L^{\times})$, so we have \[ \mr{inv}_K \colon H^2(K^{\mr{ur}}/K) \simeq \Q/\Z.
\] Our goal now will be to extend this to $H^2(K^{\mr{sep}}/K) \simeq \Q/\Z$.

\begin{rmk} We always have an injective inflation map $H^2(K^{\mr{ur}}/K)
    \xrightarrow{\Inf} H^2(K^{\mr{sep}}/K)$. The map exists, and injectivity is
    by Hilbert 90 and inflation-restriction. We want to prove that this is
    indeed an isomorphism.  \end{rmk}

\begin{lem} Let $L/K$ be a finite extension of degree $n$. Then the diagram
    \begin{equation*} \begin{tikzcd} H^2(K^{\mr{ur}}/K) \ar{d}{\mr{inv}_K}
    \ar{r}{\Res} & H^2(L^{\mr{ur}}/L) \ar{d}{\mr{inv}_L} \\ \Q/\Z \ar{r}{\times
n} & \Q/\Z \end{tikzcd} \end{equation*} commutes.  \end{lem}

\begin{rmk} Because $L^{\mr{ur}} = L \cdot K^{\mr{ur}}$, we may view
    $\Gal(L^{\mr{ur}}/L)$ as a subgroup of $\Gal(K^{\mr{ur}}/K)$, and the
    inclusion is comparible with ${(K^{\mr{ur}})}^{\times} \to
    {(L^{\mr{ur}})}^{\times}$, so restriction makes sense.  \end{rmk}

\begin{proof} Recall that $\mr{inv}_K$ is computed by $H^2(K^{\mr{ur}}/K)
    \simeq H^2(K^{\mr{ur}}/K, \Z) \simeq H^1(K^{\mr{ur}}/K, \Q/\Z) \simeq
    \Q/\Z$. Now we need to see the effect of restriction on the groups on the
    right of the chain of isomorphisms. Note that if $e = e(L/K)$ and $f =
    f(L/K)$, then $\pi_L^e = \pi_K$, so the diagram \begin{equation*}
        \begin{tikzcd} {(K^{\mr{ur}})}^{\times} \ar{d} \ar{r}{\mr{ord}_K} & \Z
        \ar{d}{\times e} \\ {(L^{\mr{ur}})}^{\times} \ar{r}{\mr{ord}_L} & \Z
    \end{tikzcd} \end{equation*} commutes. Therefore, the maps on
    $H^2(K^{\mr{ur}}/K, \Z) \to H^2(L^{\mr{ur}}/L, \Z)$ are given by
    multiplication by $e$. Finally, for $\varphi \in H^1(K^{\mr{ur}}/K, \Q/\Z)
    = \Hom(\Gal(K^{\mr{ur}}/K), \Q/\Z)$, we see that $\varphi \mapsto
    \varphi(\Frob_K)$. Because $\Frob_L = \Frob_K^f$, we see that
    $\Res(\varphi)(\Frob_L) = f \varphi(\Frob_K)$. Therefore, the final map is
    simply $f \cdot e \cdot \Res = n \cdot \Res$.  \end{proof}

\begin{cor} Let $L/K$ be a finite Galois extension of degree $n$. Then
$H^2(L/K)$ contains a subgroup of $\frac{1}{n} \Z/\Z$.  \end{cor}

\begin{proof} By Hilbert 90 and inflation-restriction, we have a commutative
    diagram \begin{equation*} \begin{tikzcd} 0 \ar{r} & H^2(L/K) \ar{r}{\Inf} &
        H^2(K^{\mr{sep}}/K) \ar{r}{\Res} & H^2(L^{\mr{sep}}/L) \\ 0 \ar{r} &
        \frac{1}{n}\Z/\Z \ar{r} & H^2(K^{\mr{ur}}/K) \ar{r}{\Res}
        \ar[hookrightarrow]{u} & H^2(L^{\mr{ur}}/L) \ar[hookrightarrow]{u} \\ &
                               & \Q/\Z \ar{r}{\times n} \ar{u}{\cong} & \Q/\Z
                           \ar{u}{\cong}.  \end{tikzcd} \end{equation*}
                       Therefore, $\frac{1}{n}\Z/\Z$ injects into $H^2(L/K)$.
    \end{proof}

\begin{prop} We have $\abs{H^2(L/K)} = n$. In particular, $H^2(L/K) \cong
\frac{1}{n} \Z/\Z$.  \end{prop}

\begin{proof} We know this is true with $L/K$ is cyclic. We know $h(L^{\times})
    = n$ and $H^1(L/K) = 0$, so $\abs{H^2(L/K)} = n$. In general, we will
    reduce to the cyclic case because $L/K$ is always solvable (because $K$ is
    a local field). We will induct on $[L:K]$. Choose a tower of fields $K
    \subset K' \subset L$ such that $K'/K$ is cyclic. Applying
    inflation-restriction, we have an exact sequence \[ 0 \to H^2(K'/K)
    \xrightarrow{\Inf} H^2(L/K) \xrightarrow{\Res} H^2(L/K'). \] We know that
    $\abs{H^2(K'/K)} = [K':K]$ because it is cyclic. We also know that
    $\abs{H^2(L/K')} = [L:K']$ by the inductive hypothesis, so $\abs{H^2(L/K)}
    \leq [K':K] \cdot [L:K'] = [L:K] = n$. But we know that $H^2(L/K)$ contains
    a subgroup of order $n$, so $\abs{H^2(L/K)} = n$.  \end{proof}

\begin{cor} We have a commutative diagram \begin{equation*} \begin{tikzcd} 0
    \ar{r} & H^2(L/K) \ar{r}{\Inf} & H^2(K^{\mr{sep}}/K) \ar{r}{\Res} &
    H^2(L^{\mr{sep}}/L) \\ 0 \ar{r} & \frac{1}{n}\Z/\Z \ar[equal]{u} \ar{r} &
    H^2(K^{\mr{ur}}/K) \ar{r}{\Res} \ar[hookrightarrow]{u} &
    H^2(L^{\mr{ur}}/L). \ar[hookrightarrow]{u} \end{tikzcd} \end{equation*} In
particular, we may view $H^2(L/K) \xrightarrow{\Inf} H^2(K^{\mr{ur}}/K)$.
\end{cor}

\begin{thm} There is an isomorphism $H^2(K^{\mr{ur}}/K) \xrightarrow{\Inf}
H^2(K^{\mr{sep}}/K)$.  \end{thm}

\begin{proof} Recall that $H^2(L/K) \hookrightarrow H^2(K^{\mr{ur}}/K)
    \hookrightarrow H^2(K^{\mr{sep}}/K)$. Taking the limit over finite Galois
    extensions $L/K$, we have an injection $H^2(K^{\mr{sep}}/K) \hookrightarrow
    H^2(K^{\mr{ur}}/K) \hookrightarrow H^2(K^{\mr{sep}}/K)$, but the
    composition is the identity, so all inclusions are equalities.  \end{proof}

\begin{defn} We can extend the \textit{invariant map} to $\mr{inv}_K \colon
H^2(K^{\mr{sep}}/K) \simeq \Q/\Z$.  \end{defn}

\begin{rmk} For any field $K$, define the \textit{Brauer group} $\mr{Br}(K)
    \coloneqq H^2(K^{\mr{sep}}/K, {(K^{\mr{sep}})}^{\times})$. This is in fact
    $H^2_{\text{\'et}}(\Spec K, \mathbb{G}_m)$. The goal of local class field
    theory is to compute $\mr{Br}(K) \simeq \Q/\Z$ for a local field $K$.
\end{rmk}

\begin{rmk} Classically, the group $\mr{Br}(K)$ classifies \textit{central
    simple algebras} over $K$. In fact, it classifies central simple algebras
    up to the relation $A \sim B$ if and only if $A \otimes_K M_n(K) \simeq B
    \otimes M_m(K)$ for some $n, m$. The group structure is defined by $[A]
    \otimes [B] = [A \otimes_K B]$ with identity $0 = [M_n(k)]$.  \end{rmk}

\begin{thm}[Wedderburn] Each class of $\mr{Br}(K)$ is represented by a central
division algebra over $K$.  \end{thm}

\begin{exm} If $K$ is a local field, then we may define the invariant
    $\mr{inv}_K(B)$ for any central division algebra $B$ over $K$. If $B = K$,
    then $\mr{inv}_K(K) = 0$. Now if $B$ is the quaternion algebra over $K$, we
    have $\mr{inv}_K(B) = \frac{1}{2}$. In fact there is an explicit
    construction of a central division algebra associated to $\frac{1}{n}$ for
    every $n$. If $L/K$ is a quadratic extension, then \[ \mr{inv}_L(B
    \otimes_K L) = [L:K] \mr{inv}_K(B) = 2 \cdot \frac{1}{2} = 0 \in \Q/\Z, \]
so $B \otimes_K L = M_2(L)$.  \end{exm}

\begin{exm} Call the element $u_{L/K} \in H^2(L/K)$ with $\mr{inv}_K(u_{L/K}) =
\frac{1}{n}$ the \textit{fundamental class} of $L/K$.  \end{exm}

\begin{rmk} The local Artin reciprocity isomorphism $\wh{H}^{-2}(G, \Z) \to
\wh{H}^0(G, L^{\times})$ can be realized as the cup product by the fundamental
class $u_{L/K}$.  \end{rmk}

\section{Proof of Local Class Field Theory}%
\label{sec:proof_of_local_class_field_theory}

Our goal is to prove the following result:

\begin{thm}[Local class field theory]\leavevmode \begin{enumerate} \item (Local
    Artin reciprocity) There exists a unique homomorphism \[ \phi_K \colon
        K^{\times} \to {\Gal(K^{\mr{sep}}/K)}^{\mr{ab}} \] such that
        \begin{enumerate} \item For any finite Galois extension $L/K$, we have
            a commutative diagram \begin{equation*} \begin{tikzcd} K^{\times}
            \ar{d} \ar{r}{\phi_K} & {\Gal(K^{\mr{sep}}/K)}^{\mr{ab}} \ar{d} \\
        K^{\times}/\Nm(L^{\times}) \ar{r}{\phi_{L/K}}[swap]{\sim} &
    {\Gal(L/K)}^{\mr{ab}}.  \end{tikzcd} \end{equation*} \item For any finite
    unramified extension, $\phi_{L/K}(\pi) = \Frob_{L/K}$, where $\pi$ is an
    uniformizer of $K$.  \end{enumerate} \item (Local existence theorem) There
    is a bijection between norm subgroups of $K^{\times}$ and finite index open
    subgroups of $K^{\times}$. In addition, if $\operatorname{char} K = 0$,
    then the finite index open subgroups of $K^{\times}$ are precisely the
    finite index subgroups of $K^{\times}$.  \end{enumerate} \end{thm}

\subsection{Proof of local Artin reciprocity}%
\label{sub:proof_of_local_artin_reciprocity}

To construct $\phi_K$, we will use Tate's theorem. Recall that by Hilbert 90,
we have $H^1(L/K, L^{\times}) = 0$. We also computed $H^2(L/K, L^{\times}) =
\frac{1}{n} \Z/\Z$, where $n = [L:K]$. By Tate's theorem, we have an
isomorphism $\wh{H}^r(L/K, \Z) \simeq \wh{H}^{r+2}(L/K, L^{\times})$ for all $r
\in \Z$. We will specialize to the case where $r = -2$, and this gives us an
isomorphism \begin{equation*} \begin{tikzcd} \wh{H}^{-2}(L/K, \Z) \ar[equal]{d}
\ar{r}{\sim} & \wh{H}^0(L/K, L^{\times}) \ar[equal]{d} \\ {\Gal(L/K)}^{\mr{ab}}
\ar{r}{\sim} & K^{\times} / \Nm(L^{\times}).  \end{tikzcd} \end{equation*} Then
we define $\phi_{L/K}^{\mr{ab}} \xrightarrow{\sim} {\Gal(L/K)}^{\mr{ab}}$ to be
its inverse. Taking the limit over all finite Galois extensions $L/K$, we
obtain a map \[ \phi_K \colon K^{\times} \to {\Gal(K^{\mr{sep}}/K)}^{\mr{ab}}.
\] By construction, the property a) is satisfied.

To finish the proof, we need to check property b). Let $L/K$ be a finite
unramified extension. Our goal is to explicitly describe the shift by $2$
isomorphism produced by Tate's theorem. Recall that Tate's theorem comes from
$M = L^{\times}$ and $G = \Gal(L/K)$. Then we construct the splitting module
for some $\varphi \in H^2(G, M) = H^2(L/K, L^{\times}) = \frac{1}{n} \Z/\Z$ by
defining \[ M(\varphi) = M \oplus \bigoplus_{g \neq 1} X_g \qquad g_1 X_{g_2} =
X_{g_1g_2} - X_{g_1} + \varphi(g_1, g_2). \] Then we have short exact sequences
\[ 0 \to M \to M(\varphi)  \xrightarrow{X_g \mapsto g-1} I_g \to  0 \] and \[ 0
\to I_G \to \Z[G] \xrightarrow{g \mapsto 1} \Z \to 0. \] Now we need to trace
through the isomorphisms \begin{equation*} \begin{tikzcd} \wh{H}^{-2}(G, \Z)
    \ar{r}{\sim} \ar[equal]{d} & \wh{H}^{-1}(G, I_G) \ar{r}{\sim} \ar[equal]{d}
                               & \wh{H}^0(G, M) \ar[equal]{d} \\ G =
    \ev{\Frob_{L/K}} \ar{r}{\sim} & I_G/I_G^2 \ar{r}{\sim} &
    K^{\times}/\Nm(L^{\times}).  \end{tikzcd} \end{equation*} The first
    isomorphism is given by $\Frob_{L/K} \eqqcolon \sigma \mapsto \sigma - 1$.
    Therefore it remains to write down the connecting homomorphism
    $\wh{H}^{-1}(G, I_G) \to \wh{H}^0(G, M)$. This is described using the exact
    sequences \begin{equation*} \begin{tikzcd} & M_G \ar{r} \ar{d}{\Nm} &
    {M(\varphi)}_G \ar{r} \ar{d}{\Nm} & {(I_G)}_G = I_G/I_G^2 \ar{r}
\ar{d}{\Nm} & 0 \\ 0 \ar{r} & M^G \ar{r} & {M(\varphi)}^G \ar{r} & {(I_G)}^G
\end{tikzcd} \end{equation*} by lifting $(\sigma - 1) \in I_G/I_G^2$ to
${M(\varphi)}_G$ and then taking $\Nm$. This will automatically land in $M^G$.
An obvious list of $\sigma - 1$ to ${M(\varphi)}_G$ is $X_{\sigma}$, so we need
to compute $\Nm(X_{\sigma})$. Therefore we have \begin{align*} \Nm(X_{\sigma})
&= (1+ \sigma + \cdots + \sigma^{n-1}) X_{\sigma} \\ &= X_{\sigma} + \sigma
    X_{\sigma} + \cdots + \sigma^{n-1} X_{\sigma} \\ &= X_{\sigma} +
    (X_{\sigma^2}-X_{\sigma}+\varphi(\sigma, \sigma)) + \cdots +
    (X_{\sigma^n}-X_{\sigma^{n-1}}+\varphi(\sigma^{n-1}, \sigma)) \\ &=
    X_{\sigma^n} + \varphi(\sigma, \sigma) + \varphi(\sigma^2, \sigma) + \cdots
    + \varphi(\sigma^{n-1}, \sigma) \\ &= \varphi(1,1) + \varphi(\sigma,
    \sigma) + \varphi(\sigma^2, \sigma) + \cdots + \varphi(\sigma^{n-1},
    \sigma).  \end{align*} Now it remains to describe this explicitly for
    $\varphi \in H^2(G, M) = H^2(L/K, L^{\times}) = \frac{1}{n} \Z/\Z$.Recall
    that this comes from $H^2(L/K, L^{\times}) \xrightarrow{\sim} H^1(L/K,
    \Q/\Z) = \Hom(G, \Q/\Z)$ coming from the exact sequence \[ 0 \to \Z \to \Q
    \to \Z/\Q \to 0. \] Now if $f \in \Hom(G, \Q/\Z)$ such that $f(\sigma) =
    \frac{1}{n}$, then we can lift $f$ to $\wt{f} \in Z^1(G, \Q)$ and take
    $\dd{\wt{f}}$. This gives us $\wt{f}(\sigma^i) = \frac{i}{n} \in \Q$. If
    $\varphi = \dd{\wt{f}}$, then we have \begin{align*} \varphi(\sigma^i,
        \sigma^j) &= \sigma^i \wt{f}(\sigma^j)- \wt{f}(\sigma^{i+j}) +
        \wt{f}(\sigma^i) \\ &= \frac{j}{n} - \frac{(i+j) \mod n}{n} +
        \frac{i}{n} \\ &= \begin{cases} 0 & 0 \leq i+j \leq n-1 \\ 1 & i+j \geq
            n.  \end{cases} \end{align*} This gives us \begin{align*}
            \mr{ord}_K(\Nm(X_{\sigma})) &= \varphi(1,1) + \varphi(\sigma,
            \sigma) + \varphi(\sigma^2, \sigma) + \cdots +
            \varphi(\sigma^{n-1}, \sigma) \\ &= 0 + 0 + 0 + \cdots + 1 \\ &= 1
        \end{align*} and thus $\Nm(X_{\sigma}) = \pi \in
        K^{\times}/\Nm(L^{\times})$. \qed

\subsection{Proof of Local Existence}% \label{sub:proof_of_local_existence}

We will assume that $\operatorname{char} K = 0$. We will establish a bijection
\[ \qty{\text{norm subgroups of $K^{\times}$}}
\overset{1:1}{\longleftrightarrow} \qty{\text{finite index subgroups of
$K^{\times}$}}. \] Recall that any subgroup of $K^{\times}$ containing a norm
subgroup is also a norm subgroup. Also note that any finite index subgroup of
index $n$ contains ${(K^{\times})}^n$. Therefore it suffices to show that
${(K^{\times})}^n$ is a norm subgroup. Our goal is to study the $n$-th power
may using the \textit{Kummer sequence} \[ 1 \to \mu_n \to
{(K^{\mr{sep}})}^{\times} \xrightarrow{x \mapsto x^n} {(K^{\mr{sep}})}^{\times}
\to 1. \] This is an exact sequence in $\Mod_G$ for $G = \Gal(K^{\mr{sep}}/K)$,
so it induces a long exact sequence in cohomology \[ 0 \to \mu_n(K) \to
K^{\times} \xrightarrow{x \mapsto x^n} K^{\times} \to H^1(G, \mu_n) \to H^1(G,
{(K^{\mr{sep}})}^{\times}) = 0. \] This gives us the \textit{Kummer
isomorphism} $K^{\times}/{(K^{\times})}^n \cong H^1(G, \mu_n)$.
\begin{enumerate} \item In the simplest case, when $\mu_n \subseteq
    K^{\times}$, then the isomorphism becomes \[ K^{\times}/{(K^{\times})}^n
    \cong \Hom(G, \mu_n) \cong \Hom(\Gal(L/K), \mu_n), \] where $L/K$ is the
    maximal abelian extension of exponent $n$. Now the pairing \[
    K^{\times}/{(K^{\times})}^n \times \Gal(L/K) \to \mu_n \qquad (b, \sigma)
\mapsto \frac{\sigma(\sqrt[n]{b})}{\sqrt[n]{b}} \] is in fact a perfect
pairing. Therefore $\abs{K^{\times}/{(K^{\times})}^n} = \abs{\Gal(L/K)}$, so by
local Artin reciprocity, we have the map \[ \phi_{L/K} \colon
K^{\times}/\Nm(L^{\times}) \xrightarrow{\sim} \Gal(L/K). \] Also, we know
$\Nm(L^{\times}) \supseteq {(K^{\times})}^n$, and therefore ${(K^{\times})}^n =
\Nm(L^{\times})$.  \item In general, if $\mu_n$ is not contained in
$K^{\times}$, then take $K_1 = K(\mu_n)$. Now we can find $L_1/K_1$ such that
$\Nm(L_1^{\times}) = {(K_1^{\times})}^n$. Now take $L/K$ Galois such that $L_1
\subseteq L$. Then \begin{align*} \Nm_{L/K}(L^{\times}) &= \Nm_{K_1/K} (
\Nm_{L/K_1}(L^{\times}) ) \\ &\subseteq
\Nm_{K_1/K}(\Nm_{L_1/K_1}(L_1^{\times})) \\ &= \Nm_{K_1/K}({(K_1^{\times})}^n)
                                         \\ &\subseteq {(K^{\times})}^n.
                                         \end{align*} Therefore
                                         ${(K^{\times})}^n$ contains a norm
                                         subgroup, and is thus also a norm
                                         subgroup. \qed \end{enumerate}

\chapter{Global class field theory}% \label{cha:global_class_field_theory}

Recall that a number field $K$ is a finite extension of $\Q$. The goal of
global class field theory is to understand ${ \Gal(\ol{K}/K) }^{\mr{ab}}$, or
equivalently to understand finite abelian extensions of $K$ in terms of
\textbf{intrinsic} data associated to $K$. Analogously to the local case, we
would like to construct a \textit{global Artin reciprocity map} \[ \phi_K
\colon C_k \to {\Gal(\ol{K}/K)}^{\mr{ab}} \] which induces isomorphisms \[
\phi_{L/K} \colon C_k/\Nm(C_L) \xrightarrow{\sim} \Gal(L/K). \]

\begin{rmk} When $K$ is a local field, we took $C_K = K^{\times}$. When $K$ is
global, we can again try to take $C_K = K^{\times}$, but in fact this fails.
\end{rmk}

\begin{exm} Choose $L/K = \Q(i)/\Q$. Then $\Gal(L/K) = \Z/2$, but \[
\Q^{\times}/\Nm({\Q(i)}^{\times}) = \Q^{\times}/\qty{x \in \Q^{\times} \mid x =
a^2+b^2, a,b \in \Q} \neq \Z/2\Z. \] For example, any $p \equiv 3 \pmod 4$
cannot be written as $a^2+b^2$, and in fact the quotient is infinite.
\end{exm}

Instead of $K^{\times}$, we will take $C_K$ to be a generalization of the ideal
class group $\Cl_K$, which is the quotient of all fractional ideals by the
principal ones. Thus the class group measures the failure of unique
factorization in $K$.

\section{Id\`eles}% \label{sec:id`eles}

Our generalization of ideals will be the id\`ele class group of $K$, which is
again given by \[ C_K \coloneqq \frac{\mathbb{I}_K}{K^{\times}} \] for some
group $\I_K$. We need to define $\I_K$ and $\Nm_{L/K} \colon C_L \to C_K$.

\begin{notns} We will denote a (finite or infinite) place of $K$ by $v$ and
    $\abs{-}_v$ the absolute value associated to $v$ such that \[ \prod_v
    \abs{a}_v = 1 \] for all $a \in K^{\times}$. Then we will denote the
    completion of $K$ with respect to $\abs{-}_v$ by $K_v$. When $v$ is a
    finite place, we write $\mc{O}_V \subseteq K_V$ for the ring of integers,
    $\mf{p}_v \subseteq \mc{O}_K$ the corresponding maximal ideal, and
    $\wh{\mf{p}}_v \subseteq \mc{O}_v$ for the completion of the maximal ideal.
\end{notns}

\begin{rmk} We may attempt to take $\I_K = \prod_v K_v^{\times}$. The problem
is that this group is too large in the sense that it is not locally compact.
\end{rmk}

Instead of this, we will allow only finitely many coordinates to be not a unit
in $\mc{O}_v$. This will make our group locally compact.

\begin{defn} The group of \textit{id\`eles} (from the French \'el\'ement
    id\'eal for ideal element) is \[ \I_K \coloneqq \qty{{(a_v)}_v \in \prod_v
    K_v^{\times} \mid a_v \in \mc{O}_V^{\times} \text{ for all but finitely
    many }v}. \] This is the \textit{restricted product} of $\prod_v
    K_v^{\times}$ with respect to $\prod_v \mc{O}_V^{\times}$.  \end{defn}

\begin{rmk} The id\`eles are equipped with the restricted product topology with
    a basis of open neighborhoods given by \[ \prod_v U_v \subseteq \I_K, \]
    where $U_v$ is open in $K_v^{\times}$ for all $v$ and $U_v =
    \mc{O}_V^{\times}$ for all but finitely many $v$.  \end{rmk}

Let $S$ be a finite set of places containing $S_{\infty} = \qty{v\
\text{infinite}}$. Then define \[ \I_{K,S} \coloneqq \prod_{v \in S}
K_v^{\times} \times \prod_{v \notin S} \mc{O}_v^{\times} \subseteq \I_K. \]
Note the first factor is locally compact and the second product is compact, so
$\I_{K,S}$ is locally compact. Then we can write \[ \I_K = \bigcup_S \I_{K,S}
\] and each $\I_{K,S}$ is open in $\I_K$, so in particular $\I_K$ is locally
compact.

\begin{rmk} The group $\I_K$ has a basis of open neighborhoods of $1$ given by
    \[ U(S, \ep) \coloneqq \qty{(a_v) \in \I_K \mid \abs{a_v - 1} < \ep \text{
    for all } v \in S, \abs{a_v} = 1 \text{ for all } v \notin S}. \] \end{rmk}

\begin{rmk} For all places $v$, there is a natural injection \[ K_v^{\times}
\hookrightarrow \I_K \qquad a \mapsto (1, \ldots, 1, a, 1, \ldots), \] where
$a$ goes in the coordinaate corresponding to $v$. The induced topology on
$K_v^{\times}$ agrees with the usual topology.  \end{rmk}

\begin{rmk} If $I_K$ is the group of fractional ideals of $K$, then there is a
    natural surjection \[ \I_K \twoheadrightarrow I_K \qquad (a_v) \mapsto
        \prod_{v \nmid \infty} \mf{p}_v^{\mr{ord}_v(a_v)} \] with kernel given
        by \[ \prod_{v \mid \infty} K_v^{\times} \times \prod_{v \nmid \infty}
        \mc{O}_v^{\times} = \I_{K, S_{\infty}}. \] In particular, $\I_K$ can be
    thought of as an enlargement of $I_K$ with extra information from the
infinite places and units at finite places.  \end{rmk}

\begin{rmk} The group $\I_K$ is completely local.  \end{rmk}

\begin{prop} The natural map \[ K^{\times} \hookrightarrow \I_K \qquad a
\mapsto (a, a, \ldots, a, \ldots) \] has discrete image.  \end{prop}

\begin{proof} It suffices to show that $1 \in K^{\times}$ is open in its
    imaage. Equivalently, for some $S \supseteq S_{\infty}$ and some $\ep > 0$,
    we have $K^{\times} \cap U(s, \ep) = \qty{1}$. Let $a \in K^{\times} \cap
    U(S, \ep)$. Then $\abs{a-1}_v < \ep$ for all $v \in S$ and $\abs{a}_v = 1$
    for all $v \notin S$. Note that $\abs{a-1}_v \leq 1$ for all $v \notin S$.
    Therefore \[ \prod_v \abs{a-1}_v < \ep^{\abs{s}}. \] On the other hand, by
    the product formula, we know $\prod_v \abs{a-1}_v = 1$ unless $a-1 = 0$. In
    particular, for $S$ sufficiently large and $\ep$ sufficiently small, we
    must have $a = 1$.  \end{proof}

\begin{rmk} Note that $K^{\times} \hookrightarrow K_v^{\times}$ has dense image
    for any single $v$. However, the product formula implies that for $a \in
    K^{\times}$, its absolute values $\abs{a}_v$ at different places $v$
    ``repel'' each other and makes $K^{\times} \hookrightarrow \I_K$ have
    discrete image.  \end{rmk}

\begin{exm} Consider the ring $\Z[\sqrt{2}] \hookrightarrow \R$. Because
    $\sqrt{2}$ is irrational, this has dense image. However, the embedding \[
    \Z[\sqrt{2}] \hookrightarrow \R \times \R \qquad a+b\sqrt{2} \mapsto
(a+b\sqrt{2}, a-b\sqrt{2}) \] has discrete image. In fact, the image is a
lattice in $\R^2$.

    Similarly, $\Z\qty[\frac{1}{p}] \hookrightarrow \R, \Q_p$ both have dense
    image, but \[ \Z\qty[\frac{1}{p}] \hookrightarrow \R \times \Q_p \] has
    discrete image.

    Now it should not be surprising that $K^{\times} \hookrightarrow \I_K$ has
discrete image. This is simply an infinite dimensional generalization of this
phenomenon.  \end{exm}

\begin{defn} Define the \textit{id\`ele class group} $C_k \coloneqq \I_K /
K^{\times}$ and equip it with the quotient topology. Because $K^{\times}$ is
discrete, this group is locally compact.  \end{defn}

\begin{rmk} The $\I_K \twoheadrightarrow I_K$ descends to $C_K
\twoheadrightarrow \Cl_K$. In particular, $C_K$ can be viewed as an enlargement
of $\Cl_K$.  \end{rmk}

\begin{defn} Let $L/K$ be a finite extension. Recall that \[ L \otimes_K K_v
\cong \prod_{w \mid v} L_w, \] given $K_v[x]/f(x) = \prod (K_v[x]/f_i(x))$,
where $f_i$ are the irreducible factors of $f$ after the extension. Therefore,
for all $\alpha \in L^{\times}$, we have \[ \Nm_{L/K}(\alpha) = \prod_{w \mid
    v} \Nm_{L_w/K_v} (\alpha). \] Now we can define \[ \Nm_{L/K} \colon \I_L
\to \I_L \qquad {(a_w)}_w \mapsto {(b_v)}_v \qquad b_v \coloneqq \prod_{w \mid
v} \Nm_{L_w/K_v}(a_w). \] \end{defn}

\begin{defn} By definition, we have a commutative diagram \begin{equation*}
    \begin{tikzcd} \I_L \ar{r}{\Nm_{L/K}} & \I_K \\ L^{\times}
    \ar[hookrightarrow]{u} \ar{r}{\Nm_{L/K}} & L^{\times}.
\ar[hookrightarrow]{u} \end{tikzcd} \end{equation*} Therefore, we have an
induced map $\Nm_{L/K} \colon C_L \to C_K$.  \end{defn}

\section{Statement of global class field theory}%
\label{sec:statement_of_global_class_field_theory}

Our goal is now to construct the global Artin reciprocity map. We hope to do
this using the local Artin reciprocity maps. First, we recall some properties
from algebraic number theory.\footnote{The note taker does not actually know
any number theory. Please send help.} If $L/K$ is a finite Galois extension of
number fields, $v$ a place of $K$, and $w \mid v$ a place of $L$ above $v$, we
can define the \textit{decomposition group} \[ D(w) \coloneqq \qty{\sigma \in
\Gal(L/K) \mid \sigma w = w} = \Gal(L_w/K_v). \]

\begin{rmk} Suppose that $w' \mid v$ is another place of $L$ above $v$. Then
    $D(w), D(w')$ are conjugate in $\Gal(L/K)$. In particular, if $\Gal(L/K)$
    is abelian, then $D(w) = D(w')$ only depends on $v$. By local class field
    theory, we obtain \[ \phi_v \colon K_v^{\times} \to \Gal(L_w/K_v) = D(w)
    \hookrightarrow \Gal(L/K) \] which only depends on $v$.  \end{rmk}

\begin{prop} There exists a unique continuous homomorphism \[ \phi_K \colon
    \I_K \to {\Gal(\ol{K}/K)}^{\mr{ab}} \] such that for any finite abelian
    extension $L/K$ and any place $v$ of $K$, the diagram \begin{equation*}
        \begin{tikzcd} \I_K \ar{r}{\phi_{L/K}} & \Gal(L/K) \\ K_v^{\times}
        \ar{r}{\phi_v} \ar[hookrightarrow]{u} & \Gal(L_w/K_v)
    \ar[hookrightarrow]{u} \end{tikzcd} \end{equation*} commutes.  \end{prop}

\begin{proof} Let $a = (a_v) \in \I_K$. If $a_v \in \mc{O}_v^{\times}$ and
    $L_w/K_v$ is unramified (true for all but finitely many places), then
    $\phi_v(a_v) = 1 \in \Gal(L_w/K_v)$. Now $\phi_K$ is uniquely determined by
    a finite product \[ \phi_K((a_v)) = \prod_v \phi_v(a_v) \in \Gal(L/K), \]
    where $v$ runs over the places where $a_v \notin \mc{O}_v^{\times}$ or
    $L_v/K_v$ is ramified. Therefore, varying $L/K$ and taking a limit, this
    determines $\phi_K$ uniquely. 

    Now it remains to check that $\phi_K$ is continuous. In particular, we need
    the kernel to be open. Let $S$ be the set of ramified places of $L/K$. Then
    by local class field theory, the diagram \begin{equation*} \begin{tikzcd}
        \I_{K,S} \ar{r}{\phi_{L/K}} & \Gal(L/K) \\ \I_{L,S} \ar{u}{\Nm_{L/K}}
    \ar{r}{\phi_{L/L}} & \Gal(L/L) \ar{u} \end{tikzcd} \end{equation*}
    commutes. Therefore $\ker(\phi_{L/K}) \supseteq \Nm_{L/K} (\I_{L,S})$,
    which is open. Therefore the kernel itself is also open.  \end{proof}

\begin{thm}[Global class field theory]\leavevmode \begin{enumerate} \item
    (Global Artin reciprocity) The homomorphism $\phi_K \colon \I_K \to
    \Gal(K^{\mr{ab}}/K)$ satisfies \begin{enumerate} \item $\phi_K(K^{\times})
        = 1$. Therefore we obtain a global Artin map $\phi_K \colon C_k \to
        \Gal(K^{\mr{ab}}/K)$.  \item For any finite abelian extension $L/K$,
    $\phi_K$ induces an isomorphism \[ \phi_{L/K} \colon C_k/\Nm(C_L) \simeq
\Gal(L/K). \] \end{enumerate} \item (Global existence theorem) For any finite
index open subgroup $N \subseteq C_K$, there exists a finite abelian extension
$L/K$ such that $N = \Nm(C_L)$.  \end{enumerate} \end{thm}

\begin{cor} We have a bijection between finite abelian extensions $L/K$ and
finite index open subgroups of $C_K$.  \end{cor}

Before we turn to the proof of global class field theory, we will describe some
consequences of this bijection. We will begin with ray class fields.

\begin{defn} A \textit{modulus} of $K$ is a function \[ \mf{m} \colon
    \qty{\text{places of $K$}} \to \Z_{\geq 0} \] such that \begin{enumerate}
    \item $\mf{m}(v) = 0$ for all but finitely many places $v$.  \item
        $\mf{m}(v) = 0,1$ if $v$ is a real place.  \item $\mf{m}(v) = 0$ if $v$
is a complex place.  \end{enumerate} \end{defn}


\begin{defn} For a modulus $\mf{m}$, define the \textit{principal congruence
    subgroup} \[ \I_K^m \coloneqq \prod_{v \nmid \infty} U_{v, \mf{m}(v)}
    \times \prod_{v \mid \infty} K_{v, \mf{m}(v)}^{\times}, \] where $U_{v,0} =
    \mc{O}_v^{\times}$ and $U_{v,i} = 1 + \mf{p}_v^i$ for $i \geq 1$ for finite
    places. For infinite places, we have $K_{v,0}^{\times} = K_v^{\times}$, and
    $K_{v,1}^{\times} = \R_{>0}$.  \end{defn}

\begin{defn} For a modulus $\mf{m}$, define \[ C_k^{ \mf{m} } \coloneqq
    \frac{\I_K^{ \mf{m} } \cdot K^{\times}}{K^{\times}}. \] Then define the
    \textit{ray class group} to be \[ \Cl_{\mf{m}} \coloneqq C_K / C_K^m. \]
\end{defn}

Here, the term ``ray'' comes from a positivity condition $\R_{>0} \subset
\R^{\times}$ at real places, which geometrically means specifying a ray.

\begin{defn} Write $\mf{m} = \prod_v \mf{p}_v^{\mf{m}(v)} = \mf{m}_0 \cdot
    \mf{m}_{\infty}$. Then we have a description \[ \Cl_{\mf{m}} \coloneqq
    \frac{ \qty{\text{fractional ideals coprime to $\mf{m}_0$}} }{\qty{x \in
K^{\times}, x \in U_{v, \mf{m}(v)} (v \mid \mf{m}_0), x \in \R_{v,>0} (v \mid
\mf{m}_{\infty})}}. \] In particular, if $\mf{m}(v) \equiv 0$, then $\mf{m} =
\prod_v \mf{p}_v^0 = 1$ and $\Cl_1 = \Cl_K$. On the other hand, if $\mf{m} =
\mf{m}_{\infty}$, then \[ \Cl_{\mf{m}_{\infty}} = \frac{\qty{\text{fractional
ideals}}}{\qty{x \in K^{\times} \mid x\ \text{totally positive}}} = \Cl_K^+. \]
This is called the \textit{narrow class group}.  \end{defn}

\begin{defn} The abelian extension $L/K$ associated to $\Cl_{ \mf{m} } \cong
    \Gal(L/K)$ under global class field theory is called the \textit{ray class
    field of $\mf{m}$}. The case of $\mf{m}=1$ is called the \textit{Hilbert
class field} and is denoted by $H$ with $\Cl_K = \Gal(H/K)$. The case where
$\mf{m} = \mf{m}_{\infty}$ gives us the \textit{narrow Hilbert class field} and
is denoted by $H^+$. This is characterized by $\Cl_K^+ = \Gal(H^+/K)$. In
particular, $H \subseteq H^+$.  \end{defn}

\begin{rmk} By local class field theory, the ramified places of the ray class
    field of $m$ is contained in $\mf{m}$. In particular, $H/K$ is the maximal
    abelian abelian extension unramified everywhere, and $H^+/K$ is the maximal
    abelian extension unramified at all finite places.  \end{rmk}

\begin{exm} If $K = \Q$, then $\Cl_K = \Cl_L^+ \cong \qty{1}$ and thus $H = H^+
= \Q$.  \end{exm}

\begin{exm} If $K = \Q(\sqrt{3})$, then $\Cl_K = \qty{1}$. However, we have \[
\Cl_K^+ = \frac{K^{\times}}{K_{>0}^{\times} \cdot \mc{O}_K^{\times}} = \Z/2. \]
Therefore $H = K = \Q(\sqrt{3})$ and $H^+ = K(i) = \Q(\sqrt{3}, i)$.  \end{exm}

\begin{exm} Let $K = \Q$ and let $\mf{m} = (m)$ for some $m \in \Z$. Then \[
\Cl_{(m)} = \frac{\qty{\qty(\frac{r}{s}) \in \Q^{\times} \mid (r,m) = (s,m) =
1}}{\qty{\frac{r}{s} \in \Q^{\times} \mid \frac{r}{s} \equiv 1 \pmod m}} =
{(\Z/m)}^{\times} / (\pm 1). \] If $\mf{m} = (m) \cdot \infty$, then $\Cl_{(m)
\cdot \infty} = {(\Z/m)}^{\times}$.

    Now the ray class fields $L/\Q$ for either $2 \nmid m$ or $4 \mid m$ are
given by $\Cl_{(m) \cdot \infty} \cong \Gal(L/\Q)$, where $L = \Q(\zeta_m)$,
and the field given by $\Cl_{(m)}$ is $L = \Q(\zeta_m + \zeta_m^{-1})$. In
particular, by varying $m$, we obtain the \textit{Kronecker-Weber theorem}.
\end{exm}

\begin{thm}[Kronecker-Weber] We have $\Q^{\mr{ab}} = \bigcup_{m \geq 1}
    \Q(\zeta_m)$ and thus \[ \Gal(\Q^{\mr{ab}}/\Q) = \varprojlim_m
    {(\Z/m)}^{\times} = \wt{Z}^{\times} = \prod_p \Z_p^{\times}. \] \end{thm}

\begin{rmk} Hilbert's 12th problem asks for an explicit description of the ray
    class fields for a general number field. For $K = \Q$, we have the
    Kronecker-Weber theorem. For imaginary quadratic fields, we have modular
    functions and elliptic curves with complex multiplication. In general, this
    problem is still open.  \end{rmk}

We will use the following strategy to prove global Artin reciprocity:
\begin{enumerate} \item We will prove the first inequality\footnote{Some other
    references will call this the second inequality because they prove this
second.} that $[C_K:\Nm(C_L)] \geq [L:K]$. This will be a consequence of the
cohomology of $\I_K, C_K$. In particular, we will show that $h(C_K) = [L:K]$.
This will imply that $\abs{\wh{H}^0(G, C_L)} \geq [L:K]$, but this is precisely
the index we need.  \item Next, we will prove the surjectivity of $\I_K
\xrightarrow{\phi_{L/K}} \Gal(L/K)$. This is an application of the first
inequality and the weak Chebotarev density theorem.  \item We will prove the
second inequality\footnote{In the first proof of class field theory, this was
the first inequality.} $[C_K : \Nm(C_L)] \leq [L:K]$. This is a consequence of
Chebotarev density and we will use the analytic tool of
$L$-functions.\footnote{This is the difference between algebraic geometry and
number theory. In number theory, there are infinite places, so analysis cannot
be avoided.} \item We will prove that $\phi_K(K^{\times}) = 1$. This will
follow from the determination of the Brauer groups of $K$.  \end{enumerate}

\section{Cohomology of Id\`eles and first inequality}%
\label{sec:cohomology_of_id`eles}

Let $L/K$ be a finite Galois extension of number fields. Recall that if $v$ is
a place of $K$, then $L \otimes_K K_v = \prod_{w \mid v} L_w$. The action of
$\Gal(L/K)$ on $L \otimes K_v$ induces an action on the product by permuting
the places above $v$. If $\alpha = {(\alpha_w)}_{w \mid v}$ and $\sigma \in
\Gal(L/K)$, then ${(\sigma \alpha)}_{\sigma w} = \sigma (\alpha_w) \in
L_{\sigma w}$.

\begin{prop} Fix $w_0 \mid v$. Then there exists an isomorphism of $G \coloneqq
    \Gal(L/K)$-modules \[ \prod_{w \mid v} L_w \cong \Ind_{G_{w_0}}^G L_{w_0},
    \] where $G_{w_0} = D(w_0)$ is the decomposition group.  \end{prop}

\begin{proof} Recall that $\Ind_{G_{w_0}}^G L_{w_0} \coloneqq \qty{f \colon G
    \to L_{w_0} \mid f(\tau \sigma) = \tau f(\sigma)\text{ for all }\tau \in
G_{w_0}, \sigma \in G}$. For any $\alpha = {(\alpha_w)}_w$, we define \[
f_{\alpha} \colon G \to L_{w_0} \qquad \sigma \mapsto
\sigma(\alpha_{\sigma^{-1} w_0}). \] Then it is easy to compute \[
f_{\alpha}(\tau \sigma) = \tau \sigma (\alpha_{\tau \sigma^{-1} w_0}) = \tau
(\sigma \alpha_{\sigma^{-1} w_0}) = \tau f_{\alpha}(\sigma). \] Conversely, for
$f \in \Ind_{G_{w_0}}^G L_{w_0}$, we define ${(\alpha_f)}_{\sigma w_0}
\coloneqq \sigma f(\sigma^{-1})$. This is well-defined by
$G_{w_0}$-equivariance, and we can check that these two assignments are inverse
to each other.  \end{proof}

\begin{cor} By Shapiro's lemma, we have $H^r\qty(G, \prod_{w \mid v} L_w) =
H^r(G_{w_0}, L_{w_0})$ for all $r \geq 0$.  \end{cor}

Similarly, we have \begin{cor} For all $r \geq 0$, $H^r\qty(G, \prod_{w \mid v}
L_w^{\times}) = H^r(G_{w_0}, L_{w_0}^{\times})$ and $H^r\qty(G, \prod_{w \mid
v} U_w) = H^r(G_{w_0}, U_{w_0})$.  \end{cor}

In particular, all of these are independent of the choice of $w_0 \mid v$. To
stress the independence, we write $G^v \coloneqq G_{w_0}, L^v \coloneqq
L_{w_0}$, and so on and so forth. 

\begin{prop}\leavevmode We have the following cohomology of the id\`eles:
\begin{enumerate} \item $H^0(G, \I_L) = \I_K$.  \item For all $r \in \Z$,
$H^r(G, \I_L) = \bigoplus_v \wh{H}^r(G^v, {(L^v)}^{\times})$.  \end{enumerate}
\end{prop}

\begin{proof}\leavevmode \begin{enumerate} \item We know that $a = {(a_w)} \in
    \I_L$ is $G$-invariant if and only if ${(a_w)}_{w \mid v}$ is $G$-invariant
    for all places $v$ of $K$ if and only if $a_w \in K_v^{\times}$ is
    independent of the choice of $w \mid v$ for all $v$, and this is equivalent
    to $a = {(a^v)}_v \in \I_K$.  \item Let $S$ be a finite set of places of
    $K$ containing $S_{\infty}$. Write \[ \I_{L, S} = \qty(\prod_{v \in S}
    \prod_{w \mid v} L_w^{\times}) \times \qty(\prod_{v \notin S} \prod_{w \mid
v} U_w). \] Then $\I_L = \varinjlim \I_{L, S}$ and therefore \begin{align*}
\wh{H}^r(G, \I_L) &= \varinjlim \wh{H}^r(G, \I_{L, S}) \\ &= \varinjlim
\qty(\prod_{v \in S} \wh{H}^r(G^v, {(L^v)}^{\times})) \times \qty(\prod_{v
\notin S} \wh{H}^r(G^v, U^v)).  \end{align*} If $S$ contains all places of $K$
that are ramified in $L$, then for all $v \notin S$, $L^v/K^v$ is unramified.
By local class field theory, $\wh{H}^r(G^v, U^v) = 0$, so \[ \wh{H}^r(G, \I_L)
= \varinjlim \prod_{v \in S} \wh{H}^r(G^v, {(L^v)}^{\times}) = \bigoplus_v
\wh{H}^r(G^v, {(L^v)}^{\times}). \qedhere \] \end{enumerate} \end{proof}

\begin{cor} We have $H^1(G, \I_L) = 0$ and $H^2(G, \I_L) = \bigoplus_v
\frac{1}{n_v} \Z/\Z$, where $n_v = [L^v: K_v]$.  \end{cor}

These statements follow from collecting all of the local information.

\begin{cor} Assume $L/K$ is cyclic. Assume $S$ contains all places of $K$ that
are ramified in $L$ and the infinite places. Then $h(\I_L, S) = \prod_{v \in S}
n_v$.  \end{cor}

\begin{proof} By local class field theory, we have \[ h(\I_{L, S}) = \prod_{v
\in S} h({(L^v)}^{\times}) \prod_{v \notin S} h(U^v) = \prod_{v \in S} n_v
\prod_{v \notin X} 1 = \prod_{v \in S} n_v. \qedhere \] \end{proof}

\begin{defn} Let $T \coloneqq \qty{w \mid v : v \in S}$ be a finite set of
    places of $L$. Define the group of \textit{$T$-units} of $L$ to be \[ U(T)
    \coloneqq L^{\times} \cap \I_{L, S} = \qty{\alpha \in L^{\times} \mid
\alpha \in U_w, w \notin T}. \] \end{defn}

Our next goal is to compute $h(U(T))$ and use this to prove the first
inequality. First, we must compute the cohomology of units. Let $L/K$ be a
finite Galois extension of number fields and $S$ be a finite set of places
containing $S_{\infty}$. Let $T$ be the set of places of $L$ above $S$.

\begin{prop} Assume $L/K$ is cyclic. Then \[ h(U(T)) = \frac{\prod_{v \in S}
n_v}{n}, \] where $n_v = [L^v:K_v], n=[L:K]$.  \end{prop}

\begin{proof} We need to use the following comparison result for Herbrand
    quotients from the homework: let $G$ be a cyclic group and $V$ an
    $\R[G]$-module. If $M, N \subseteq V$ are two $G$-stable lattices, then
    $h(M) = h(N)$. We will apply this to the case where $V = \R^{\abs{T}} =
    \Hom_{\ms{Set}}(T, \R)$.  \begin{enumerate} \item Consider $N =
        \Hom_{\ms{Set}}(T, \Z)$. This is clearly a $G$-stable lattice. As a
        $G$-module, we have \begin{align*} N &= \bigoplus_{v \in S}
            \Hom_{\ms{Set}}(G/G^v, \Z) \\ &= \bigoplus_{v \in S} \Ind_{G^v}^G
            \Z.  \end{align*} In particular, we have \begin{align*} h(N) &=
        \prod_{v \in S} h(\Ind_{G^v}^G \Z) \\ &= \prod_{v \in S} h(\Z) \\ &=
    \prod_{v \in S} \abs{G^v} \\ &= \prod_{v \in S} n_v.  \end{align*} \item
    Now consider $\lambda \colon U(T) \to V = \R^{\abs{T}}$ given by $\alpha
    \mapsto {(\log \abs{\alpha}_w)}_{w \in T}$. If $M^0 = \Im(\lambda)$,
    Dirichlet's unit theorem for $U(T)$ says that $M^0$ is a lattice of rank
    $\abs{T} - 1$ in the hyperplane $\qty{\sum_{w \in T} x_w = 0}$. Then $M =
    M^0 \oplus \Z \cdot (1, \ldots, 1)$ is a $G$-stable lattice.

            Now we know that $h(M) = h(N)$, so $h(U(T)) = h(M^0)$ because the
            kernel of $\lambda$ is the set of roots of unity in $L$, which is
            finite. Now we obtain \[ h(U(T)) = h(M^0) = \frac{h(M)}{h(\Z)} =
            \frac{\prod_{v \in S} n_v}{n}, \] as desired. \qedhere
    \end{enumerate} \end{proof}

Now we are able to compute the cohomology of the id\`ele class group $C_K$. 

\begin{lem} For $L/K$, we have $H^0(G, C_L) = C_K$.  \end{lem}

\begin{proof} The short exact sequence in $\Mod_G$ \[ 1 \to L^{\times} \to \I_L
    \to C_L \to 1 \] gives a long exact sequence \[ 0 \to H^0(G, L^{\times})
\to H^0(G, \I_L) \to H^0(G, C_L) \to H^1(G, L^{\times}) = 0, \] where the last
equality is by Hilbert 90. This implies that $H^0(G, C_L) = \I_K/K^{\times} =
C_K$.  \end{proof}

We need to compute the Herbrand quotient of the id\`ele class group, so first
we will rewrite $\I_K$ in terms of $S$-units.

\begin{lem} Choose $S$ containing a generating set of prime ideals in $\Cl_K$.
Then $\I_K = K^{\times} \cdot \I_{K, S}$.  \end{lem}

\begin{proof} Recall that we have a surjection \[ \I_K \twoheadrightarrow I_K
    \qquad {(a_v)}_v \mapsto \prod_{v \nmid \infty} \mf{p}_v^{\mr{ord}_v(a_v)}.
    \] with kernel $\I_{K, S_{\infty}}$. In particular, we can write \[ \Cl_K =
\I_K / K^{\times} = \I_K / K^{\times} \I_{K, S_{\infty}}. \] By the choice of
$S$, we have \[ \I_K/K^{\times} \I_{K,S} = \Cl_K/\ev{\mf{p} \in S} = \Cl_K /
\Cl_K = 0. \qedhere \] \end{proof}

\begin{thm} Assume $L/K$ is cyclic. Then $h(C_L) = [L:K]$. In particular,
$[C_K: \Nm(C_L)] \geq [L:K]$.  \end{thm}

\begin{proof} Choose $S$ such that $T$ a generating set of prime ideals for
    $\Cl_L$. Then we can rewrite \[ C_L = \I_L/L^{\times} = L^{\times}
        \I_{L.T}/L^{\times} = \I_{L,T}/I_{L,T} \cap L^{\times} = \I_{L,T}/U(T).
        \] Now we have \[ h(C_L) = \frac{h(\I_{L, T})}{h(U(T))} =
    \frac{\prod_{v \in S} n_v}{\frac{1}{n} \prod_{v \in S} n_v} = n = [L:K].
\qedhere \] \end{proof}

As an application of the first inequality, we will prove

\begin{lem} Asssume $L/K$ is solvable. If there exists $D \subseteq \I_K$ such
that $D \subseteq \Nm(\I_L)$ and $K^{\times} \cdot D \subseteq \I_K$ is dense,
then $L = K$.  \end{lem}

\begin{proof} Assume $L \neq K$. Then we may find a tower $K \subseteq K'
    \subseteq L$ such that $K'/K$ is cyclic. Then we know $D \subseteq
    \Nm(\I_K')$. By local class field theory, $\Nm(\I_{K'}) \subseteq \I_K$ is
    an open subgroup, so $K^{\times} \cdot \Nm(\I_{K'})$ is also an open
    subgroup. Therefore $K^{\times} \cdot \Nm(\I_{K'})$ is also closed. By
    density, we see that $K^{\times} \Nm(I_{K'}) = \I_K$. In particular, $[C_K
    : \Nm(C_{K'})] = 1$, so $[K':K] = 1$, which is a contradiction. Thus $L =
    K$.  \end{proof}

\begin{prop} Assume $L/K$ is solvable. If all but finitely many places $v$ of
$K$ split completely in $L$, then $L = K$. Equivalently, if $L \neq K$, then
there are infinitely many places $v$ of $K$ that do not split completely in
$L$.  \end{prop}

\begin{proof} Choose $S$ to contain the set of all $v$ that do not split
    completely in $L$. Also choose \[ D = \qty{{(a_v)}_v \mid a_v \in
    K_v^{\times} (v \in S), a_v = 1 (v \notin S)} \subseteq \I_K. \] Then if $v
    \notin S$, it splits completely in $L$, so $L^v / K_v$ is a trivial
    extension. Therefore $D \subseteq \Nm(\I_L)$. On the other hand, by weak
    approximation, any ${(a_v)}_{v \in S}$ can be approximated by a global
    element $a \in K^{\times}$, so $K^{\times} \cdot D$ is dense in $\I_K$. By
    the previous lemma, $L = K$.  \end{proof}

\begin{prop} Assume that $L/K$ is solvable. Then $\qty{\Frob_{w/v}}_{v\
\text{unramified}}$ generate $\Gal(L/K)$.  \end{prop}

\begin{proof} Take $H = \ev{\Frob_{w/v}} \subseteq \Gal(L/K)$. Choose $E =
    L^H$. If $v$ is unramified in $L$, then $v$ splits completely in $L^H$. But
    this means that $E = K$ because only finitely many places are ramified, so
    $H = \Gal(L/K)$.  \end{proof}

\begin{cor} Assume $L/K$ is abelian. Then the Artin map $\phi_K \colon \I_K \to
\Gal(L/K)$ is surjective.  \end{cor}

\begin{proof} By local class field theory, if $v$ is unramified in $L$, then
$\phi_K (1, 1, \ldots, \pi_v, 1, \ldots) = \Frob_{w/v}$. We know that the
$\Frob_{w/v}$ generate $\Gal(L/K)$, so $\phi_K$ is surjective onto $\Gal(L/K)$.
\end{proof}

\section{Analytic aspects and second inequality}%
\label{sec:analytic_aspects_and_second_inequality}

Recall that if $L/K$ is solvable and $L \neq K$, then there exist infinitely
many places of $K$ that do not split completely in $L$. For example, if $L/K =
\Q(i)/\Q$, then $p$ splits in $L$ if and only if $p \equiv 1 \pmod{4}$. Thus
there are infinitely many primes $p \equiv 3 \pmod{4}$. This result is
sometimes called the \textit{weak Chebotarev density theorem}, so what is the
\textbf{strong} Chebotarev density theorem? In our example, we expect that half
of all primes are congruent to $1$ modulo $4$ and that the other half are
congruent to $3$ modulo $4$. Of course, there are infinitely many primes, so we
need to understand what is meant by ``half of all primes'' here.

\begin{defn} Let $P$ be a set of primes in $\Z$. Define the \textit{natural
    density} of $P$ to be \[ \mu(P) \coloneqq \lim_{x \to \infty} \frac{\#
\qty{p \in P \mid p < x}}{\# \qty{p\ \text{prime} \mid p < x}} \] if this limit
exists.  \end{defn}

\begin{defn} Let $P$ be a set of finite places of a number field $K$. Define
    the \textit{natural density} of $P$ to be \[ \mu(P) \coloneqq \lim_{x \to
    \infty} \frac{\# \qty{\mf{p} \in P \mid N \mf{p} < x}}{\# \qty{\mf{p}\
    \text{finite place} \mid N \mf{p} < x}} \] if this limit exists.
\end{defn}

Of course, this definition is a terrible way to do analysis because we are
throwing away so much information, so we would like a definition better suited
to analytic methods.

\begin{defn} Define the \textit{Dirichlet density} \[ \delta(P) \coloneqq
\lim_{s \to 1^+} \frac{\sum_{\mf{p} \in P}N\mf{p}^{-s}}{\sum_{\mf{p}}
N\mf{p}^{-s}} \] if this limit exists.  \end{defn}

The fundamental fact, proved in any first course in analytic number theory, is
that if $\mu(P)$ exists, then $\delta(P)$ exists and $\mu(P) = \delta(P)$. Thus
natural density is a stronger notion than Dirichlet density. The proof of this
fact uses the prime number theorem and is omitted here because this is not a
course in analytic number theory.

\begin{rmk} It is possible that the Dirichlet density exists, but the natural
    density does not. For $a \in \qty{1, \ldots, 9}$, choose $P_a$ to be the
    set of primes starting with the digit $a$. Then $\mu(P_a)$ does not exist,
    but $\delta(P_a) = \log_{10}\qty(1 + \frac{1}{a})$, a result due to
    Bombieri.\footnote{This pattern also appears in many other places, and is
    called \textit{Benford's law}.} \end{rmk}

Dirichlet density is easier to study because we can use the tool of
$L$-functions, which generalize the Riemann zeta function.

\begin{defn} The \textit{Riemann zeta function} is defined by \[ \zeta(s)
    \colon \sum_{n \geq 1} \frac{1}{n^s} = \prod_p \frac{1}{1-p^{-s}}. \] For a
    general number field $K$, the \textit{Dedekind zeta function} is defined by
    \[ \zeta_K(s) \coloneqq \sum_{\substack{\mf{a} \subseteq \mc{O}_K \\
    \text{ideal}}} \frac{1}{N\mf{a}^s} = \prod_{\substack{\mf{p} \subseteq
    \mc{O}_K \\ \text{prime ideals}}} \frac{1}{1-N\mf{p}^{-s}}. \] These series
converge when $\Re (s) \gg 0$. When $K = \Q$, $\zeta_{\Q}(s) = \zeta(s)$.
\end{defn}

\begin{defn} Let $\chi \colon {(\Z/m)}^{\times} \to \C^{\times}$ be a
    character. The \textit{Dirichlet L-function} of $\chi$ is given by \[ L(s,
    \chi) \coloneqq \sum_{n \geq 1} \frac{\chi(n)}{n^s} = \prod_p \frac{1}{1-
\chi(p) p^{-s}}, \] where $\chi(n) = 0$ if $(n,m) \neq 1$. When $\chi =
\mathbb{1}$, then $L(s, \mathbb{1}) = \zeta(s)$.  \end{defn}

\begin{defn} Let $K$ be a number field and $\mf{m}$ be a modulus of $K$. Let
    $\chi \colon \Cl_{\mf{m}} \to \C^{\times}$ be a character. The
    \textit{Weber L-function} of $\chi$ is given by \[ L(s, \chi) \coloneqq
    \sum_{\substack{\mf{a} \subseteq \mc{O}_K \\ \text{ideal}}}
\frac{\chi(\mf{a})}{N\mf{a}^s} = \prod_{\substack{\mf{p} \subseteq \mc{O}_K \\
\text{prime ideals}}} \frac{1}{1-\chi(\mf{p})N\mf{p}^{-s}}. \] Again, we write
$\chi(\mf{a}) = 0$ if $(\mf{a}, \mf{m}) \neq 1$. These series converge
absolutely when $\Re(s) \gg 0$. When $K = \Q$, $\mf{m} = (m) \cdot \infty$ and
we have $\Cl_{(m) \cdot \infty} = {(\Z/m)}^{\times}$, so the Weber L-function
recovers the Dirichlet L-function. Of course, when $\chi = \mathbb{1}$, we
recover the Dedekind zeta function.  \end{defn}

\begin{thm}[Analytic properties of Weber L-functions]\leavevmode
    \begin{enumerate} \item If $\chi \neq \mathbb{1}$, then $L(s, \chi)$ has an
        analytic continuation to all $s \in \C$ and $L(1, \chi) \neq 0$.  \item
        If $\chi = \mathbb{1}$, then $L(s, \chi) = \zeta_K(s)$ has an analytic
        continuation to all $s \in \C \setminus \qty{1}$ and a simple pole at
        $s = 1$. The residue $\Res_{s=1} \zeta_K(s)$ is given by the class
        number formula for $K$.  \item The function $L(s,\chi)$ satisfies the
functional equation relating the values at $s$ and $1-s$.  \end{enumerate}
\end{thm}

\begin{rmk} In general, there are more complicated complicated notions of
    L-functions, although this is a vaguely defined notion. In general,
    L-functions are series of the form $\sum_{n \geq 1} \frac{a_n}{n^s}$
    satisfying \begin{enumerate} \item The series has an Euler product $\prod_p
        \frac{1}{\text{polynomial}(p^{-s})}$.  \item The series has an analytic
        continuation to $\C$ except for poles for $\zeta(s)$ at $s = 1$.  \item
        The analytic continuation satisfies a functional equation relating the
        values at $s$ and $1-s$.  \end{enumerate} \end{rmk}

\begin{cor} For any number field $K$, $\log \zeta_K(s) \sim \log \frac{1}{s-1}$
(this means the difference is analytic at $s=1$).  \end{cor}

\begin{proof} By the theorem, $\zeta_K(s) (s-1)$ is analytic at $s=1$, so $\log
\zeta_K(s) = \log \zeta_K(s)(s-1) - \log (s-1)$. Because $\log \zeta_K(s)(s-1)$
is analytic at $s=1$, so we obtain the desired result after rearranging.
\end{proof}

\begin{prop} We have the identity \[ \log \zeta_K(s) \sim \sum_{\mf{p}}
    \frac{1}{N\mf{p}^s}. \] \end{prop} \begin{proof} We compute \begin{align*}
    \log \zeta_K(s) &= \log \prod_{\mf{p}} \frac{1}{1-N\mf{p}^{-s}} \\ &= -
    \sum_{\mf{p}} \log(1-N\mf{p}^{-s}) \\ &= \sum_{\mf{p}} \sum_{n \geq 1}
\frac{N\mf{p}^{-ns}}{n} \\ &= \sum_{\mf{p}} \frac{1}{N\mf{p}^s} + \sum_{\mf{p}}
\sum_{n \geq 2} \frac{N\mf{p}^{-ns}}{n}.  \end{align*} The second term is
analytic at $s=1$, so we obtain the desired result.  \end{proof}

\begin{cor} We can rewrite \[ \delta(P) = \lim_{s \to 1^+}
\frac{\sum_{\mf{p}\in P} N\mf{p}^{-s}}{\log \frac{1}{s-1}}. \] \end{cor}

\begin{thm} Let $L/K$ be a finite Galois extension and $P$ be the set of primes
    of $K$ splitting completely in $L$. Then \[ \delta(P) = \frac{1}{[L:K]}. \]
\end{thm}

\begin{exm} Let $K = \Q, L = \Q(i)$. Then we have $\delta(p \equiv 1 \pmod{4})
= \delta(p \equiv 3 \pmod{4}) = \frac{1}{2}$.  \end{exm}

\begin{proof} We can rewrite \begin{align*} \sum_{\mf{p} \in P}
    \frac{1}{N\mf{p}^s} &= \frac{1}{[L:K]} \sum_{\substack{\mf{q} \subseteq
    \mc{O}_L \\ f(\mf{q}) = 1}} \frac{1}{N\mf{q}^s} \\ &\sim \frac{1}{[L:K]}
    \sum_{\mf{q} \subseteq \mc{O}_L} \frac{1}{N\mf{q}^s} \\ &\sim
\frac{1}{[L:K]} \log \frac{1}{s-1} \end{align*} because the terms with
$f(\mf{q}) \geq 2$ contribute to an analytic function and the second item on
the right hand side is $\zeta_L(s)$. Now we obtain \begin{align*} \delta(P) &=
    \lim_{s \to 1^+} \frac{\sum_{\mf{p} \in P} N\mf{p}^{-s}}{\log
    \frac{1}{s-1}} \\ &= \lim_{s \to 1^+} \frac{\frac{1}{[L:K]} \log
\frac{1}{s-1}}{\log \frac{1}{s-1}} \\ &= \frac{1}{[L:K]}. \qedhere \end{align*}
\end{proof}

Now we want to use these tools to prove the second inequality. The idea is to
show that \[ \frac{1}{[C_K: \Nm(C_L)]} \geq \frac{1}{[L:K]}. \] We will
reinterpret the right-hand side as the density of primes of $K$ that split
completely in $L$. Now we will reinterpret the left-hand side as a certain
density also. Recall that for $\mf{m} = \mf{m}_0 \cdot \mf{m}_{\infty}$ a
modulus of $K$, we have the ray class group $\Cl_{\mf{m}}$. 

\begin{thm} Let $K^{\mf{m}} \subseteq H \subseteq I_K^{\mf{m}}$. Then let $A
    \in I_K^{\mf{m}}/H$ be an ideal class. Then \[ \delta(\qty{\mf{p} \in A}) =
    \frac{1}{[I_K^{\mf{m}} : H]}. \] \end{thm}

\begin{proof} Let $\chi$ be a character of $\I_K^{\mf{m}}/H$. This is a
    quotient of $\Cl_{\mf{m}}$, so it induces a quotient of $\Cl_{\mf{m}}$. Now
    let $L(s, \chi)$ be the Weber L-function. But now \begin{align*} \log L(s,
        \chi) &\sim \sum_{\mf{p} \nmid \mf{m}} \frac{\chi(\mf{p})}{N\mf{p}^s}
        \\ &= \sum_{B \in \I_K^{\mf{m}}/H} \sum_{\mf{p} \in B}
    \frac{\chi(\mf{p})}{N\mf{p}^s} \\ &= \sum_{B \in I_K^{\mf{m}}/H} \chi(B)
\sum_{p \in B} \frac{1}{N \mf{p}^s}.  \end{align*} But now we want to pick out
a single ideal class, so we need to use some Fourier analysis. We use the fact
that \[ \sum_{\chi} \chi(g) = \begin{cases} \abs{G} & g = 1 \\ 0 & g \neq 1
    \end{cases} \] for any $g \in G$. Multiplying ${\chi(A)}^{-1}$ and summing
    over all $\chi$, we see that \begin{align*} \sum_{\chi} {\chi(A)}^{-1} \log
        L(s, \chi) &\sim \sum_{\chi} \sum_B \chi(A^{-1}B) \sum_{\mf{p} \in B}
        \frac{1}{N \mf{p}}^s \\ \log \frac{1}{s-1}
                   &=[I_K^{\mf{m}}:H] \sum_{\mf{p} \in A} \frac{1}{N \mf{p}^2},
    \end{align*} and thus $\delta(\mf{p} \in A) = \frac{1}{[I_K^{\mf{m}}:H]}$,
as desired.  \end{proof}

\begin{rmk} Every finite abelian extension $L/K$ admits a modulus $\mf{m}$ such
    that \[ C_k/\Nm(C_K) \simeq I_K^{\mf{m}} / K^{\mf{m}} \cdot
    \Nm(I_L^{\mf{m}}). \] is a quotient of the ray class group $\Cl_{\mf{m}}$.
    In particular, we may reinterpret the global Artin map as a map $\phi_{L/K}
    \colon I_K^{\mf{m}} \to \Gal(L/K)$ given by $\mf{p} \mapsto
    \Frob_{\mf{p}}$.  \end{rmk}

\begin{thm}[Second inequality] We have $[I_K^{\mf{m}} : K^{\mf{m}} \cdot
\Nm(I_L^{\mf{m}})] \leq [L:K]$.  \end{thm}

\begin{proof} Apply the previous theorem to $H = K^{\mf{m}} \cdot
    \Nm(I_L^{\mf{m}})$ and $A = [0]$. Then we know \[ \delta(\mf{p} \in A) =
        \frac{1}{[I_K^{\mf{m}} : K^{\mf{m}} \cdot \Nm(I_L^{\mf{m}})]}. \] On
        the other hand, we know \[ \delta(\mf{p}\text{ splits completely in }L)
        = \frac{1}{[L:K]}. \] But now we know $\mf{p}$ splits completely in $L$
        only if $\mf{p} \in \Nm(I_L^{\mf{m}})$, which is the same thing as
        $\mf{p} \in A$. Thus $\delta(\mf{p} \in A) \geq \delta(\mf{p}\text{
        splits completely in }L)$, as desired.  \end{proof}

Before we continue with the proof of global class field theory, we will prove
an important result in analytic number theory.

\begin{thm}[Chebotarev density theorem] Let $L/K$ be a finite Galois extension
    of number fields. Let $\sigma \in G \coloneqq \Gal(L/K)$ and $C_{\sigma}$
    be the conjugacy class of $\sigma$. Then \[ \delta(\mf{p} \mid
    \Frob_{\mf{p}} \in C_{\sigma}) = \frac{\abs{C_{\sigma}}}{\abs{G}}. \]
\end{thm}

\begin{proof} We will use global Artin reciprocity, so in the future we will
    not be using the Chebotarev density theorem. By global Artin reciprocity
    for abelian extensions, we have an isomorphism $I_k^{\mf{m}}/H \to
    \Gal(L/K)$ for some modulus $\mf{m}$. But then it is easy to see that \[
    \frac{1}{\abs{G}} = \frac{1}{[I_K^{\mf{m}}:H]} = \delta(\mf{p} \in A) =
\delta(\mf{p} \in C_{\sigma}) \] because $G$ is abelian. Now when $L/K$ is
nonabelian, we will reduce to the abelian case. Let $\sigma \in G$ and write $M
= L^{\ev{\sigma}}$. Applying the abelian case to the abelian extension $L/M$,
write \[ S_1 \coloneqq \qty{\mf{q} \subset \mc{O}_M \mid \Frob_{\mf{q}} =
    \sigma \in \Gal(L/M)}. \] We know $\delta(s_1) \frac{1}{\abs{\sigma}}$. Now
    consider a subset of degree $1$ primes of $M$ and write \[ S_2 \coloneqq
    \qty{\mf{q} \in S_1 \mid f(\mf{q}/{\mf{p}}) = 1}. \] We know that
    $\delta(S_1) = \delta(S_2)$. Finally, consider \[ S_3 \coloneqq \qty{\mf{p}
    \mid \Frob_{\mf{p}} \in C_{\sigma}}. \] Now we have a surjection $S_2
    \twoheadrightarrow S_3$ and the fiber has size
    $\frac{\abs{Z_G(\sigma)}}{\abs{\sigma}}$. This is because if $\mf{q}
    \mapsto \mf{p}$ with $\Frob_{\mf{p}} = \sigma$, then $\tau \mf{q} \mapsto
    \mf{p}$ if and only if $\Frob_{ \tau \mf{q} } = \tau \Frob_{\mf{q}}
    \tau^{-1}$ if and only if $\tau \sigma = \sigma\tau$. Therefore $\tau
    \mf{q} = \mf{q}$ if and only if $\tau \in D(\mf{q}) = \ev{\sigma} =
    \Gal(L/M)$. Then we know that \[ \frac{1}{\abs{\sigma}} = \delta(S_2) =
        \delta(S_3) \cdot \frac{\abs{Z_G(\sigma)}}{\abs{\sigma}}, \] and
        therefore \[ \delta(S_3) = \frac{1}{\abs{Z_G(\sigma)}} =
        \frac{\abs{C_{\sigma}}}{\abs{G}}. \qedhere \] \end{proof}

\begin{exm} Suppose $\sigma = 1$. Then $C_{\sigma} = \qty{1}$, so Chebotarev
    density tells us that \[ \delta(\mf{p} \text{ splits completely in }L) =
    \frac{1}{[L:K]}. \] \end{exm}

\begin{exm} Choose $K = \Q$ and $L = \Q(\zeta_N)$, where either $N$ is odd or
    $4 \mid N$. Then we know $G = {(\Z/N)}^{\times}$. If we choose $\sigma = a
    \in {(\Z/N)}^{\times}$, then $C_{\sigma} = \qty{a}$, so by Chebotarev, we
    see that \[ \delta(p \equiv a \pmod{N}) = \frac{1}{\phi(N)}. \] Thus we
have recovered a strengthening of Dirichlet's theorem on primes in arithmetic
progression!  \end{exm}

\begin{rmk} The original proof of Chebotarev density does not rely on global
    Artin reciprocity. Instead, it reduces to the cyclotomic case, where global
    Artin reciprocity is known explicitly. In fact, Artin's proof of global
    Artin reciprocity was inspired by Chebotarev's proof (will be reduced to
    the cyclotomic case).  \end{rmk}

\begin{exm}[Simplest nonabelian example] Let $K = \Q$ and $L = \Q[x] / (x^3 -
    x^2 + 1)$. This is the cubic extension with minimal $\abs{d_L}$, and here
    $d_L = -23$. Then $\Gal(\wt{L}/\Q) \cong S_3$. Now $S_3$ has three distinct
    conjugacy classes $(1), (12), (123)$. These correspond to $f(x)$ splitting
    completely in $\F_p$, $f(x)$ splitting into a quadratic and a linear factor
    in $\F_p$, and $f(x)$ being irreducible in $\F_p$, respectively. Now we can
    compute (possibly using a computer) the table \begin{table}[H] \centering
        \caption{Primes in each conjugacy class} \label{tab:label}
        \begin{tabular}{rl} \toprule $\sigma$ & $p$ \\ \midrule $(1)$ & $59,
            \ldots$ \\ $(12)$ & $5,7,11,17,19,37,43,53,\ldots$ \\ $(123)$ &
        $2,3,13,29,31,41,47,\ldots$ \\ \bottomrule \end{tabular} \end{table}
    Chebotarev predicts that the three classes will occur in a ratio of
$1:3:2$.  \end{exm}

\begin{rmk} There is no simple congruence condition on $p$ to determine
    $\Frob_p$. However, there is a criterion on $p$ in terms of \textit{modular
    forms}. For example, for $z \in \mc{H}$, we may consider the function
    \begin{align*} f(z) &= q \prod_{n \geq 1} (1-q^n) (1-q^{23 n}) &q = e^{2
        \pi i z} \\ &= \sum_{n \geq 1} a_n q^n &a_n \in \Z.  \end{align*} Now
            some of the coefficients are \begin{table}[H] \centering
                \caption{Coefficients at primes} \label{tab:label}
                \begin{tabular}{cccccccccccccccccc} \toprule $p$ & $2$ & $3$ &
                    $5$ & $7$ & $11$ & $13$ & $17$ & $19$ & $23$ & $29$ & $31$
                        & $37$ & $41$ & $43$ & $47$ & $53$ & $59$ \\ \midrule
                $a_p$ & $-1$ & $-1$ & $0$ & $0$ & $0$ & $-1$ & $0$ & $0$ & $1$
                      & $-1$ & $-1$ & $0$ & $-1$ & $0$ & $-1$ & $0$ & $2$ \\
                  \bottomrule \end{tabular} \end{table} So we see that the
                  conjugacy classses corresppond to the coefficients being $2,
                  0, -1$. In fact, these are the character values for the
                  two-dimensional irreducible representation $\rho$ of $S_3$.
                  By a miracle, we have $\Tr \rho(\Frob_p) = a_p$!  \end{rmk}

\begin{rmk} Recall that abelian extensions can be understood in terms of the
    id\`ele class group using Artin reciprocity. But if we write $\I_{\Q} =
    \A_{\Q}^{\times}$, we can consider the id\`ele class group as a space
    related to $GL_1$. But now abelian extensions now correspond to
    $1$-dimensional representations of $\Gal(\ol{\Q}/\Q)$, and the Langlands
    program gives a conjectural correspondence between $n$-dimensional
    representations of $\Gal(\ol{\Q}/\Q)$ and automorphic forms on $[GL_n] =
    GL_n(\A_{\Q}) / GL_n(\Q)$. For example, when $n=2$, the $2$-dimensional
    representations correspond to modular forms relating $\Tr \rho(\Frob_p)$
    and coefficients $a_p$ of the modular form $f(z)$.  \end{rmk}

\section{Brauer groups and proof of global Artin reciprocity}%
\label{sec:brauer_groups_and_proof_of_artin_reciprocity}

We have already proved the first inequality that $[C_K : \Nm(C_L)] \geq [L:K]$,
at least when $L/K$ is cyclic. We have also proved the second inequality that
$[C_K:\Nm(C_L)] \leq [L:K]$ in general.

\begin{cor}[Global version of Hilbert 90] Let $L/K$ be finite Galois. Then
$H^1(G, C_L) = 0$.  \end{cor}

\begin{proof} We begin in the case when $G$ is cyclic. Here, $[C_K : \Nm(C_L)]
    = [L:K]$. However, $h(C_L) = \frac{[C_K:\Nm(C_L)]}{\abs{H^1(G, C_L)}} =
    [L:K]$, so $H^1(G, C_L) = 0$.

    Now it remains to reduce the general case to the cyclic case. First, we
    will consider $G$ solvable and induct on $\abs{G}$. Consider $H
    \triangleleft G$ such that $G/H$ is cyclic. Then inflation-restriction
    gives us an exact sequence \[ 0 \to H^1(G/H, C_{L^H}) \xrightarrow{\Inf}
    H^1(G, C_L) \xrightarrow{\Res} H^1(H, C_L). \] Now the two outside terms
    vanish by $G/H$ being cyclic and the inductive hypothesis, so $H^1(G, C_L)
    = 0$.

    Finally, if $G$ is an arbitrary group, we simply consider the restriction
    to all Sylow subgroups \[ H^1(G, C_L) \xrightarrow{\Res} \prod_p H^1(G_p,
    C_L) = 0. \] However, this restriction is injective by a past homework, so
    we are done.  \end{proof}

Now our goal is to compute the Brauer group $H^2(K)$. We will do this in terms
of the local Brauer groups.

\begin{prop} The natural restriction map $H^2(L/K) \to \bigoplus_v
H^2(L^v/K_v)$ is injective.  \end{prop}

\begin{proof} The short exact sequence \[ 0 \to L^{\times} \to \I_L \to C_L \to
    0 \] gives a long exact sequence \[ 0 \to H^1(G, C_L) \to H^2(G,
L^{\times}) \to H^2(G, \I_L). \] But now from the computation of the cohomology
of id\`eles and the previous corollary, we have an injection \[ H^2(G,
L^{\times}) = H^2(L/K) \hookrightarrow H^2(G, \I_L) = \bigoplus_v H^2(L^v/K_v).
\qedhere \] \end{proof}

\begin{cor} Given $\beta \in H^2(K)$, there exists a cyclic extension $L/K$
with $L \subseteq K(\zeta_m)$ for some $m$ such that $\beta$ is split by $L$
($\beta \in H^2(L/K) = \ker(H^2(K) \to H^2(L))$).  \end{cor}

\begin{proof} By the proposition, we know that $\beta \in H^2(K)$ is completely
    determined by its local restrictions $\qty{\beta_v}_v$. We also know that
    all but finitely many $\beta_v$ vanish. By local class field theory, we
    know that $\beta \in H^2(K_v) = \Q/\Z$ (the isomorphism is given by the
    invariant map). But now there exists $m \geq 1$ such that $m \cdot
    \mr{inv}_v(\beta_v) = 0$ for all $v$. However, by functoriality of
    $\mr{inv}_v$ for $w \mid v$, we obtain \[ \mr{inv}_w (\Res_L(\beta)) =
    [L^v:K_v] \mr{inv}_v(\beta_v) \] by one of the homeworks. Once we prove the
following lemma, we will be done.  \end{proof}

\begin{lem} Let $S$ be a finite set of finite places of $K$ and $m \geq 1$.
Then there exists a cyclic cyclotomic extension $L/K$ such that $m \mid
[L^v:K_v]$ for all $v \in S$.  \end{lem}

\begin{proof} First we reduce to the case $K = \Q$. Here, we can just take the
    composite with $K$ and replace $m$ with $m \cdot [K:\Q]$. Also, we will
    reduce to the case where $m = \ell^s$, wheere $\ell$ is some prime. Here,
    we can just take the composite of the extensions for all prime power
    factors of $m$. We need $\ell^s \mid [L^p : \Q_p]$ for some cyclic
    cyclotomic extension $L/\Q$. Now \[ \Gal(\Q(\zeta_{\ell^r}/\Q)) =
        {(\Z/\ell^r)}^{\times} = \begin{cases} \Z/\ell-1 \times \Z/\ell^{r-1} &
        \ell \text{ odd } \\ \Z/2 \times \Z/2^{r-2} & \ell = 2, r \geq 2.
    \end{cases} \] Now we can form a cyclic cyclotomic extension \[ L \coloneqq
        \begin{cases} {\Q(\zeta_{\ell^r})}^{\Z/\ell-1} & \ell \text{ odd } \\
        {\Q(\zeta_{2^r})}^{\Z/2} & \ell = 2.  \end{cases} \] Now we can compute
        for all $p \in S$ that \[ [\Q_p(\zeta_{\ell^r}) : \Q_p] = \begin{cases}
        \phi(\ell^r) & p=\ell \\ t & p \neq \ell \end{cases} \] Where $t$ is
        the smallest integer such that $\ell^r \mid \abs{\F_{p^t}^{\times}} =
        p^t-1$. In particular, as we increase $r$, $[\Q_p(\zeta_{p^r}):\Q_p]
        \to \infty$, so $[L^p \colon \Q_p] \to \infty$ as we increase $r$, so
        we may choose $r \gg 0$ such that $\ell^s \mid [L^p:\Q_p]$.
        \end{proof}

We have already proved that $\phi_{L/K} \colon \I_K \to \Gal(L/K)$ is
surjective, so it remains to show that it factors through $C_K/\Nm(C_L)$. We
need to prove that \begin{thm} $K^{\times}$ is contained in the kernel of
    $\phi_{L/K}$. This means $\phi_{L/K}(K^{\times}) = 1$.  \end{thm} This will
    imply that the global Artin map is an isomorphism. To prove this, we will
    use a global relation from Brauer groups.

\begin{thm} For all $\beta \in H^2(L/K)$, we have \[ \beta \in \ker
\qty(H^2(L/K) \to \bigoplus_v H^2(L^v/K_v) \xrightarrow{\sum_v \mr{inv}_v}
\Q/\Z). \] Equivalently, $\sum_v \mr{inv}_v(\beta) = 0$.  \end{thm}

Our strategy will contain the following steps: \begin{enumerate}
    \setcounter{enumi}{-1} \item We will prove Theorem 5.5.5 for $L/K =
    \Q(\zeta_m)/\Q$.  \item Next, we will prove Theorem 5.5.5 for $L/K$ cyclic
    cyclotomic.  \item Next, we will prove Theorem 5.5.6 for $L/K$ cyclic
    cyclotomic.  \item Next, we will prove Theorem 5.5.6 for $L/K$ finite
    abelian.  \item Finally, we will prove Theorem 5.5.5 for $L/K$ finite
    abelian.  \end{enumerate}

\subsection{Step 0}% \label{sub:step_0}

Choose $a \in \Q^{\times}$. We need to show that $\phi(a) = 1 \in
\Gal(\Q(\zeta_m)/\Q) = {(\Z/m\Z)}^{\times}$. It suffices to treat the case
where $m = \ell^r$ is a prime power, so we compute explicitly $\phi = \prod_p
\phi_p$. There are several cases: \begin{enumerate} \item $p \neq \ell$ is
    finite. Then $p$ is unramified, so $\phi_p(a) = (\zeta_{\ell^r} \mapsto
    \zeta_{\ell^r}^{p^s}) = p^s \in {(\Z/\ell^r)}^{\times}$, where $a = u \cdot
    p^s$.  \item $p=\ell$. Here $p$ is ramified, so $\phi_p(a) =
    (\zeta_{\ell^r} \mapsto \zeta_{\ell^r}^{u^{-1}}) = u^{-1} \in
    {(\Z/\ell^r)}^{\times}$, where $a=u\ell^s$.  \item $p=\infty$. Here,
$\phi_{\infty}(a) = \mr{sign}(a) \in \qty{\pm 1} = \Gal(\C/\R)$.
\end{enumerate} To show that $\phi(a) = 1$, it suffices to consider $a=p, \ell,
-1$.  \begin{enumerate} \item If $p\neq \ell$, then $\phi_p(p) \phi_{\ell}(p) =
    p \cdot p^{-1} = 1$.  \item If $p=\ell$, then $\phi(\ell) =
    \phi_{\ell}(\ell) = 1^{-1} = 1$.  \item Finally, $\phi(-1) =
    \phi_{\ell}(-1) \phi_{\infty}(-1) = {(-1)}^{-1} (-1) = 1$.  \end{enumerate}

\subsection{Step 1}% \label{sub:step_1}

We will prove the following result. Because we already proved Theorem 5.5.5 for
cyclotomic extensions, this will give us the result for cyclic cyclotomic
extensions.  \begin{lem} If Theorem 5.5.5 holds for $L/K$, then it also holds
    for subextensions $M/K$ of $L/K$ and for composites $L'/K'$, where $L' = L
    \cdot K'$.  \end{lem}

\begin{proof} By functoriality of the local Artin maps, $\phi_{M/K} = \I_K
    \xrightarrow{\phi_{L/K}} \Gal(L/K) \twoheadrightarrow \Gal(M/K)$. Therefore
    if $\phi_{L/K}(K^{\times}) = 1$, $\phi_{M/K}(K^{\times}) = 1$ also.

    For the composites, we use functoriality of the local Artin maps to obtain
    a commutative diagram \begin{equation*} \begin{tikzcd} \I_{K'}
        \ar{r}{\phi_{L'/K'}} \ar{d}{\Nm} & \Gal(L'/K') \ar[hookrightarrow]{d}
        \\ \I_K \ar{r}{\phi_{L/K}} & \Gal(L/K).  \end{tikzcd} \end{equation*}
    But now the desired result follows from diagram chasing with
${(K')}^{\times}$.  \end{proof}

\subsection{Step 3}% \label{sub:step_3}

Every $\beta \in H^2(K)$ is split by a cyclic cyclotomic extension by Corollary
5.5.3. This means there exists $L/K$ cyclic cyclotomic such that $\beta \in
H^2(L/K)$. This reduces the finite abelian case to the cyclic cyclotomic case.

\subsection{Steps 2 and 4}% \label{sub:steps_2_and_4}

We will relate the global Artin maps with Brauer groups. Recall that $H^2(G,
\Z) = H^1(G, \Q/\Z) = \Hom(G, \Q/\Z)$. Denote this map by $\delta_{\chi}
\mapsto \chi$. Now the cup product with $\delta_{\chi}$ gives us a map $H^0(G,
M) \to H^2(G, M)$. If $L/K$ is an extension of local fields, then for $M =
L^{\times}$, we have a commutative diagram \begin{equation*} \begin{tikzcd}
    H^0(G, L^{\times}) = K^{\times} \ar{r}{\phi_{L/K}} \ar{d}{\cup
    \delta_{\chi}} & G = \Gal(L/K) \ar{d}{\chi} \\ H^2(G, L^{\times}) =
    H^2(L/K) \ar{r}{\mr{inv}} & \Q/\Z.  \end{tikzcd} \end{equation*} If $L/K$
            is an extension of global fields, we consider $M = \I_L$. Then we
            have a commutative diagram \begin{equation} \begin{tikzcd}
                K^{\times} \ar[hookrightarrow]{d}{\cup \delta_{\chi}}
                \ar[hookrightarrow]{r} & \I_K \ar{r}{\phi_{L/K}} \ar{d}{\cup
                \delta_{\chi}} & G = \Gal(L/K) \ar{d}{\chi} \\ H^2(L/K)
            \ar[hookrightarrow]{r} & H^2(G, \I_L) = \bigoplus_v H^2(L^v/K_v)
        \ar{r}{\sum \mr{inv}_v} & \Q/\Z.  \end{tikzcd} \end{equation}

\subsection{Step 2}% \label{sub:step_2}

Assume that Theorem 5.5.5 holds for $L/K$ cyclic cyclotomic. Then the top row
is trivial, so because $G$ is cyclic, the bottom row is also trivial (in the
cyclic case, the shift in degree map is an isomorphism). But this means that
$\beta \in H^2(L/K)$ satisfies $\sum \mr{inv}_v(\beta) = 0$, which is the same
thing as Theorem 5.5.6 holding for $L/K$ cyclic cyclotomic.

\subsection{Step 4}% \label{sub:step_4}

Assume that Theorem 5.5.6 holds for $L/K$ finite abelian. But this means the
bottom row of (5.1) is trivial, so in particular, $\chi(\phi_{L/K}(K^{\times}))
= 0$. But $\chi$ is arbitrary in $\Hom(G, \Q/\Z)$, so $\phi_{L/K}(K^{\times}) =
1$. This gives Theorem 5.5.5 for all finite abelian extensions.

\subsection{Brauer groups}% \label{sub:brauer_groups}

As a consequence of global Artin reciprocity, we can determine the Brauer group
of an arbitrary number field.

\begin{thm} Let $K$ be a number field. Then \[ H^2(K) = \ker \qty(\bigoplus_v
H^2(K_v) \xrightarrow{\sum_v \mr{inv}_v} \Q/\Z). \] \end{thm}

\begin{proof} By Theorem 5.5.6, we know that $H^2(K)$ is contained in the
    kernel. It remains to prove the reverse inclusion. Consider $(\beta_v) \in
    \ker$. We know there exists $L/K$ cyclic cyclotomic such that
    ${(\beta_v)}_v \in \bigoplus_v H^2(L^v/K_v)$. Because $L/K$ is cyclic, we
    have an isomorphism of exact sequences \begin{equation*} \begin{tikzcd} 0
        \ar{r} & K^{\times}/\Nm(L^{\times}) \ar{r} \ar{d}{\cup \delta_{\chi}} &
        \I_K/\Nm(\I_L) \ar{r} \ar{d}{\cup \delta_{\chi}} & C_K/\Nm(C_L)
        \ar{d}{\sim} \ar{r} & 0 \\ 0 \ar{r} & H^2(L/K) \ar{r} & H^2(G, \I_L) =
    \bigoplus_v H^2(L^v/K_v) \ar{r}{\sum_v \mr{inv}_v} & \frac{1}{[L:K]} \Z/\Z
\ar{r} & 0.  \end{tikzcd} \end{equation*} By definition, the top row is exact,
so the bottom row is also exact. But this means that for $(\beta_v) \in
\ker\qty(\sum \mr{inv}_v)$, there exists $\beta \in H^2(L/K)$ such that
$(\beta_v) = \beta$.  \end{proof}

\begin{exm} Consider $K = \Q$. Then we have a map \[ H^2(\Q) =
\qty{\text{central simple algebras }B/\Q} \to \bigoplus_v H^2(K_v) = \qty{(B_v)
\mid B_v\text{ CSA over } \Q_v}. \] This is given by $B_v = B \otimes \Q_v$.
Now by the theorem, we note that ${(B_v)}_v$ comes from $B/\Q$ if and only if
$\sum \mr{inv}_v(B_v) = 0$. For example, we have \[ \mr{inv}_v(B_v) =
    \begin{cases} 0 & B_v = M_2(\Q_v) \\ \frac{1}{2} & B_v \text{ is quaternion
    algebra}.  \end{cases} \] This means that quaternion algebras $B/Q$ are in
    bijection with the set of ${(B_v)}_v$ where an even number of $B_v$ are not
    $M_2(\Q_v)$.  \end{exm}

\section{Proof of global existence}% \label{sec:proof_of_global_existence}

We will now complete the proof of global class field theory. We need to prove
the following statement: \begin{thm*}[Global existence] For any finite index
    open subgroup $U \subseteq C_K$, there exists a finite abelian extension
    $L/K$ such that $U = \Nm(C_L)$.  \end{thm*}

\begin{defn} A subgroup of $C_K$ is a \textit{norm subgroup} if it is of the
form $\Nm(C_L)$ for some finite abelian extension $L/K$.  \end{defn}

Now global existence is the same thing as every finite index open subgroup
being a norm subgroup. 

\begin{lem} Any subgroup containing a norm subgroup is also a norm subgroup.
\end{lem}

\begin{proof} Assume $U = \Nm(C_L)$ and $V \supseteq U$. Then global Artin
    reciprocity implies that $C_K/U \simeq \Gal(L/K)$. Now we have a
    commutative diagram \begin{equation*} \begin{tikzcd} C_K/U \ar{r}{\sim}
        \ar[twoheadrightarrow]{d} & \Gal(L/K) \ar[twoheadrightarrow]{d} \\
    C_K/V \ar{r}{\sim} & \Gal(M/K) \end{tikzcd} \end{equation*} by the
    fundamental theorem of Galois theory. By construction, $V = \ker(C_K \to
    \Gal(M/K))$, so in particular, $V = \Nm(C_M)$ by global Artin reciprocity.
\end{proof}

Now it suffices to produce a enough norm subgroups such that every finite index
open subgroup contains a norm subgroup. Here, we will use Kummer extensions.
Let $K$ be a field and $\mu_n \subseteq K$. Then if $L_n$ is the maximal
abelian extension of $K$ with exponent $n$, then by considering the Kummer
sequence \[ 1 \to \mu_n \to {(K^{\mr{sep}})}^{\times} \to
{(K^{\mr{sep}})}^{\times} \to 1 \] we obtain a perfect pairing $\Gal(L_n/K)
\otimes K^{\times}/{(K^{\times})}^n \to \mu_n$ given by $(\sigma, b) \mapsto
\frac{\sigma(\sqrt[n]{b})}{\sqrt[n]{b}}$. This gives a bijection between finite
subgroups of $K^{\times}/{(K^{\times})}^n$ and finite abelian extensions of $K$
of exponent $n$. Here, to a subgroup $B$, we associate field $L =
K(\sqrt[n]{B})$ given by adjoining all $n$-th roots of elements in $B$ and to
an extension $L/K$ we simply take the $n$-th powers of all elements in
$L^{\times}$. Here, it is easy to see that $\abs{B} = [L:K]$.

\begin{exm} Let $K$ be a local field and assume $\mu_n \subseteq K$. Then
    $L_n/K$ is finite and \[ [L_n:K] = \abs{K^{\times}/{(K^{\times})}^n} =
    \frac{n^2}{\abs{n}_K}. \] Here, we know $K^{\times} = \mc{O}_K^{\times}
    \times \Z$, so $K^{\times}/{(K^{\times})}^n =
    \mc{O}_K^{\times}/{(\mc{O}_K^{\times})}^n \times \Z/n$. Because
    $\mc{O}_K^{\times}$ contains a finite index subgroup isomorphic to
    $\mc{O}_K$, we have $\abs{\mc{O}_K^{\times}/{(\mc{O}_K^{\times})}^n} =
    \abs{\mu_n(\mc{O}_K^{\times})} \cdot \abs{\mc{O}_K/n\mc{O}_K} = n
    \frac{1}{\abs{n}_K}$, as desired.  \end{exm}

Now assume $K$ is a number field. 

\begin{lem} Assume $\mu_n \subseteq K$. Assume that $S \supseteq S_{\infty}
    \cup \qty{v \mid n}$. Assume $S$ is large enough so that $\I_K = K^{\times}
    \cdot \I_{K,S}$. Let $a \in K^{\times}$ such that $a \in { ( K_v^{\times} )
    }^n$ for all $v \in S$ and $a \in U_v$ for all $v \notin S$. Then $a \in
    {(K^{\times})}^n$.  \end{lem}

\begin{proof} Let $L = K(\sqrt[n]{a})$. Then we see that $L^v = K_v$ for all $v
    \in S$ and $L^v/K_v$ is unramified for all $v \notin S$. By local class
    field theory, in the first case we have $\Nm({(L^v)}^{\times}) =
    K_v^{\times}$, and in the second case $\Nm(U^v) = U_v$. Therefore
    $\Nm(\I_L) \supseteq \I_{K,S}$, so $K^{\times} \Nm(\I_L) \supseteq
    K^{\times} \I_{K,S} = \I_K$, and therefore $\Nm(C_L) \supseteq C_K$, so
    $L=K$.  \end{proof}

\begin{prop} Assume $\mu_n \subseteq K$. Let $U \subseteq C_K$ be a finite
index open subgroup and assume $C_K/U$ has exponent $n$. Then $U$ is a norm
subgroup.  \end{prop}

\begin{proof} Let $S \supseteq S_{\infty} \cup \qty{v \mid n}$ and \[ E
\coloneqq \prod_{v \in S} {(K_v^{\times})}^n \prod_{v \notin S} U_v \subseteq
\I_K. \] Then let $V \coloneqq K^{\times} \cdot E / K^{\times} \subseteq C_K$.
Because $C_K/U$ has exponent $n$, we know $U \supseteq V$ for $S$ sufficiently
large. It remains to show that $V$ is a norm subgroup. Enlarging $S$ we may
assume that $\I_K = K^{\times} \I_{K,S}$.

    Let $U(S) = K^{\times} \cap \I_{K,S}$ be the $S$-units. By the previous
    lemma, $K^{\times} \cap E = U(S) \cap E = {U(S)}^n$. Set $L =
    K(\sqrt[n]{U(S)})$. This is a finite abelian extension of exponent $n$
    unramified away from $S$. By local class field theory, we know
    $\Nm({(L^v)}^{\times}) \supseteq {(K_v^{\times})}^n$ for all $s \in S$ and
    $\Nm(U^v) = U_v$ for all $v \notin S$. But now $E \subseteq \Nm(\I_L)$ and
    thus $\Nm(C_L) \supseteq V$. Now we show that $\Nm(C_L) = V$.

    We will show that $[C_K : \Nm(C_L)] = [C_K : V]$. But now we have
    \begin{align*} [C_K:V] &= [\I_K : K^{\times} \cdot E] \\ &= [K^{\times}
        \cdot \I_{K,S} : K^{\times} \cdot E] \\ &= \frac{[I_{K,S} :
        E]}{[K^{\times} \cap \I_{K,S} : K^{\times} \cap E]} \\ \end{align*} Now
        we compute \begin{align*} [\I_{K,S} : E] &= \prod_{v \in S}
            [K_v^{\times} : {(K_v^{\times})}^n] \\ &= \prod_{v \in S}
            \frac{n^2}{\abs{n}_v} \\ &= n^{2 \abs{S}}.  \end{align*} We also
            compute \begin{align*} [K^{\times} \cap \I_{K,S} : K^{\times} \cap
            E] &= [U(S) : {U(S)}^n] \\ &= \abs{{(\Z/n)}^{\abs{s}}} \\ &=
        n^{\abs{s}} \end{align*} by Dirichlet's unit theorem. Thus $[C_K : V] =
        n^{\abs{S}}$. On the other hand, we have \begin{align*} [C_K :
            \Nm(C_L)] &= [L:K] \\ &= \abs{ U(S) \cdot {(K^{\times})}^n /
            {(K^{\times})}^n } \\ &= \abs{U(S) / U(S) \cap {(K^{\times})}^n} \\
                                  &= \abs{U(S) / {U(S)}^n} \\ &= n^{\abs{S}}
        \end{align*} using Kummer theory and the Dirichlet unit theorem. This
    implies that $V = \Nm(C_L)$.  \end{proof}

To finish the proof of global existence, we reduce to the case of Kummer
extensions.

\begin{lem} Let $U \subseteq C_K$ be a finite index open subgroup and $V =
\Nm_{K'/K}^{-1}(U)$ for some finite extension $K'/K$. If $V$ is a norm
subgroup, then so is $U$.  \end{lem}

\begin{proof} Write $V = \Nm_{L/K'}(C_L)$ for some finite abelian $L/K'$. Now
    let $M$ be the maximal abelian subextension of $L/K$. Then \[
    \Nm_{M/K}(C_M) = \Nm_{L/K}(C_L) = \Nm_{K'/K} (\Nm_{L/K'}(C_L)) =
\Nm_{K'/K}(V) \subseteq U. \] Therefore $U$ is a norm subgroup.  \end{proof}

We are now able to complete the proof of global existence. We will induct on
$[C_K : U]$ and assume $p \mid [C_K : U]$. If $\mu_p \subseteq K$, choose $U_1
\subseteq C_K$ containing $U$ such that $[C_K : U_1] = p$. Then $U_1$ is a norm
subgroup, so write $U_1 = \Nm(C_L)$. Now $\Nm_{L/K} \colon C_L \to C_K / U$ has
image $U_1 / U$ with kernel $V \coloneqq \Nm_{L/K}^{-1}(U)$. Then $[C_L:V] =
\abs{U_1/U} = \frac{[C_K:U]}{p}$, and by the inductive hypothesis, $V$ is a
norm subgroup, so $U$ is also a norm subgroup.

If $\mu_p \not\subseteq K$, then take $K' = K(\mu_p)$. Now $U' =
\Nm_{K'/K}^{-1}(U)$. Then $U'$ is a norm subgroup by the above, so by the
lemma, $U$ is also a norm subgroup.

\section{Primes of the form $x^2 + ny^2$}%
\label{sec:primes_of_the_form_x_2_ny_2_}

In this section we discuss a classical application of class field theory. This
was discussed at the beginning of these notes. Recall that if $K =
\Q(\sqrt{d})$ with discriminant $d_K$, then the splitting behavior of \[ (p) =
    \begin{cases} \mf{p}_1 \mf{p}_2 & \qty(\frac{d_K}{p}) = 1 \\ \mf{p} &
    \qty(\frac{d_K}{p}) = -1 \\ \mf{p}^2 & p \mid d_K \end{cases} \] is
    determined by the Legendre symbol $\qty(\frac{d_K}{p})$.

\begin{exm} Consider $K = \Q(\sqrt{-1})$ with $d_K = 4$. Then $p$ splits in $K$
    if and only if $\qty(\frac{-4}{p}) = 1$, which is equivalent to
    $\qty(\frac{-1}{p}) = 1$, is equivalent to $p \equiv 1 \pmod 4$ by basic
    arithmetic.

    On the other hand, $\mc{O}_K = \Z[i]$ is a PID, so $p$ splits in $K$ if and
only if $p = (x+iy)(x-iy)$, which is equivalent to $p = x^2 + y^2$ for integers
$x,y \in \Z$. Combining the two equivalences, we see that $p = x^2 + y^2$ if
and only if $p \equiv 1 \mod 4$.  \end{exm}

\begin{exm} Consider $K = \Q(\sqrt{-5})$ with $d_K = -40$. Then $p$ splits in
    $K$ if and only if $\qty(\frac{-5}{p}) = 1$, and by quadratic reciprocity
    this is equivalent to $p \equiv 1,3,7,9 \pmod{20}$. However, $\mc{O}_K =
    \Z[\sqrt{-5}]$ is no longer a PID, so we have a different criterion for $p
    = x^2 + 5y^2$.  \end{exm}

\begin{thm} If $p \neq 2,5$, then $p=x^2 + 5y^2$ if and only if $p \equiv 1,9
\pmod{20}$.  \end{thm}

    Some examples are given below.  \begin{table}[H] \centering \caption{Primes
        of the form $x^2 + 5y^2$} \label{tab:label} \begin{tabular}{cc}
            \toprule $p$ & $(x,y)$ \\ \midrule $29$ & $(3,2)$ \\ $41$ & $(6,1)$
            \\ $61$ & $(4,3)$ \\ $89$ & $(3,4)$ \\ \bottomrule \end{tabular}
        \end{table}

Similarly, we have \begin{thm} If $p \neq 2,3$, then $p = x^2 + 6y^2$ if and
only if $p \equiv 1,7 \pmod{24}$.  \end{thm}

Some examples are given below.  \begin{table}[H] \centering \caption{Primes of
    the form $x^2 + 6y^2$} \label{tab:label} \begin{tabular}{cc} \toprule $p$ &
        $(x,y)$ \\ \midrule $7$ & $(1,1)$ \\ $31$ & $(5,1)$ \\ $73$ & $(7,2)$
        \\ \bottomrule \end{tabular} \end{table}

Our goal is to explain the proof of these results using class field theory.

\begin{lem} Let $\mf{p}$ be a finite prime for a number field $K$. Then
$\mf{p}$ is principal if and only if $\mf{p}$ splits completely in $H_K$, where
$H_K$ is the Hilbert class field of $K$.  \end{lem}

\begin{proof} By global Artin reciprocity, $\Cl_K \cong \Gal(H_K/K)$. But then
    $\mf{p}$ is principal if and only if $[\mf{p}] \in \Cl_K$ is trivial.
    However, this is equivalent to $\Frob_{\mf{p}}$ being trivial, which is
    equivalent to $p$ splitting completely in $H_K$.  \end{proof}

\begin{prop}\leavevmode \begin{enumerate} \item If $p \neq 2,5$, then $p = x^2
    + 5y^2$ if and only if $p$ splits completely in $\Q(\sqrt{-5}, \sqrt{-1})$.
\item If $p \neq 2,3$, then $p = x^2 + 6y^2$ if and only if $p$ splits
    completely in $\Q(\sqrt{-6}, \sqrt{-3})$.  \end{enumerate} \end{prop}

\begin{proof}\leavevmode \begin{enumerate} \item If $p \neq 2,5$, then $p = x^2
    + 5y^2$ if and only if $(p) = \mf{p}_1 \mf{p}_2$ splits as a product of
    principal ideals in $K = \Q(\sqrt{-5})$. By the lemma, this is equivalent
    to $\mf{p}_1, \mf{p}_2$ splitting completely in $H_K = \Q(\sqrt{-5},
    \sqrt{-1})$, and combining, we see this is equivalent to $p$ splitting
    completely in $H_K$.  \item This is the same argument, except $H_K =
    \Q(\sqrt{-6}, \sqrt{-3})$ when $K = \Q(\sqrt{-6})$. \qedhere
    \end{enumerate} \end{proof}

Therefore, to prove the main theorems, it remains to prove the following
result.  \begin{prop}\leavevmode \begin{enumerate} \item $p$ splits completely
    in $\Q(\sqrt{-5}, \sqrt{-1})$ if and only if $p \equiv 1,9 \pmod{20}$.
\item $p$ splits completely in $\Q(\sqrt{-6}, \sqrt{-3})$ if and only if $p
    \equiv 1,7 \pmod{20}$.  \end{enumerate} \end{prop}

The key to this result is that in these cases, $H_K/\Q$ is an abelian
extension, so we may apply global Artin reciprocity. Recall that for $\Q$,
$\Cl_{(N) \cdot \infty} = \Gal(\Q(\zeta_N) / \Q) = {(\Z/N)}^{\times}$. Then
under the Artin reciprocity map, $p \equiv 1 \pmod N$ if and only if $p$ splits
completely in $\Q(\zeta_N)$.

\begin{exm} When $N=4$, we have $\Q(\zeta_4) = \Q(i)$, so we recover the result
that $p \equiv 1 \pmod 4$ if and only if $p$ splits in $\Q(i)$.  \end{exm}

More generally, the global existence theorem gives a bijection between finite
index open subgroup of $C_{\Q}$ and finite abelian extensions of $\Q$. In
particular, we obtain a bijection between finite subgroups of
${(\Z/N)}^{\times}$ and finite abelian subextensions $K/\Q$ of $\Q(\zeta_N)$.
This is given by $\Gal(K/\Q) = {(\Z/N)}^{\times} / H$. Thus we see that $p \in
H$ if and only if $p$ splits completely in $K$.

\begin{exm} Let $N = 5$. Then ${( \Z/5 )}^{\times} \cong \Z/4$, and so the
    possibilities for $H$ are $H = \qty{1}, \qty{\pm 1}, {(\Z/5)}^{\times}$.
    Clearly the trivial subgroup corresponds to $\Q(\zeta_5)$ and
    ${(\Z/5)}^{\times}$ corresponds to $\Q$, and $\qty{\pm 1}$ corresponds to
    $\Q(\zeta_5 + \zeta_5^{-1}) = \Q(\sqrt{5})$. By global class field theory,
    this is the only abelian subextension $K/\Q$ of $\Q(\zeta_5)$.  \end{exm}

Note that because quadratic extensions are abelian, every quadratic extension
is contained in a cyclotomic extension. For example, $\sqrt{5} = \zeta_5 -
\zeta_5^2 - \zeta_5^3 + \zeta_5^4$.

\begin{exm} Consider $N = 20$. Then ${(\Z/20)}^{\times} \cong \Z/4 \times
    \Z/2$. Now the subgroups and corresponding subextensions are given below.
    \begin{table}[H] \centering \caption{Subgroups and subfields}
        \label{tab:label} \begin{tabular}{cc} \toprule $H \subseteq
            {(\Z/20)}^{\times}$ & $K$ \\ \midrule $\qty{1}$ & $\Q(\zeta_{20})$
            \\ $\qty{\pm 1}$ & $\Q(\zeta_{20}+\zeta_{20}^{-1})$ \\ $\qty{1,11}$
                             & $\Q(\zeta_5)$ \\ $\qty{1,9,11,19}$ &
                             $\Q(\sqrt{5})$ \\ $\qty{1,9,13,17}$ & $\Q(\zeta_4)
                         = \Q(i)$ \\ $\qty{1,9}$ & $\Q(\sqrt{5}, \sqrt{i})$ \\
                     $\qty{1,3,7,9}$ & $\Q(\sqrt{-5})$ \\ ${(\Z/20)}^{\times}$
                                     & $\Q$ \\ \bottomrule \end{tabular}
                                 \end{table} This gives us the following
                                 diagram of field extensions: \begin{equation*}
                                     \begin{tikzcd} & \Q(\zeta_{20})
                                         \ar[dash]{d} \ar[dash]{dl}
                                         \ar[dash]{dr} \\ \Q(\zeta_{20} +
                                         \zeta_{20}^{-1}) \ar[dash]{d} &
                                         \Q(\zeta_5) \ar[dash]{dl} &
                                         \Q(\sqrt{5}, i) \ar[dash]{dll}
                                         \ar[dash]{dl} \ar[dash]{d} \\
                                     \Q(\sqrt{5}) \ar[dash]{dr} & \Q(i)
                                 \ar[dash]{d} & \Q(\sqrt{-5}) \ar[dash]{dl} \\
                                              & \Q.  \end{tikzcd}
                                     \end{equation*} In particular, we see that
                                     $p \equiv 1,9 \pmod{20}$ if and only if
                                     $p$ splits completely in $\Q(\sqrt{-5},
                                     \sqrt{-1})$.  \end{exm}

\begin{exm} When $N = 24$, then ${(\Z/24)}^{\times} = \Z/2 \times \Z/2 \times
    \Z/2$. Then we see that $\Q(\sqrt{-6})$ corresponds to $\qty{1,5,7,11}$ and
    $\Q(\sqrt{-3})$ corresponds to $\qty{1,7,13,23}$, so $\Q(\sqrt{-6},
    \sqrt{-2})$ corresponds to $\qty{1,7}$. Therefore $p \equiv 1,7 \pmod{24}$
    if and only if $p$ splits completely in $\Q(\sqrt{-6}, \sqrt{-3})$.
\end{exm}

\begin{rmk} When $K/\Q$ is abelian, class field theory gives us a congruence
condition for primes splitting completely in $K$. On the other hand, when
$K/\Q$ is nonabelian, then such a congruence condition does not exist.
\end{rmk}

\begin{lem} Denote by $Spl(L/K)$ to be the set of primes $\mf{p}$ of $K$
    splitting completely in $L$. Then $L_1 \subseteq L_2$ if and only if
    $Spl(L_1/K) \supseteq Spl(L_2/K)$. In particular, $L_1 = L_2$ if and only
    if $Spl(L_1/K) = Spl(L_2/K)$.  \end{lem}

\begin{proof} One direction is clear. In the other direction, suppose
    $Spl(L_1/K) \supseteq Spl(L_2/K)$. Then $Spl(L_1 L_2/K) \supseteq
    Spl(L_2/K)$. But now Chebotarev density tells us that $[L_1 L_2:K] \leq
    [L_2:K]$, and this is only possible if $L_1 L_2 = L_2$, which means $L_1
    \subseteq L_2$.  \end{proof}

\begin{prop} If $K/\Q$ is nonabelian, then there does not exist a congruence
condition for $p$ splitting completely in $K$.  \end{prop}

\begin{proof} If there exists such a congruence condition, then choose $p \in
    Spl(K(\zeta_N)/\Q)$. Thus $p \in \Q(\zeta_N/\Q)$, and therefore $p \equiv 1
    \pmod N$. By the criterion, $\qty{p \equiv 1 \pmod N} \subseteq Spl(K/\Q)$.
    But this means that $Spl(\Q(\zeta_N)/\Q) \subseteq Spl(K/\Q)$, so
    $\Q(\zeta_N) \supseteq K$. This implies $K/\Q$ is abelian.  \end{proof}

\begin{exm} If $K = \Q(\sqrt{-14})$, then $\Cl_K = \Z/4$, so $H_K = \Q(\sqrt{2
\sqrt{2}-1})$ with $\Gal(H_K/\Q) \cong D_4$. Thus there is no congruence
condition for $p = x^2 + 14y^2$.  \end{exm}

\begin{rmk} Even though there is no congruence condition, non-abelian
reciprocity gives us a condition using coefficients of modular forms.
\end{rmk}

\end{document}

\documentclass[leqno, openany]{memoir}
\setulmarginsandblock{3.5cm}{3.5cm}{*}
\setlrmarginsandblock{3cm}{3.5cm}{*}
\checkandfixthelayout

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
%\usepackage{MnSymbol}
\usepackage{bm}
\usepackage{accents}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{automata,positioning}
\usepackage{tikz-cd}
\usepackage{forest}
\usepackage{braket} 
\usepackage{listings}
\usepackage{mdframed}
\usepackage{verbatim}
\usepackage{physics2}
\usephysicsmodule{ab,ab.legacy,diagmat,xmat}
\usepackage{derivative}
\usepackage{fixdif}
\usepackage{stmaryrd}
\usepackage{mathrsfs} 
\usepackage[normalem]{ulem} 
\usepackage{stackengine}
\usepackage{bbm}
%\usepackage{/home/patrickl/homework/macaulay2}

%font
\usepackage[sc]{mathpazo}
\usepackage{eulervm}
\usepackage[scaled=0.86]{berasans}
\usepackage{inconsolata}
\usepackage{microtype}

%CS packages
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{algorithm}

% typeset and bib
\usepackage[english]{babel} 
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage[bookmarks, colorlinks, breaklinks]{hyperref} 
\hypersetup{linkcolor=blue,citecolor=magenta,filecolor=black,urlcolor=blue}
\usepackage{cleveref}
\usepackage[backend=biber,style=alphabetic,maxalphanames=4,maxnames=5,hyperref,backref=true,backrefstyle=none]{biblatex}
\usepackage{xpatch}
\xpatchbibmacro{pageref}{parens}{backrefparens}{}{}
\crefname{equation}{}{}

% other formatting packages
\usepackage{float}
\usepackage{booktabs}
\usepackage[shortlabels]{enumitem}
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage{titling}
\usepackage{parskip}
\usepackage{graphicx}
\graphicspath{{./}}

\usepackage{lipsum}

% delimiters
\DeclarePairedDelimiter{\gen}{\langle}{\rangle}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}


\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{quest}[thm]{Question}
\newtheorem{prob}[thm]{Problem}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{defns}[thm]{Definitions}
\newtheorem{con}[thm]{Construction}
\newtheorem{exm}[thm]{Example}
\newtheorem{exms}[thm]{Examples}
\newtheorem{notn}[thm]{Notation}
\newtheorem{notns}[thm]{Notations}
\newtheorem{addm}[thm]{Addendum}
\newtheorem{exer}[thm]{Exercise}

\theoremstyle{remark}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{rmks}[thm]{Remarks}
\newtheorem{warn}[thm]{Warning}
\newtheorem{sch}[thm]{Scholium}


% unnumbered theorems
\theoremstyle{plain}
\newtheorem*{thm*}{Theorem}
\newtheorem*{prop*}{Proposition}
\newtheorem*{lem*}{Lemma}
\newtheorem*{cor*}{Corollary}
\newtheorem*{conj*}{Conjecture}

% unnumbered definitions
\theoremstyle{definition}
\newtheorem*{defn*}{Definition}
\newtheorem*{exer*}{Exercise}
\newtheorem*{defns*}{Definitions}
\newtheorem*{con*}{Construction}
\newtheorem*{exm*}{Example}
\newtheorem*{exms*}{Examples}
\newtheorem*{notn*}{Notation}
\newtheorem*{notns*}{Notations}
\newtheorem*{addm*}{Addendum}


\theoremstyle{remark}
\newtheorem*{rmk*}{Remark}

% shortcuts
\newcommand{\Ima}{\mathrm{Im}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\G}{\mathbb{G}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\bS}{\mathbb{S}}
\renewcommand{\k}{\Bbbk}
\renewcommand{\L}{\mathbb{L}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\M}{\overline{M}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\h}{\mathfrak{h}}
\newcommand{\n}{\mathfrak{n}}
\renewcommand{\b}{\mathfrak{b}}
\newcommand{\ep}{\varepsilon}
\newcommand*{\dt}[1]{%
   \accentset{\mbox{\Huge\bfseries .}}{#1}}
\renewcommand{\abstractname}{Official Description}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\mf}[1]{\mathfrak{#1}}
\newcommand{\mr}[1]{\mathrm{#1}}
\newcommand{\ms}[1]{\mathsf{#1}}
\newcommand{\mt}[1]{\mathtt{#1}}
\newcommand{\mbf}[1]{\mathbf{#1}}
\newcommand{\on}[1]{\operatorname{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\bir}{\sim_{\mr{bir}}}
\newcommand{\vir}{\mr{vir}}
\newcommand{\stacks}[1]{\href{https://stacks.math.columbia.edu/tag/#1}{#1}}
\newcommand{\ostar}{\stackMath\mathbin{\stackinset{c}{0ex}{c}{0ex}{\star}{\bigcirc}}}
\newcommand{\Mbar}{\overline{\mathcal{M}}}

\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Def}{Def}
\DeclareMathOperator{\Bl}{Bl}
\DeclareMathOperator{\NE}{NE}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\spec}{Spec}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\proj}{Proj}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\depth}{depth}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\ev}{ev}
\DeclareMathOperator{\Hilb}{Hilb}

% Section formatting
\titleformat{\section}
    {\Large\sffamily\scshape\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[runin]
    {\large\sffamily\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}[runin]{\normalfont\itshape}{\thesubsubsection}{1em}{}

\title{COURSE TITLE}
\author{Lectures by INSTRUCTOR, Notes by NOTETAKER}
\date{SEMESTER}

\newcommand*{\titleSW}
    {\begingroup% Story of Writing
    \raggedleft
    \vspace*{\baselineskip}
    {\Huge\itshape Enumerative invariants and birational geometry\\ Spring 2024}\\[\baselineskip]
    {\large\itshape Notes by Patrick Lei}\\[0.2\textheight]
    {\Large Lectures by Various}\par
    \vfill
    {\Large \sffamily Columbia University}
    \vspace*{\baselineskip}
\endgroup}
\pagestyle{simple}

\chapterstyle{ell}


%\renewcommand{\cftchapterpagefont}{}
\renewcommand\cftchapterfont{\sffamily}
\renewcommand\cftsectionfont{\scshape}
\renewcommand*{\cftchapterleader}{}
\renewcommand*{\cftsectionleader}{}
\renewcommand*{\cftsubsectionleader}{}
\renewcommand*{\cftchapterformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsubsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}
\renewcommand{\cftsubsectionafterpnum}{\cftparfillskip}
\setrmarg{3.55em plus 1fil}
\setsecnumdepth{subsection}
\maxsecnumdepth{subsection}
\settocdepth{subsection}

\addbibresource{../../math.bib}
\DefineBibliographyStrings{english}{
    backrefpage={$\leftarrow$},
    backrefpages={$\leftarrow$},
}

\begin{document}
    
\begin{titlingpage}
\titleSW
\end{titlingpage}

\thispagestyle{empty}
\section*{Disclaimer}%
\label{sec:disclaimer}

These notes were taken during the lectures using \texttt{neovim}. 
Any errors are mine and not the speakers'. 
In addition, my notes are picture-free (but will include commutative diagrams) and are a mix of my mathematical style and that of the lecturers. Also, notation may differe between lecturers.
If you find any errors, please contact me at \texttt{plei@math.columbia.edu}.

\section*{Acknowledgements}
I would like to thank Shaoyun Bai for co-organizing the seminar with me.

\vspace*{1cm}

\noindent\textbf{Seminar Website:}  \url{https://math.columbia.edu/~plei/s24-birat.html}
\newpage

\tableofcontents

\chapter{Preliminaries}%
\label{cha:Preliminaries}

\section{Givental formalism (Patrick, Feb 01)}

\subsection{Introduction}

Let $X$ be a smooth projective variety. Then for any $g,n \in \Z_{\geq 0}, \beta \in H_2(X,\Z)$, there exists a moduli space $\Mbar_{g,n}(X,\beta)$ (Givental's notation is $X_{g,n,\beta}$) of \textit{stable maps} $f \colon C \to X$ from genus-$g$, $n$-marked prestable curves to $X$ with $f_*[C] = \beta$. It is well-known that $\Mbar_{g,n}(X,\beta)$ has a virtual fundamental class
\[ [\Mbar_{g,n}(X,\beta)]^{\mr{vir}} \in A_{\delta}(\Mbar_{g,n}(X,\beta)), \qquad \delta = \int_{\beta} c_1(X) + (\dim X - 3)(1-g) + 3. \]
In addition, there is a universal curve and sections
\begin{equation*}
\begin{tikzcd}
    \mc{C} \ar[shift left=1]{r}{\pi} & \Mbar_{g,n}(X,\beta) \ar[shift left=1]{l}{\sigma_i}.
\end{tikzcd}
\end{equation*}
In this setup, there are tautological classes
\[ \psi_i \coloneqq c_1(\sigma_i^* \omega_{\pi}) \in H^2(\Mbar_{g,n}(X,\beta)). \]
This allows us to define individual Gromov-Witten invariants by
\[ \ab<\tau_{a_1}(\phi_1) \cdots \tau_{a_n}(\phi_n)>_{g,n,\beta}^X = \int_{[\Mbar_{g,n}(X,\beta)]^{\mr{vir}}} \prod_{i=1}^n \on{ev}_i^* \phi_i \cdot \psi_i^{a_i}. \]
These invariants satisfy various relations. The first is the \textit{string equation:}
\[ \ab<\tau_0(1) \tau_{a_1}(\phi_1) \cdots \tau_{a_n}(\phi_n)>_{g,n+1,\beta}^X = \sum_{i=1}^n \ab<\tau_{a_i-1}(\phi_i)\prod_{j\neq i} \tau_{a_j}(\phi_j)>_{g,n,\beta}^X. \]
The next is the \textit{dilaton equation:}
\[ \ab<\tau_1(1) \tau_{a_1}(\phi_1) \cdots \tau_{a_n}(\phi_n)>_{g,n+1,\beta}^X = (2g-2+n)\ab<\tau_{a_1}(\phi_1) \cdots \tau_{a_n}(\phi_n)>_{g,n,\beta}^X. \]
Finally, we have the \textit{divisor equation} when one insertion is a divisor $D \in H^2(X)$:
\begin{align*}
    \ab<\tau_0(D)\tau_{a_1}(\phi_1)\cdots \tau_{a_n}(\phi_n)>_{g,n+1,\beta}^X =&{} \ab(\int_{\beta} D) \cdot \ab<\tau_{a_1}(\phi_1) \cdots \tau_{a_n}(\phi_n)>_{g,n,\beta}^X \\
    &+ \sum_{i=1}^n \ab<\tau_{a_i-1}(\phi_i \cdot D)\prod_{j\neq i} \tau_{a_j}(\phi_j)>_{g,n,\beta}^X.
\end{align*}

It is often useful to package Gromov-Witten invariants into various generating series.

\begin{defn}
    The \textit{quantum cohomology} $QH^*(X)$ of $X$ is defined by the formula
    \[ (a \star_t b, c) \coloneqq \sum_{\beta, n} \frac{Q^{\beta}}{n!} \ab<a,b,c,t,\ldots,t>_{0,3+n,\beta}^X \]
    for any $t \in H^*(X)$. This is a commutative and associative product.
\end{defn}
The \textit{small quantum cohomology} is obtained by setting $t=0$ and the ordinary cohomology is obtained by further setting $Q=0$.
\begin{rmk}
    Convergence of the formula does not hold in general, so quantum cohomology needs to be treated as a formal object.
\end{rmk}

\begin{defn}
    Let $\phi_i$ be a basis of $H^*(X)$ and $\phi^i$ be the dual basis. Then the \textit{$J$-function} of $X$ is the cohomology-valued function
    \[ J_X(t,z) \coloneqq z + t + \sum_i \sum_{n,\beta} \frac{Q^{\beta}}{n!} \ab<\frac{\phi_i}{z-\psi}, t, \ldots, t>_{0,n+1,\beta}^X \phi^i. \]
\end{defn}

\begin{defn}
    The \textit{genus-$0$ GW potential} of $X$ is the (formal) function
    \[ \mc{F}^X(t(z)) = \sum_{\beta, n} \frac{Q^{\beta}}{n!} \ab<t(\psi), \ldots, t(\psi)>_{0,n,\beta}^X. \]
\end{defn}

The associativity of the quantum product is equivalent to the PDE
\[ \sum_{e,f} \mc{F}^X_{abe} \eta^{ef} \mc{F}_{cdf} = \sum_{e,f} \mc{F}^X_{ade} \eta^{ef} \mc{F}^X_{bcf} \]
for any $a,b,c,d$, which are known as the \textit{WDVV equations}. Here, we choose coordinates on $H^*(X)$ and set $z=0$ (only consider primary insertions). In addition, set $\eta_{ef}$ to be the components of the Poincar\'e pairing and let $\eta^{ef}$ be the inverse matrix.


\subsection{Frobenius manifolds}

A Frobenius manifold can be thought of as a formalization of the WDVV equations.

\begin{defn}
    A \textit{Frobenius manifold} is a complex manifold $M$ with a flat symmetric bilinear form $\ab<-,->$ (meaning that the Levi-Civita connection has zero curvature) on $TM$ and a holomorphic system of (commutative, associative) products $\star_t$ on $T_t M$ satisfying:
    \begin{enumerate}
        \item The unit vector field $\mbf{1}$ is flat: $\nabla \mbf{1} = 0$;
        \item For any $t$ and $a,b,c \in T_t M$, $\ab<a \star_t b, c> = \ab<a, b \star_t c>$;
        \item If $c(u,v,w) \coloneqq \ab<u \star_t v, w>$, then the tensor $(\nabla_z c)(u,v,w)$ is symmetric in $u,v,w,z \in T_t M$.
    \end{enumerate}
    If there exists a vector field $E$ such that $\nabla \nabla E = 0$ and complex number $d$ such that:
    \begin{enumerate}
        \item $\nabla \nabla E = 0$;
        \item $\mc{L}_E(u \star v) - \mc{L}_E u \star v - u \star \mc{L}_E v = u \star v$ for all vector fields $u,v$;
        \item $\mc{L}_E \ab<u,v> - \ab<\mc{L}_E u,v> - \ab<u,\mc{L}_E v> = (2-d) \ab<u,v>$ for all vector fields $u,v$,
    \end{enumerate}
    then $E$ is called an \textit{Euler vector field} and the Frobenius manifold $M$ is called \textit{conformal}.
\end{defn}

\begin{exm}
    Let $X$ be a smooth projective variety. Then we can give $H^*(X)$ the structure of a Frobenius algebra with the Poincar\'e pairing and the quantum product. Note that the quantum product does not converge in general, so we must treat this as a formal object. The Euler vector field is given by
    \[ E_X = c_1(X) + \sum_i \ab(1-\frac{\deg \phi_i}{2})t^i \phi_i, \]
    where a general element of $H^*(X)$ is given by $t = \sum_i t^i \phi_i$. We will also impose that $\phi_1 = \mbf{1}$. There is another very important structure, the \textit{quantum connection}, which is given by the formula
    \begin{align*}
        \nabla_{t^i} &\coloneqq \partial_{t^i} + \frac{1}{z} \phi_i \star_t \\
        \nabla_{z \odv{}{z}} &\coloneqq z \odv{}{z} - \frac{1}{z} E_X \star_t + \mu_X.
    \end{align*}
    Here, $\mu_X$ is the \textit{grading operator}, defined for pure degree classes $\phi \in H^*(X)$ by
    \[ \mu_X(\phi) = \frac{\deg \phi - \dim X}{2} \phi. \]
    Finally, in the direction of the Novikov variables, we have
    \[ \nabla_{\xi Q \partial_Q} = \xi Q \partial_Q + \frac{1}{z} \xi \star_t. \]
\end{exm}

\begin{rmk}
    For a general conformal Frobenius manifold $(H, (-,-), \star, E)$, there is still a \textit{deformed flat connection} or \textit{Dubrovin connection} given by
    \begin{align*}
        \nabla_{t^i} &\coloneqq \pdv{}{t^i} + \frac{1}{z} \phi_i \star \\
        \nabla_{z \odv{}{z}} &\coloneqq z \odv{}{z} - \frac{1}{z} E \star.
    \end{align*}
\end{rmk}


\begin{defn}
    The \textit{quantum $D$-module} of $X$ is the module $H^*(X)[z]\llbracket Q,t\rrbracket$ with the quantum connection defined above.
\end{defn}

\begin{rmk}
    It is important to note that the quantum connection has a fundamental solution matrix $S^X(t,z)$ given by
    \[ S_X(t,z) \phi = \phi + \sum_{i} \sum_{n,\beta} \frac{Q^{\beta}}{n!} \phi^i \ab<\frac{\phi_i}{z-\psi},\phi,t,\ldots,t>_{0,n+2,\beta}^X. \]
    It satisfies the important equation
    \[ S_X^*(t,-z) S(t,z) = 1. \]
    Using this formalism, the $J$-function is given by $S_X^*(t,z) \mbf{1} = z^{-1} J_X(t,z)$.
\end{rmk}


\subsection{Givental formalism}

The Givental formalism is a geometric way to package enumerative (CohFT) invariants cleanly. We begin by defining the symplectic space
\[ \mc{H} \coloneqq H^*(X, \Lambda)\llparenthesis z^{-1}\rrparenthesis \]
with the symplectic form
\[ \Omega(f,g) \coloneqq \on{Res}_{z=0} ( f(-z)g(z) ). \]
This has a polarization by Lagrangian subspaces
\[ \mc{H}_+ \coloneqq H^*(X,\Lambda)[z], \qquad \mc{H}_- \coloneqq z^{-1} H^*(X,\Lambda)\llbracket z^{-1} \rrbracket \]
giving $\mc{H} \cong T^* \mc{H}_+$ as symplectic vector spaces. Choose Darboux coordinates $\ul{p}, \ul{q}$ on $\mc{H}$. For example, there is a choice in Coates's thesis which gives a general element of $\mc{H}$ as
\[ \sum_{k \geq 0} \sum_i q_k^i \phi_i z^k + \sum_{\ell \geq 0} \sum_j p_{\ell}^j \phi^j (-z)^{-\ell-1}. \]

Taking the \textit{dilaton shift}
\[ q(z) = t(z) - z = -z + t_0 + t_1 z + t_2 z^2 + \cdots, \]
we can now think of $\mc{F}^X$ has a formal function on $\mc{H}_+$ near $q = -z$. This convention is called the \textit{dilaton shift}.

Before we continue, we need to recast the string and dilaton equations in terms of $\mc{F}^X$. Write $t_x = \sum t_k^i \phi_i$. Then the string equation becomes
\[ \partial_0^1 \mc{F}(t) = \frac{1}{2} (t_0, t_0) + \sum_{n=0}^{\infty} \sum_{j} t_{n+1}^{j} \partial_n^{j} \mc{F}(t) \]
and the dilaton equation becomes
\[ \partial_1^1 \mc{F}(t) = \sum_{n=0}^{\infty} t_n^j \partial_n^j \mc{F}(t) - 2 \mc{F}(t). \]
There are also an infinite series of topological recursion relations
\[ \partial_{k+1}^i \partial_{\ell}^j \partial_{m}^k \mc{F}(t) = \sum_{a,b} \partial_k^i \partial_0^a \mc{F}(t) \eta^{ab} \partial_0^b \partial_{\ell}^j \partial_m^k \mc{F}(t). \]
We can make sense of these three relations for any (formal) function $\mc{F}$ on $\mc{H}_+$.

Now let
\[ \mc{L} = \ab\{(\ul{p}, \ul{q}) \in \mc{H} \mid \ul{p} = \d_{\ul{q}} \mc{F}\} \]
be the graph of $\d \mc{F}$. This is a formal germ at $q=-z$ of a Lagrangian section of the cotangent bundle $T^* \mc{H}_+$ and is therefore a formal germ of a Lagrangian submanifold in $\mc{H}$.

\begin{thm}
    The function $\mc{F}$ satisfies the string equation, dilaton equation, and topological recursion relations if and only if $\mc{L}$ is a Lagrangian cone with vertex at the origin $q=0$ such that its tangent spaces $L$ are tangent to $\mc{L}$ exactly along $z L$.
\end{thm}

Because of this theorem, $\mc{L}$ is known as the \textit{Lagrangian cone}. It can be recovered from the $J$-function by the following procedure. First consider $\mc{L} \cap (-z + z \mc{H}_-)$. Via the projection to $-z + H$ along $\mc{H}_-$, this can be considered as the graph of the $J$-function. Next, we consider the derivatives $\pdv{J}{t^i}$, which form a basis of $L \cap z \mc{H}_-$, which is a complement to $zL$ in $L$. Then we know that
\[ z \pdv{J}{t^i} \in z L \subset \mc{L}, \]
so 
\[ z \pdv{J}{t^i,t^j} \in L \cap z \mc{H}_-. \]
Writing these in terms of the first derivatives $\pdv{J}{t^i}$ and using the fact that $J$ is a solution of the quantum connection, so we recover the Frobenius structure of quantum cohomology.

We will now express some classical results in this formalism. Let $X$ be a toric variety with toric divisors $D_1, \ldots, D_N$ such that $D_1, \ldots, D_k$ form a basis of $H^2(X)$ and Picard rank $k$. Then define the \textit{$I$-function}
\[ I_X = z e^{\sum_{j=1}^k t_i D_i} \sum_{\beta} Q^{\beta} \frac{\prod_{j=1}^N \prod_{m=-\infty}^0 (D_j+mz)}{\prod_{j=1}^N \prod_{m=-\infty}^{\ab<D_j, \beta>}(D_j + mz)}. \]

\begin{thm}[Mirror theorem]
    The formal functions $I_X$ and $J_X$ coincide up to some change of variables, which if $c_1(X)$ is semi-positive is given by components of the $I$-function.
\end{thm}


\begin{thm}[Mirror theorem in this formalism]
    For any $t$, we have
    \[ I_X(t, z) \in \mc{L}. \]
\end{thm}

Another direction in Gromov-Witten theory is the Virasoro constraints. In the original formulation, these involved very complicated explicit differential operators, but in the Givental formalism, there is a very compact formulation.

Define $\ell^{-1} = z^{-1}$ and
\[ \ell_0 = z \odv{}{z} + \frac{1}{2} + \mu + \frac{c_1(X) \cup -}{z}. \]
Then define 
\[ \ell_n = \ell_0 (z \ell_0)^n. \]

\begin{thm}[Genus-$0$ Virasoro constraints]
    Suppose the vector field on $\mc{H}$ defined by $\ell_0$ is tangent to $\mc{L}$. Then the same is true for the vector fields defined by $\ell_n$ for any $n \geq 1$.
\end{thm}

\begin{proof}
    Let $L$ be a tangent space to $\mc{L}$. Then if $f \in zL \subset \mc{L}$, the assumption gives us $\ell_0 f \in L$. But then $z \ell_0 f \in zL$, so $\ell_0 z \ell_0 f = \ell_1 f \in L$. Continuing, we obtain $\ell_n f \in L$ for all $n$.
\end{proof}

Next week, we will learn that the Quantum Riemann-Roch theorem can be stated in this formalism. Let $\mc{L}^{\mr{tw}}$ be the twisted Lagrangian cone (where the twisted theory will be defined next week).
\begin{thm}[Quantum Riemann-Roch]
    For some explicit linear symplectic transformaiton $\Delta$, we have $\mc{L}^{\mr{tw}} = \Delta \mc{L}$.
\end{thm}




\subsection{Quantization}

In the last part of the talk, we will briefly discuss the quantization formalism, which encodes the higher-genus theory. In Darboux coordinates $p_a, q_b$, we will quantize symplectic transformations by the standard rules
\[ \wh{{q_a q_b}} = \frac{q_a q_b}{\hslash}, \qquad \wh{q_a p_b} = q_a \pdv{}{q_b}, \qquad \wh{p_a p_b} = \hslash \pdv{}{q_a,q_b}. \]
This determines a differential operator acting on functions on $\mc{H}_+$.

We also need the genus-$g$ potential
\[ \mc{F}_g^X \coloneqq \sum_{\beta, n} \frac{Q^{\beta}}{n!} \ab<t(\psi), \ldots, t(\psi)>_{g,n,\beta}^X \]
and the \textit{total descendent potential}
\[ \mc{D} \coloneqq \exp\ab(\sum_{g \geq 0} \hslash^{g-1} \mc{F}_g^X). \]

In this formalism, the Virasoro conjecture can be expressed as follows. Let $L_n = \wh{\ell}_n + c_n$, where $c_n$ is a carefully chosen constant.

\begin{conj}[Virasoro conjecture]
    If $L_{-1} \mc{D} = L_0 \mc{D} = 0$, then $L_n \mc{D} = 0$ for all $n \geq 1$.
\end{conj}

In this formalism, the higher-genus version of the Quantum Riemann-Roch theorem takes the very simple form
\begin{thm}[Quantum Riemann-Roch]
    Let $\mc{D}^{\mr{tw}}$ be the twisted descendent potential. Then
    \[ \mc{D}^{\mr{tw}} = \wh{\Delta} \mc{D}. \]
\end{thm}

\section{Quantum Riemann-Roch (Shaoyun, Feb 08)}

We will state and prove the Quantum Riemann-Roch theorem in genus $0$, following Coates-Givental.

\subsection{Twisted Gromov-Witten invariants}

Again, let $X$ be a smooth projective variety. Let $E$ be a vector bundle on $X$. We should note that 
\[ \Mbar_{0,n+1}(X,\beta) \xrightarrow{\pi} \Mbar_{0,n}(X,\beta) \]
is the universal curve, and the universal morphism is simply $\on{ev}_{n+1}$. We will consider the sheaf
\[ E_{0,n,\beta} \coloneqq R\pi_* \on{ev}_{n+1}^* E \in K^0(\Mbar_{0,n}(X, \beta)). \]
We need to check that this is a well-defined $K$-theory class. Choose an ample line bundle $L \to X$. By definition, for $N \gg 1$, the cohomology
\[ H^i(X, E \otimes L^N) = 0 \]
whenever $i \geq 1$. This gives us an exact sequence
\[ 0 \to \ker ( \eqqcolon A ) \to H^0(X, E \otimes L^N) \otimes L^{-N} ( \eqqcolon B ) \to E \to 0. \]
For any stable map $f \colon \Sigma \to X$ of positive degree, we obtain a long exact sequence
\begin{equation*}
    0 \to H^0(\Sigma, f^* E) \to H^1(\Sigma, f^* A) \to H^1(\Sigma, f^* B) \to H^1(\Sigma, f^* E) \to 0,
\end{equation*}
so we obtain
\[ R^0 \pi_* \ev_{n+1}^* E - R^1 \pi_* \ev_{n+1}^* E = R^1 \pi_* \ev_{n+1}^* B - R^1 \pi_* \ev_{n+1}^* A. \]
This expresses $E_{0,n,\beta}$ as a difference of vector bundles.

We will now introduce a \textit{universal characteristic class}
\[ \mbf{c}(-) = \exp \ab( \sum_{k=0}^{\infty} s_k \ch_k(-)), \]
where $s_0, s_1, s_2, \ldots$ are formal variables and $\ch_k$ is the $k$-th Chern character
\[ \frac{x_1^k}{k!} + \cdots + \frac{x_r^k}{k!}, \]
where $x_i$ are the Chern roots.

\begin{exm}
    Let $E \to X$ be a vector bundle and equip it with the fiberwise $\C^*$-action by scaling. Let $\lambda$ be the equivariant parameter and $\rho_i$ be the Chern roots. Then
    \[ e(E) = \sum_i (\lambda + \rho_i). \]
    We then rewrite
    \begin{align*}
        \prod( \lambda + \rho_i) &= \exp\ab(\sum_i \ab(\log \lambda - \sum_k \frac{(-\rho_i)^k}{k\lambda^k})) \\
        &= \exp\ab(\ch_0(E) \log \lambda + \sum_{k > 0} \frac{(-1)^{k-1}(k-1)!}{\lambda^k} \ch_k(E)),
    \end{align*}
    so for the (equivariant Euler class), we obtain
    \begin{align*}
        s_0 &= \log \lambda \\
        s_k &= \frac{(-1)^{k-1} (k-1)!}{\lambda^k}, \qquad k > 0.
    \end{align*}
\end{exm}

We are now ready to define the $(E,\mbf{c})$-twisted Gromov-Witten invariants.

\begin{defn}
    Define the \textit{twisted Gromov-Witten invariants} by
    \[ \ab<\alpha_1 \psi_1^{k_1}, \ldots, \alpha_n \psi_n^{k_n}>_{0,n,\beta}^{X,(E, \mbf{c})} \coloneqq \int_{[\Mbar_{0,n}(X,\beta)]^{\mr{vir}}} \prod_{i=1}^n \ev_i^*(\alpha_i)\psi_i^{k_i} \cup \mbf{c}(E_{0,n,\beta}) \]
    for $\alpha_i \in H^*(X)$ and $k_i \in \Z_{\geq 0}$.
\end{defn}

We will now construct the Lagrangian cone for the twisted theory. Let $R$ be the coefficient ring containing $s_0, s_1, \ldots$ and define
\[ \mc{H}^{\mr{tw}}_X \coloneqq H^*(X)\otimes R\llparenthesis z^{-1}\rrparenthesis \llbracket Q \rrbracket. \]
We also introduce the \textit{twisted Poincar\'e pairing}
\[ (a,b)_{(E, \mbf{c})} = \int_X a \cup b \cup \mbf{c}(E). \]
The symplectic structure is defined by
\[ \Omega_{\mr{tw}}(f,g) = \on{Res}_{z=0} (f(-z) g(z))_{(E,\mbf{c})}. \]
There is a polarization
\[ \mc{H}^{\mr{tw}}_X = \mc{H}_+^{\mr{tw}} \oplus \mc{H}_-^{\mr{tw}} \]
with
\begin{align*}
    \mc{H}_+^{\mr{tw}} &\coloneqq H^*(X) \otimes R[z]\llbracket Q \rrbracket \\
    \mc{H}_-^{\mr{tw}} &\coloneqq H^*(X) \otimes R\llbracket z\rrbracket\llbracket Q \rrbracket.
\end{align*}
Finally, we have the \textit{twisted genus-$0$ descendent potential}
\[ \mc{F}_{X,\mr{tw}}^0(t) \coloneqq \sum_{\beta, n} \frac{Q^{\beta}}{n!} \ab<t,\ldots,t>_{0,n,\beta}^{X,(E,\mbf{c})}. \]
Identifying $\mc{H}^{\mr{tw}}_X$ with $T^* \mc{H}_+^{\mr{tw}}$, we obtain the twisted Lagrangian cone $\mc{L}_X^{\mr{tw}}$ as the graph of $\d \mc{F}^0_{X,\mr{tw}}$. Denote the untwisted Lagrangian cone as $\mc{L}_X$.

\begin{thm}\label{thm:qrr}
    We have
    \[ \mc{L}_X^{\mr{tw}} = \Delta \mc{L}_X, \]
    where
    \[ \Delta = \exp\ab(\sum_{m \geq 0} \sum_{\ell \geq 0} s_{2m-1+\ell} \frac{B_{2m}}{(2m)!} \ch_{\ell}(E) z^{2m-1}). \]
    Here, the Bernoulli numbers $B_{2m}$ are defined by
    \[ \frac{t}{1-e^{-t}} = \frac{t}{2} + \sum_{m \geq 0} \frac{B_{2m}}{(2m!)} t^{2m}. \]
\end{thm}

\subsection{Proof of~\Cref{thm:qrr}}

The idea is to use the Grothendieck-Riemann-Roch theorem.

\begin{prop}
    We can write
    \[ [\Mbar_{0,n}(X,\beta)]^{\vir} \cap \ch_k(E_{0,n,\beta}) = \pi_* \ab(\sum_{\substack{r+\ell=k+1 \\ r,\ell \geq 0}} \frac{B_r}{r!} \ch_{\ell}(\ev^*_{n+1} E) \Psi(r)), \]
    where
    \begin{align*}
        \Psi(r) ={}& \psi_{n+1}^r \cap [\Mbar_{0,n+1}(X,\beta)]^{\vir} \\ 
        &- \sum_{i=1}^n (\sigma_i)_* (\psi_i^{n-1} \cap [\Mbar_{0,n}(X,\beta)]^{\vir}) \\ 
        &+ \frac{1}{2} j_* \ab(\sum_{\substack{a+b=r-2 \\ a,b \geq 0}} (-1)^a \psi_+^a \psi_i^b \cap [\wt{Z}_{0,n+1,\beta}]^{\vir}). 
    \end{align*}
    Here, $Z_{0,n+1,\beta}$ is formed by the nodes of $\pi$, $\wt{Z}_{0,n+1,\beta}$ is a double cover of $Z_{0,n+1,\beta}$ formed by a choice of branch of the nodes,  $\psi_+$ and $\psi_-$ are the $\psi$-classes at the two branches of the nodes, and
    \[ j \colon \wt{Z}_{0,n+1,\beta} \to Z_{0,n+1,\beta} \to \Mbar_{0,n+1}(X,\beta) \]
    is the ``inclusion.''
\end{prop}

\begin{proof}
    We will first assume that $\ol{M}_{0,n+1}(X,\beta)$, $\Mbar_{0,n}(X,\beta)$, and $Z_{0,n+1,\beta}$ are all smooth and that $\pi(Z_{0,n+1,\beta})$ is a normal crossings divisor. In general, we need a Cartesian diagram
    \begin{equation*}
    \begin{tikzcd}
        & \ev_{n+1}^* E \ar{rr} \ar{dl} & & E \ar{dl} \\
        \Mbar_{0,n+1}(X,\beta) \ar{rr} \ar{dd} & & \mc{C} \ar{dd} \\
        & Z_{0,n+1,\beta} \ar[hookrightarrow]{ul} & & Z \ar[hookrightarrow]{ul} \\
        \Mbar_{0,n}(X,\beta) \ar{rr} & & \mc{M}.
    \end{tikzcd}
    \end{equation*}
    Continuing in the ideal situation, we apply Grothendieck-Riemann-Roch\footnote{We need to be careful about directly applying Grothendieck-Riemann-Roch in the stacky setting (and in general we are only quasi-smooth).} to obtain
    \begin{align*}
        \ch(E_{0,n,\beta}) &= \ch(R \pi_* \ev_{n+1}^* E) \\
        &= \pi_* (\ch(\ev_{n+1}^* E) \cdot \on{td}^{\vee} \Omega_{\pi}),
    \end{align*}
    where $\on{td}^{\vee}$ is the dual Todd class, defined by $\frac{-x}{1-e^{tx}}$, and $\Omega_{\pi}$ is the sheaf of relative differentials.

    We then have two short exact sequences
    \[ 0 \to \Omega_{\pi} \to \omega_{\pi} \to \mc{O}_{Z_{0,n+1,\beta}} \to 0 \]
    and
    \[ 0 \to \omega_{\pi} \to L_{n+1} \to \bigoplus_{i=1}^n \mc{O}_{D_i} \to 0, \]
    where $D_i$ is the divisor where the marked points $i, n+1$ collide and their component has exactly three special points. Now we obtain
    \[ \Omega_{\pi} = L_{n+1} - \sum_{i=1}^n \mc{O}_{D_i} - \mc{O}_{Z_{0,n+1,\beta}} \]
    in $K$-theory. Using the facts that $c_1(L_{n+1}) = \psi_{n+1}$, $D_i \cap D_j = \emptyset$ for $i \neq j$, and $D_i \cap Z_{0,n+1,\beta} = \emptyset$, we see that $L_{n+1}$ is trivial when restricted to $D_i$ and $Z_{0,n+1,\beta}$. Now we apply the dual Todd class.
    \begin{lem}
        If $x_1 \cup x_2 = 0$, then
        \[ (\on{td}^{\vee}(x_1)-1)(\on{td}^{\vee}(x_2)-1) = 0. \]
    \end{lem}
    Using the lemma, we obtain
    \begin{align*}
        \on{td}^{\vee}(\Omega_{\pi}) &= \on{td}^{\vee}(L_{n+1}) \prod_{i=1}^n \on{td}^{\vee}(-\mc{O}_{D_i}) \on{td}^{\vee}(\mc{O}_{Z_{0,n+1,\beta}})^{-1} \\
        &= 1 + (\on{td}^{\vee}(L_{n+1})-1) + \sum_{i=1}^n\ab(  \frac{1}{\on{td}^{\vee}(\mc{O}_{D_i})} -1 ) + \ab(\frac{1}{\on{td}^{\vee}(\mc{O}_{Z_{n+1,\beta}})}-1).
    \end{align*}
    The first term in the statement comes from the dual Todd class of $L_{n+1}$, the second comes from
    \[ 0 \to \mc{O}(-D_i) \to \mc{O} \to \mc{O}_{D_i} \to 0 \]
    and the relation between $\mc{O}(-D_i)$ and $L_i$, and the last term can be found in Appendix A of Coates-Givental.
\end{proof}

To obtain the Quantum Riemann-Roch theorem, we use the previous proposition and manipulate the generating function. If $E$ is convex and $Y \subset X$ is a complete intersection defined by $E$, then $\mc{L}_X^{\mr{tw}}$ is closely related to $\mc{L}_Y$, so we are able to study the Gromov-Witten theory of $Y$ using this.

\section{Shift operators (Melissa, Feb 15)}%
\label{sec:shift_operators}

Let $X$ be a semiprojective smooth variety. This means that $X$ is projective over its affinization. Also assume that $X$ has an action by $T = (\C^{\times})^m$ such that all $T$-weights in $H^0(X, \mc{O})$ are contained in a strictly convex cone in $\Hom(T, \C^{\times})_{\R}$ and $H^0(X, \mc{O})^T = \C$. All such $X$ imply that
\begin{enumerate}[(a)]
    \item The fixed locus $X^T$ is projective;
    \item The $T$-variety $X$ is equivariantly formal. This means that $H_T^*(X)$ is a free module over $H_T^*(\mr{pt}) = \Q[\lambda] \coloneqq \Q[\lambda_1, \ldots, \lambda_m]$ and there is a non-canonical isomorphism
        \[ H_T^*(X) \cong H^*(X) \otimes H_T^*(\mr{pt}) \]
        as $H_T^*(\mr{pt})$-modules.
    \item The evaluation maps $\on{ev}_i \colon X_{0,n,d} \to X$ are proper.
\end{enumerate}
Using (b), we may choose a basis $\ab\{\phi_i\}_{i=0}^N$ of $H_T^*(X)$ over $H_T^*(\mr{pt})$. Let $\tau^i$ be the dual coordinates.

\subsection{Equivariant big quantum cohomology}%
\label{sub:Equivariant big quantum cohomology}
Let $(-,-)$ be the $T$-equivariant Poincar\'e pairing, which in general takes values in $\Q(\lambda)$. Then the $T$-equivariant big quantum product is defined by
\begin{align*}
    (\phi_i \star_{\tau} \phi_j, \phi_k) &= \ab<\!\! \ab< \phi_i, \phi_j, \phi_k>\!\!>_{0,3}^{X,T} \\
    &= \sum_{d,n} \frac{Q^d}{n!} \ab<\phi_i, \phi_b, \phi_j,\tau, \ldots, \tau>_{0,n+3,d}^{X,T}. 
\end{align*}
This can also be defined using the evaluation maps
\[ (\on{ev}_i)_* \colon H_T^*(X_{0,n+3,d}) \to H_T^{*-2(c_1(X) \cdot d + n)}(X) \]
as
\[ \phi_i \star_{\tau} \phi_j = \sum_{d,n} \frac{Q^d}{n!} (\on{ev}_3)_* \ab(\ev_1^*(\phi_i) \ev_2^*(\phi_j) \prod_{i=4}^{n+3} \ev_i^*(\tau) \cap [X_{0,n+3,d}]^{\vir}) \in H_T^*(X)\llbracket Q \rrbracket \llbracket\tau_0,\ldots,\tau_n\rrbracket. \]

\subsection{Quantum connection}%
\label{sub:Quantum connection}

We will define
\[ \nabla_i \colon H_T^*(X)[z] \llbracket Q \rrbracket \llbracket\tau\rrbracket \to z^{-1} H_T^*(X)[z] \llbracket Q \rrbracket \llbracket\tau^0, \ldots, \tau^N\rrbracket \]
by setting
\[ \nabla_i = \pdv{}{\tau^i} + \frac{1}{z} (\phi_i \star). \]
We can view $z$ as the loop variable by setting $\wh{T} = T \times \C^{\times}$. If the extra copy of $\C^{\times}$ acts trivially on $X$, then
\[ H_{\wh{T}}^*(X) = H_T^*(X)[z]. \]
This has a fundamental solution
\[ M(\tau) \colon H_{\wh{T}}^*(X) \llbracket Q, \tau \rrbracket \to H_{\wh{T}}^*(X)_{\mr{loc}} \llbracket Q, \tau \rrbracket \]
where
\[ H_{\wh{T}}^*(X)_{\mr{loc}} \coloneqq H_{\wh{T}}^*(X) \otimes_{\Q[\lambda,z]} \Q(\lambda(z)). \]
This satisfies the differential equation
\[ z \pdv{}{\tau^i} M(\tau) = M(\tau) (\phi_i \star), \]
which is equivalent to
\[ \pdv{}{\tau^i} \circ M(\tau) = M(\tau) \circ \nabla_i. \]
The solution has the form
\[ (M(\tau) \phi_i, \phi_j) = (\phi_i, \phi_j) + \ab<\!\!\! \ab< \phi_i, \frac{\phi_j}{z-\psi}>\!\!\!>_{0,2}^{X,T}. \]

\subsection{Shift operators}%
\label{sub:Shift operators}

Let $k \colon \C^{\times} \to T$ be a cocharacter of $T$. Then define a $\wh{T}$-action $\rho_k$ on $X$ by
\[ \rho_k(t,x) x = t u^k \cdot x \]
for $t \in T, u \in \C^{\times}, x \in X$. Under the group automorphism
\[ \phi_k \colon \wh{T} \to \wh{T} \qquad \phi_k(t,u) = (tu^{-k}, u), \]
the identity map $(X, \rho_0) \to (X, \rho_k)$ is $\wh{T}$-equivariant, so we obtain isomorphisms
\[ \Phi_k \colon H_{\wh{T}, \rho_0}^*(X) \to H_{\wh{T}, \rho_k}^*(X). \]

Now define the bundle
\[ E_k = (X \times (\C^2 \setminus 0)) / \C^{\times}, \]
where $\C^{\times}$ acts by
\[ s \cdot (x, v_1, v_2) = (s^k x, s^{-1}v_1, s^{-1} v_2). \]
This is an $X$-bundle over $\P^1$ with an action on $\wh{T}$ by
\[ (t,u) \cdot [x, (v_1, v_2)] = [t \cdot x, (v_1, u v_2)]. \]
Setting $0 = [1,0]$ and $\infty = [0,1]$, we see that $\wh{T}$ acts on $X_0$ by $\rho_0$ and $X_{\infty}$ by $\rho_k$.

\begin{defn}
    A cocharacter $k \colon \C^{\times} \to T$ is \textit{seminegative} if all weights of $H^0(X, \mc{O})$ are nonpositive with respect to $k$ and is \textit{negative} if all nonzero weights of $H^0(X, \mc{O})$ are negative.
\end{defn}

\begin{lem}
    If $k$ is seminegative, then $E_k$ is semiprojective.
\end{lem}

Now let $\pi \colon E_k \to \P^1$ be the projection. We now consider \textit{section classes}, which are those effective classes in $H_2(E_k, \Z)$ satisfying $\pi_* d = [\P^1]$. For the $\C^{\times}$-action on $X$ given by $k$, there is a unique fixed component $F_{\mr{min}}$ whose normal weights are all positive (one way to see this is to consider the moment map of the corresponding circle action). Therefore, there is a minimal section class $\sigma_{\min}$ corresponding to $F_{\min}$.

\begin{lem}
    Given $\tau \in H_T^*(X)$, there exists $\wh{\tau} \in H_{\wh{T}}^*(E_k)$ such that $\wh{\tau}|_{X_0} = \tau$ and $\wh{\tau}|_{X_{\infty}} = \Phi_k(\tau)$.
\end{lem}


\begin{lem}
    If $k$ is seminegative, then
    \[ \on{Eff}(E_k)^{\mr{sec}} = \sigma_{\min} + \on{Eff}(X). \]
\end{lem}

\begin{defn}
    Let $k \colon \C^{\times} \to T$ be seminegative. Given $\tau \in H_T^*(X)$, we define the \textit{shift operator} 
    \[ \wt{\mathbb{S}}_k \colon H_{\wh{T}, \rho_0}^*(X) \llbracket Q \rrbracket \to H_{\wh{T}, \rho_k}^*(X) \llbracket Q \rrbracket \] 
    by the formula
    \[ (\wt{\mathbb{S}}_k(\tau) \alpha, \beta) = \sum_{\wh{d} \in \on{Eff}(E_k)^{\mr{sec}}} \frac{Q^{\wh{d} - \sigma_{\min}}}{n!} \ab< (\iota_0)_* \alpha, (\iota_{\infty})_* \beta, \wh{\tau}, \ldots, \wh{\tau}>_{0,n+2,\wh{d}}^{E_k, \wh{T}}, \]
    where $\alpha \in H_{\wh{t}, \rho_0}^*(X)$ and $\beta \in H_{\wh{T}, \rho_k}^*(X)$. We also define
    \[ \bS_k(\tau) = \Phi_k^{-1} \circ \wh{\bS}_k(\tau). \]
\end{defn}

\begin{thm}
    We have the formula
    \[ M(\tau) \circ \bS_k(\tau) = \mc{S}_k \circ M(\tau), \]
    where $\mc{S}_k$ is defined via the commutative diagram
    \begin{equation*}
    \begin{tikzcd}
        H_{\wh{T}}^*(X)_{\mr{loc}} \ar{rr}{\mc{S}_k} \ar{d} & & H_{\wh{T}}^*(X)_{\mr{loc}} \ar{d}{\iota^*} \\
        H_{\wh{T}}^*(X^T)_{\mr{loc}} \ar{rr}{\bigoplus_i \Delta_i(k) e^{-2k\delta_{\lambda}}} & & H_{\wh{T}}^*(X^T)_{\mr{loc}}.
    \end{tikzcd}
    \end{equation*}
    Here, we define
    \[ \Delta_i(k) = Q^{\sigma_i - \sigma_{\min}} \prod_{\alpha} \prod_{j=1}^{\on{rk} N_{i,\alpha}} \frac{\prod_{c=-\infty}^0 (\rho_{i,\alpha,j} + \alpha + cz)}{\prod_{c=-\infty}^{-\alpha \cdot k} (\rho_{i,\alpha,j} + \alpha + cz)} \in H_{\wh{T}}^*(F_i)_{\mr{loc}} \llbracket Q \rrbracket, \]
    where 
    \[ N_i = N_{F_i/X} = \bigoplus_{\alpha} N_{i,\alpha} \]
    is the normal bundle of $F_i$ in $X$ and $\rho_{i,\alpha,j}$ are its Chern roots.
\end{thm}

The idea of the proof is to decompose
\[ E_{k,0,n+2,\wh{d}}^{\wh{T}} = \bigsqcup_i \bigsqcup_{I_1 \cup I_2 = [n+2]} \bigsqcup_{d_0 + d_{\infty} + \wh{\sigma} = \wh{{d}}} (X_0)_{0,I_1 \sqcup p, d_0}^T \times_{F_i} (X_{\infty})_{0,I_2 \sqcup q, d_{\infty}}^T. \]
Using the exact sequence
\[ 0 \to \Aut(C,x) \to \on{Def}(f) \to T^1 \to \on{Def}(C,x) \to \on{Obs}(f) \to T^2 \to 0, \]
we obtain the explicit formulae
\begin{align*}
    \Aut(C,x)^m &= \Aut(C_0,x_0)^m + \Aut(C_{\infty}, x_{\infty})^m \\
    \on{Def}(C,x)^m &= \on{Def}(C_0, x_0)^m \oplus \on{Def}(C_0, x_0)^m \oplus T_p C_0 \otimes T_p \P^1 \oplus T_q C_{\infty} \otimes T_q \P^1.
\end{align*}
This gives the virtual normal bundle, and using virtual localization, we obtain
\[ (\wt{\bS}_k(\tau) \alpha, \beta) = (\wt{\mc{S}}_k M(\tau, z) \alpha, M'(\tau', -z) \beta), \]
where
\[ M'(\tau', z) = \Phi_k \circ M(\tau, z) \circ \Phi_k^{-1}. \]
Using the unitarity property of $M$, we obtain the desired result.





\end{document} 

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

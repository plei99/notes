\documentclass[leqno, openany]{memoir}
\setulmarginsandblock{3.5cm}{3.5cm}{*}
\setlrmarginsandblock{3cm}{3.5cm}{*}
\checkandfixthelayout

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
%\usepackage{MnSymbol}
\usepackage{bm}
\usepackage{accents}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{automata,positioning}
\usepackage{tikz-cd}
\usepackage{forest}
\usepackage{braket} 
\usepackage{listings}
\usepackage{mdframed}
\usepackage{verbatim}
\usepackage{physics}
\usepackage{stmaryrd}
\usepackage{mathrsfs} 
\usepackage{ulem} 
%\usepackage{/home/patrickl/homework/macaulay2}

%font
\usepackage[sc]{mathpazo}
\usepackage{eulervm}
\usepackage[scaled=0.86]{berasans}
\usepackage{inconsolata}
\usepackage{microtype}

%CS packages
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{algorithm}

% typeset and bib
\usepackage[english]{babel} 
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage[backend=biber, style=alphabetic]{biblatex}
\usepackage[bookmarks, colorlinks, breaklinks]{hyperref} 
\hypersetup{linkcolor=black,citecolor=black,filecolor=black,urlcolor=blue}

% other formatting packages
\usepackage{float}
\usepackage{booktabs}
\usepackage[shortlabels]{enumitem}
\usepackage{csquotes}
\usepackage{titlesec}
\usepackage{titling}
% \usepackage{fancyhdr}
% \usepackage{lastpage}
\usepackage{parskip}

\usepackage{lipsum}

% delimiters
\DeclarePairedDelimiter{\gen}{\langle}{\rangle}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}


\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{quest}[thm]{Question}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{defns}[thm]{Definitions}
\newtheorem{con}[thm]{Construction}
\newtheorem{exm}[thm]{Example}
\newtheorem{exms}[thm]{Examples}
\newtheorem{notn}[thm]{Notation}
\newtheorem{notns}[thm]{Notations}
\newtheorem{addm}[thm]{Addendum}
\newtheorem{exer}[thm]{Exercise}

\theoremstyle{remark}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{rmks}[thm]{Remarks}
\newtheorem{warn}[thm]{Warning}
\newtheorem{sch}[thm]{Scholium}


% unnumbered theorems
\theoremstyle{plain}
\newtheorem*{thm*}{Theorem}
\newtheorem*{prop*}{Proposition}
\newtheorem*{lem*}{Lemma}
\newtheorem*{cor*}{Corollary}
\newtheorem*{conj*}{Conjecture}

% unnumbered definitions
\theoremstyle{definition}
\newtheorem*{defn*}{Definition}
\newtheorem*{exer*}{Exercise}
\newtheorem*{defns*}{Definitions}
\newtheorem*{con*}{Construction}
\newtheorem*{exm*}{Example}
\newtheorem*{exms*}{Examples}
\newtheorem*{notn*}{Notation}
\newtheorem*{notns*}{Notations}
\newtheorem*{addm*}{Addendum}


\theoremstyle{remark}
\newtheorem*{rmk*}{Remark}

% shortcuts
\newcommand{\Ima}{\mathrm{Im}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\G}{\mathbb{G}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\renewcommand{\k}{\Bbbk}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\M}{\overline{M}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\h}{\mathfrak{h}}
\newcommand{\n}{\mathfrak{n}}
\renewcommand{\b}{\mathfrak{b}}
\newcommand{\ep}{\varepsilon}
\newcommand*{\dt}[1]{%
   \accentset{\mbox{\Huge\bfseries .}}{#1}}
\renewcommand{\abstractname}{Official Description}
\newcommand{\mc}[1]{\mathcal{#1}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\mf}[1]{\mathfrak{#1}}
\newcommand{\mr}[1]{\mathrm{#1}}
\newcommand{\ms}[1]{\mathsf{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\bir}{\sim_{\mr{bir}}}

\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Def}{Def}
\DeclareMathOperator{\Bl}{Bl}
\DeclareMathOperator{\NE}{NE}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\spec}{Spec}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\proj}{Proj}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\depth}{depth}
\DeclareMathOperator{\coker}{coker}

% Section formatting
\titleformat{\section}
    {\Large\sffamily\scshape\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[runin]
    {\large\sffamily\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}[runin]{\normalfont\itshape}{\thesubsubsection}{1em}{}

\title{COURSE TITLE}
\author{Lectures by INSTRUCTOR, Notes by NOTETAKER}
\date{SEMESTER}

\newcommand*{\titleSW}
    {\begingroup% Story of Writing
    \raggedleft
    \vspace*{\baselineskip}
    {\Huge\itshape Defomation Theory Graduate Student Seminar \\ Spring 2021}\\[\baselineskip]
    {\large\itshape Notes by Patrick Lei}\\[0.2\textheight]
    {\Large Lectures by Various}\par
    \vfill
    {\Large \sffamily Columbia University}
    \vspace*{\baselineskip}
\endgroup}
\pagestyle{simple}

\chapterstyle{ell}


%\renewcommand{\cftchapterpagefont}{}
\renewcommand\cftchapterfont{\sffamily}
\renewcommand\cftsectionfont{\scshape}
\renewcommand*{\cftchapterleader}{}
\renewcommand*{\cftsectionleader}{}
\renewcommand*{\cftsubsectionleader}{}
\renewcommand*{\cftchapterformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand*{\cftsubsectionformatpnum}[1]{~\textbullet~#1}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}
\renewcommand{\cftsubsectionafterpnum}{\cftparfillskip}
\setrmarg{3.55em plus 1fil}
\setsecnumdepth{subsection}
\maxsecnumdepth{subsection}
\settocdepth{subsection}

\begin{document}
    
\begin{titlingpage}
\titleSW
\end{titlingpage}

\thispagestyle{empty}
\section*{Disclaimer}%
\label{sec:disclaimer}

These notes were taken during the seminar using the \texttt{vimtex} package of the editor \texttt{neovim}. 
Any errors are mine and not the speakers'. 
In addition, my notes are picture-free (but will include commutative diagrams) and are a mix of my mathematical style and that of the lecturers.
If you find any errors, please contact me at \texttt{plei@math.columbia.edu}.

\vspace*{1cm}

\noindent\textbf{Seminar Website:}  \url{https://www.math.columbia.edu/~dejong/seminar.html}
\newpage

\tableofcontents

\chapter{Johan (Sep 24): Schlessinger's Paper}%
\label{cha:johan_sep_24_schlessinger_s_paper}

The paper by Schlessinger is titled \textit{Functors of Artin Rings}. Throughout this lecture, $k$ is a field, $\mc{C}$ is the category of Artinian local $k$-algebras $A, B, C, \ldots$ with residue field $k$, and $\wh{\mc{C}}$ is the category of Noetherian complete local $k$-algebras $R, S, \ldots$ with residue field $k$.

\begin{rmk}
    Every $R \in \wh{\mc{C}}$ is of the form $k[[x_1, \ldots, x_n]] / (f_1, \ldots, f_m)$ by the Cohen structure theorem. Then $R \in \mc{C}$ if and only if and only if $(f_1, \ldots, f_m)$ contains ${(x_1, \ldots, x_n)}^N$ for some $N$.
\end{rmk}

\begin{rmk}
    In the paper, there is a more general setup, where $\Lambda$ is a complete local Noetherian ring with residue field $k$. Then $\mc{C}_{\Lambda}, \wh{\mc{C}}$ are defined analogously, which will allow things like $\Lambda = \Z_p$.
\end{rmk}

The idea of deformation theory is to look at functors $F \colon \mc{C} \to \ms{Set}$.

\begin{exm}
    Given $R \in \wh{\mc{C}}$, we set $h_R \colon \mc{C} \to \ms{Set}$ sending $A \mapsto \Hom_{\wh{\mc{C}}}(R, A)$. This is not necessarily representable because $R \notin \mc{C}$ in general, but it is pro-representable.
\end{exm}

\begin{defn}
    A functor $F$ is \textit{pro-representable} if $F \simeq h_R$ for some $R \in \wh{\mc{C}}$.
\end{defn}

\begin{exm}
    Let $M$ be a variety over $k$ and $m \in M(k)$. Then define
    \[ \mr{Def}_{M,m}(A) = \qty{ \Spec A \xrightarrow{m_A} M \mid m_A |_{\Spec k} = m}. \]
    It is easy to see that $\mr{Def}_{M,m}(A)$ is pro-representable by $\wh{\mc{O}}_{M,m}$.
\end{exm}

Observe that $h_R(k) = \qty{*}$ is a singleton. Also note that $h_R(A \times_B C) = h_R(A) \times_{h_R(B)} h_R(C)$. Here, $A \times_B C$ is the fiber product of rings and not the tensor product.

Now consider the following conditions on $F$: let $A \to B \gets C$ be a diagram in $\mc{C}$ and consider the morphism
\[ F(A \times_B C) \xrightarrow{(*)} F(A) \times_{F(B)} F(C). \]
\begin{itemize}
    \item $(H_1)$ The morphism $(*)$ is surjective if $C \twoheadrightarrow B$;
    \item $(H_2)$ The morphism $(*)$ is bijective if $C = k[\ep] \twoheadrightarrow k = B$;
    \item $(H_3)$ $\dim_k(t_F) < \infty$ (later, we will see that we need $H_2$ for formulate this). Here, $t_F$ is the tangent space to $F$;
    \item $(H_4)$ The morphism $(*)$ is bijective if $C \twoheadrightarrow B$.
\end{itemize}

\begin{exm}
    Fix a group $G$ and a representation $\rho_0 \colon G \to GL_n(k)$. Now define
    \[ \mr{Def}_{\rho_0}^{\text{naive}}(A) = \qty{\rho \colon G \curvearrowright A^{\oplus n} \mid \rho \pmod{m_A} \cong \rho_0} /\cong. \]
    Better, we will define
    \[ \mr{Def}_{\rho_0}(A) = \qty{\rho \colon G \curvearrowright A^{\oplus n} \mid \rho \pmod{m_A} = \rho_0} / \ker(GL_n(A) \to GL_n(k)). \]
    In general these functors fail $(H_4)$ and $\mr{Def}_{\rho_0}^{\text{naive}}$ even fails $(H_2)$.

    Namely, if $H = \Z$ and $\rho_0$ is the trivial representation, then for $\mr{Def}_{\rho_0}^{\text{naive}}$, we are looking at subsets of
    \[ GL_n(A \times_B C)/\text{conj} \to GL_n(A)/\text{conj} \times_{GL_n(B)/\text{conj}} GL_n(C)/\text{conj}. \]
    This morphism is always surjective, but in general it is not injective.

    For example, if $A = k[\ep_1], B = k, C = k[\ep_2]$, we can look at elements of the form $1 + \ep_1 T_1 + \ep_2 T_2$ and see that on the left we can only conjugate together, while on the right we can conjugate both $T_1, T_2$ arbitrarily. Here $A \times_B C = k[\ep_1, \ep_2] = k[x_1,x_2] / (x_1^2, x_1 x_2, x_2^2)$.
\end{exm}

\begin{defn}
    A natural transformation $t \colon F \to G$ of functors on $\mc{C}$ is \textit{smooth} if for all surjections $B \twoheadrightarrow A$ the map $F(B) \to F(A) \times_{G(A)} G(B)$ is surjective.
\end{defn}

Note that this is equivalent to the existence of a lift in the diagram below:
\begin{equation*}
\begin{tikzcd}
    \Spec A \ar{r} \ar[hookrightarrow]{d} & M \ar{d}{f} \\
    \Spec B \ar{r} \ar[dashrightarrow]{ur} & N.
\end{tikzcd}
\end{equation*}


This definition is motivated by the following example: let $f \colon M \to N$ be a morphism of varieties over $k$. Let $m \in M(k), n = f(m) \in N(k)$. Then the following are equivalent:
\begin{enumerate}
    \item $\mr{Def}_{M,m} \to \mr{Def}_{N,n}$ is smooth.
    \item $f$ is smooth at $m$.
\end{enumerate}

\begin{defn}
    We say $F$ has a \textit{hull} if and only if $F(k) = \qty{*}$ and there exists a smooth $t \colon h_R \to F$ for some $R \in \wh{C}$ which induces an isomorphism $t_R \cong t_F$.
\end{defn}

Now we will say a bit about tangent spaces.
\begin{enumerate}
    \item When $F(k) = \qty{*}$, then $t_F = F(k[\ep])$.
    \item If $F$ satisfies $(H_2)$ and $F(k) = \qty{*}$, then $t_F$ has a natural $k$-vector space structure. Here, $H_2$ gives $F(k[\ep_1, \ep_2]) \to F(k[\ep]) \times F(k[\ep])$ is a bijection, and then we take $\ep_1 \mapsto \ep, \ep_2 \mapsto \ep$, which defines addition.
    \item $t_R = \Hom_k(\mf{m}_R / \mf{m}_R^2, k) = \Hom_{\wh{C}}(R, k[\ep]) = h_R(k[\ep]) = t_{(h_R)}$.
\end{enumerate}

\begin{thm}[Schlessinger]
    Asssume that $F(k) = \qty{*}$. Then the conditions $(H_1), (H_2), (H_3)$ hold for $F$ if and only if $F$ has a hull. In addition, $(H_3)$ and $(H_4)$ hold if and only if $F$ is pro-representable.
\end{thm}

\begin{proof}[Very rough idea of proof of $\Rightarrow$ for the hull case]
    Let $n = \dim_k(t_F)$. Then $(H_2)$ and $n < \infty$ imply the following: Let $S = k[[x_1, \ldots, x_n]]$ and $\mf{m} = \mf{m}_S = (x_1, \ldots, x_n)$. We can find $\xi_1 \in F(S/\mf{m}^2)$ such that
    \[ t_S = \Hom_{\wh{\mc{C}}}(S, k[\ep]) \xrightarrow{\xi_1} t_F \]
    is an isomorphism.

    Next, we will choose $q \geq 2$ and consider pairs $(J, \xi)$ where $\mf{m}^{q+1} \subset J \subset \mf{m}^2$ and $\xi \in F(S/J)$ such that $\xi \mapsto \xi_1 \in F(S/\mf{m}^2)$. Say that $(J, \xi) \leq (J', \xi')$ if $J \subset J'$ and $\xi \mapsto \xi'$. Choose a minimal pair $(J, \xi)$ for this ordering. We can choose $J_{q}$ so that $\mf{m}^{q+1} + J_{q+1} = J_q$ and $\xi_{q+1}$ maps to $\xi_q$ for bookkeeping purposes.

    Choose $R = \lim S/J_q$, which is a quotient of $S$. Set $t \colon h_R \to F$ given by sending $\varphi \colon R \to A$ to the following: choose $q$ such that $\varphi$ factors as $R \to S/J_q \xrightarrow{\varphi_q} A$ and take $\xi_q \mapsto F(\varphi_q)(\xi_q) \in F(A)$.

    Finally, we must show that $t$ is smooth. Consider the diagram
    \begin{equation*}
    \begin{tikzcd}
        S \ar{dd} \ar{r} \ar[dashrightarrow,bend left=30]{drrr}{\varphi} & S/\mf{m}^{q+1} \ar[dashrightarrow,swap]{dr}{\ol{\varphi}'} \ar[dashrightarrow]{drr}{\ol{\varphi}} \\ 
        & & S/J_q \times_A B \ar{dl}{pr_1} \ar{r} & B \ar[twoheadrightarrow]{d} \\
        R \ar{r} & S/J_q \ar{rr} \ar[dashrightarrow,bend left=20]{ur}{\psi} & & A
    \end{tikzcd}
    \end{equation*}
    with $B \ni \wt{\xi} \mapsto \xi \in A$ and $S/J_q \ni \xi_q \mapsto \xi$. First, choose $\varphi \colon S \to B$ making the diagram commute. We may increase $q$ such that $\varphi(\mf{m}^{q+1}) = 0$, so we now have $\ol{\varphi} \colon S/\mf{m}^{q+1} \to B$. Now consider the fiber product $S/J_q \times_A B$ and $pr_1 \colon S/J_q \times_A B \to S/J_q$, so we obtain $\ol{\varphi}' \colon S/\mf{m}^{q+1} \to S/J_q \times_A B$. By $(H_1)$, we obtain some $\wt{\wt{\xi}} \in F(S/J_q \times_A B)$ mapping to $\wt{\xi}$ and $\xi_q$. We may now assume that $B \to A$ is a small extension, which means that $\dim_k \ker(B \to A) = 1$, and thus $pr_1$ is a small extension. Therefore, either $\ol{\varphi}'$ is surjective or its image maps isomorphically via $pr_1$ to $S/J_q$., so we have $\psi$ which gives $R \to B$ lifting our given $r \to A$.

    The tricky part is to show that $F(\psi)(\psi_q) = \wt{\wt{\xi}}$, and this step is deliberately omitted.
\end{proof}

A generalization of this is as follows. Consider a functor $\mc{F} \colon \mc{C} \to \ms{Grpd}$. We say that $\mc{F}$ satisfies the \textit{Rim-Schlessinger condition} (RS) if
\[ \mc{F}(A \times_B C) \to \mc{F}(A) \times_{\mc{F}(B)} \mc{F}(C) \]
is an equivalence whenever $C \twoheadrightarrow B$. Let $x_0 \in \mc{F}(k)$ and set 
\[ \ol{\mc{F}}_{x_0} \colon \mc{C} \to \ms{Set} \qquad A \mapsto \qty{(x, \alpha) \mid x \in \mc{F}(A), \alpha \colon X_0 \to x|_k} / \cong, \]
where $(x,\alpha) \cong (x', \alpha')$ means that $\varphi \colon x \to x'$ such that the diagram
\begin{equation*}
\begin{tikzcd}
    x|_k \ar{r}{\varphi} & x'|_k \\
    x_0 \ar{r}{\mr{id}} \ar{u}{\alpha} & x_0 \ar{u}{\alpha'}
\end{tikzcd}
\end{equation*}
commutes.

\begin{thm}
    If $\mc{F}$ has (RS) then $\ol{\mc{F}}_{x_0}$ has $(H_1)$ and $(H_2)$. Therefore, if $\dim t_{\ol{\mc{F}}_{x_0}} < \infty$ then $\ol{\mc{F}}_{x_0}$ has a hull.
\end{thm}

In this situation, $\ol{\mc{F}}_{x_0}$ has $(H_4)$ if and only if $\Aut_A(x) \twoheadrightarrow \Aut_B(x|_B)$ whenever $A \twoheadrightarrow B$ and $x \in \mc{F}_{x_0}(A)$.

\begin{exm}
    Let $\mc{F}(A)$ be the category of representations $G \curvearrowright A^{\oplus n}$ with morphisms being isomorphisms of representations. This has (RS).
\end{exm}

\begin{exm}
    Let $\mc{F}(A)$ be the category of smooth projective families of curves of genus $g$ over $A$ with morphisms being isomorphisms. This has (RS).
\end{exm}

Returning to the example of representations, it turns out that $t_{\mr{Def}_{\rho_0}} = H^1(G, M_{n \times n}(k))$, where $G$ acts on $M_{n \times n}(k)$ via $\rho_0$ by conjugation.

\begin{exm}
    Consider $G = \Z \oplus \Z$ and $\rho_0$ to be the trivial representation on $k^{\oplus 2}$. Then $t_{\mr{Def}_{\rho_0}} = H^1(\Z^2, M_2(k)) = M_2(k) \oplus M_2(k)$. Given two matrices $A, B$, we have the representation
    \begin{align*}
        \Z^2 \to GL_2(k[\ep]) & (1,0) \mapsto \mqty(\dmat{1,1}) + \ep A \\
        & (0,1) \mapsto \mqty(\dmat{1,1}) + \ep B.
    \end{align*}
    We get a hull $R$ with $h_R \to \mr{Def}_{\rho_0}$. We know that $R$ is a some quotient of $k[[a_{11}, \ldots, a_{22}, b_{11}, \ldots, b_{22}]]$ with $\rho$ looking like
    \[ (1,0) \mapsto \mqty(\dmat{1,1}) + A \qquad (0,1) \mapsto \mqty(\dmat{1,1}) + B, \]
    and of course $R$ is the quotient of the power series ring by the ideal generated by the coefficients of $AB - BA$.
\end{exm}

\chapter{Ivan and Cailan (Oct 1): Deformations of Schemes}%
\label{cha:ivan_and_cailan_oct_1_deformations_of_schemes}

\section{Deformations of affine schemes}%
\label{sec:deformations}

We are looking for a Cartesian diagram of schemes
\begin{equation*}
\begin{tikzcd}
    X \ar{r} \ar{d} & \mc{X} \ar{d}{\pi} \\
    \Spec k \ar{r} & S
\end{tikzcd}
\end{equation*}
where $\pi$ is flat and surjective and $S$ is surjective. This is called an \textit{deformation} of $X$ over $S$. For the beginning of this lecture (the part given by Ivan), we are interested in $S = \Spec A$, where $A \in \mc{C}^*$ (this category was defined in the previous lecture). This case is called a \textit{local deformation}, and in the face where $A$ is Artinian, it is called an \textit{infinitesimal deformation}.

For the ring theorists, we will make the following digression. Let $A$ be a ring and $I \subset A$ be an ideal with $I^2 = 0$. Suppose that $\ol{B}$ is an $A/I$-algebra, $J$ is an $\ol{B}$-module, and $h \colon I \to J$ is an $A$-module map. Then we are interested in a diagram
\begin{equation*}
\begin{tikzcd}
    0 \ar{r} & J \ar{r} & ? \ar{r} & \ol{B} \\
    0 \ar{r} & I \ar{u}{h} \ar{r} & A \ar{u} \ar{r} & A/I \ar{u} \ar{r} & 0,
\end{tikzcd}
\end{equation*}
which we will call a deformation of $A$. Here are some interesting questions:
\begin{enumerate}
    \item Is such a deformation unique?
    \item If $\ol{B}$ is flat over $A/I$, does that mean that $B$ is flat over $A$?
\end{enumerate}

Returning to the case of schemes, we will say that two deformations $\mc{X}, \mc{X}'$ of $X$ over $S$ are isomorphic if there exists an $S$-isomorphism $\phi \colon \mc{X}' \to \mc{X}$ commuting with the inclusions of the central fibers $X \to \mc{X}, \mc{X}'$.

\begin{exm}
    The most basic example of a family is the trivial deformation
    \begin{equation*}
    \begin{tikzcd}
        X \ar{r} \ar{d} & X \times_k S \ar{d} \\
        \Spec k \ar{r} & S.
    \end{tikzcd}
    \end{equation*}
\end{exm}

\begin{defn}
    A scheme $X$ is \textit{rigid} if all deformations of $X$ are isomorphic to the trivial deformation.
\end{defn}

\begin{thm}
    If $X$ is a smooth affine $k$-scheme and $S = \Spec A$ for some local Artinian ring, then $X$ is rigid.
\end{thm}

\begin{defn}
    A closed immersion $i \colon S_0 \hookrightarrow S$ of schemes is called a \textit{first (resp. nth) order thickening} if the ideal sheaf $\mc{I} = \ker(i^{\flat} \colon \mc{O}_S \to \mc{O}_{S_0})$ satisfies $I^2 = 0$ (resp. $I^{n+1} = 0$).
\end{defn}

\begin{defn}
    A morphism $f \colon X \to S$ is called \textit{formally smooth} (resp. unfamified, resp. \'etale) if for all first order thickenings $i \colon T_0 \to T$ of affine schemes and diagrams
    \begin{equation*}
    \begin{tikzcd}
        T_0 \ar{r}{u_0} \ar{d}{i} & X \ar{d}{f} \\
        T \ar{r} \ar[dashrightarrow]{ur}{\wt{u_0}} & S
    \end{tikzcd}
    \end{equation*}
    there exists a lift $\wt{u_0}$ (resp. there is at most one such $\wt{u_0}$, resp. there exists a unique $\wt{u}_0$).
\end{defn}

\begin{exm}\leavevmode
    \begin{enumerate}
        \item Open immersions are formally \'etale. This is cleaer because $T_0, T$ have the same underlying topological space.
        \item Closed immersions are formally unramified. This is clear because $X \to S$ induces an injection on $T$-points.
        \item $\A^n_S \to S$ is formally smooth. To see this, assume $S = \Spec R$ is affine and then consider the corresponding lifting problem in commutative algebra.
    \end{enumerate}
\end{exm}

\begin{prop}
    The classes of formally smooth (resp. \'etale, resp. unramified) morphisms are closed under base change, composition, and products and local on both source and target.
\end{prop}

\begin{defn}
    A $f \colon X \to S$ is \textit{smooth} if it is formally smooth and locally of finite presentation.
\end{defn}

We will now consider differentials. Let $X = \Spec A$ be an affine scheme over $k$ and choose a $k$-point and consider the diagram
\begin{equation*}
\begin{tikzcd}
    \Spec k \ar{r} \ar{d} & X \ar{d} \\
    \Spec k[\ep] \ar{r} & \Spec k.
\end{tikzcd}
\end{equation*}
If $X$ is smooth, then there exists a lift $\Spec k[\ep] \to X$. But this is given by a morphism
\[ \wt{\phi} \colon A \to k[\ep] / \ep^2 \qquad a \mapsto \phi(a) + d(a) \ep. \]
This motivates the following definition:
\begin{defn}
    Let $R \to A$ be a morphism of rings and $M$ be an $A$-module. A \textit{derivation} $d \colon A \to M$ is an $A$-linear map satisfying the Leibniz rule.
\end{defn}

\begin{prop}
    There exists an $A$-module $\Omega^1_{A/k}$ equipped with a derivation $d \colon \Omega^1_{A/k}$ that is universal among derivations from $A$. This means that all derivations $\wt{d} \colon A \to M$ factor through $d$, and formally, we have an identity
    \[ \mr{Der}_R(A,M) \simeq \Hom_A(\Omega^1_{A/k}, M). \]
\end{prop}

\begin{defn}
    For an $A$-module $M$ with derivation $d \colon A \to M$, define the ring $A[M]$ as the module $A \oplus M$ with the multiplication
    \[ (a,m) \cdot (a', m') = (aa', am' + a'm). \]
    There is a sequence $\phi \colon A \to A[M] \to A$.
\end{defn}

\begin{prop}
    Let $S \gets R \to A \to B$ be a diagram of rings. Then
    \begin{enumerate}
        \item $\Omega^1_{A \otimes S / S} \simeq \Omega^1_{A/R} \otimes_R S$;
        \item The sequence $\Omega^1_{A/R} \otimes_A B \to \Omega^1_{B/R} \to \Omega^1_{B/A} \to 0$ is exact.
        \item If $B = A/I$ for some ideal $I$, we have an exact sequence
            \[ I/I^2 \to \Omega^1_{A/R} \otimes_A B \to \Omega^1_{B/R} \to 0. \]
        \item For all $f \in A$, we havae $\Omega^1_{A[f^{-1}]/R} \simeq \Omega^1_{A/R} \otimes_A A[f^{-1}]$.
    \end{enumerate}
\end{prop}

\begin{rmk}
    If $J = \ker(A \otimes_R A \to A)$, then $\Omega^1_{A/R} = J/J^2$.
\end{rmk}

\begin{thm}
    Let $f \colon X \to S$ be locally of finite presentation. The following are equivalent:
    \begin{enumerate}
        \item $f$ is smooth;
        \item $f$ is flat with smooth fibers;
        \item $f$ is flat and has smooth geometric fibers.
    \end{enumerate}
\end{thm}

We will finally return to deformation theory.

\begin{lem}
    Let $Z_0$ be a closed subscheme of $Z$ determined by a nilpotent ideal sheaf $N$. If $Z_0$ is affine, then so is $Z$.
\end{lem}
Proof of this result can be found in EGA, Chapter I.5.9. 

\begin{proof}[Proof of Theorem 2.1.3]
    Recall that we have a diagram of the form
    \begin{equation*}
    \begin{tikzcd}
        B \ar{r} & B_0 \\
        A \ar{u} \ar{r} & k \ar{u},
    \end{tikzcd}
    \end{equation*}
    where $A \to B$ is flat and $B_0 \simeq B \otimes_A k$ is a smooth $k$-algebra. We need to prove that $B_0 \simeq B \otimes_A k$. The first step is to prove this result for first-order deformations. Suppose that $A = k[\ep]$ is a square-zero extension. 
    \begin{lem}
        For a ring $R$ with $M, N$ flat over $R$, nilpotent ideal $I \subset R$, and $f \colon M \to N$, then if $f \otimes_R R/I$ is an isomorphism, then so is $f$.
    \end{lem}
    To prove the lemma, note that the cokernel of $f$ is preserved by $I$, so it must vanish. Returning to our case, we know that $B$ is a smooth $k[\ep]$-algebra. Now we obtain a square-zero extension $B_0[\ep]$ of $B_0$ and a diagram
    \begin{equation*}
    \begin{tikzcd}
        B \ar{r} & B_0 \\
        k[\ep] \ar{r}{f} \ar{r} & B_0[\ep] \ar{u}
    \end{tikzcd}
    \end{equation*}
    with a lift $B \to B_0[\ep]$. But now by the lemma, we have $B \otimes_{k[\ep]} k = B_0[\ep] \otimes_{k[\ep]} k$. The rest of the proof follows using an inductive argument that was verbalized but now written down.
\end{proof}

\section{Deformations of schemes}%
\label{sec:deformations_of_schemes}

The main theorem of this section is
\begin{thm}
    Assume $X$ is a smooth $R$-scheme. Then there is a bijection
    \[ \mr{Def}_X^{\mr{sm}}(k[I]) \simeq H^1(X, T_{X/k} \otimes I). \]
\end{thm}

\begin{proof}
    Let $\mc{X}'$ be a smooth deformation over $k[I]$. Then the diagram
    \begin{equation*}
    \begin{tikzcd}
        X \ar{r} \ar{d} & X' \ar{d} \\
        \Spec k \ar{r} & \Spec k[I]
    \end{tikzcd}
    \end{equation*}
    is cartesian. Then if $U_k = \Spec B_k$ is an affine cover of $X$ and $U_k' = \Spec D_k$ is an affine cover of $X'$, we have a $k[I]$-linear ring isomorphism
    \[ \varphi_k \colon k[I] \otimes_k B_k \to D_k \qquad (k,i) \otimes b \mapsto s(b) + i. \]
    Modulo $I$, $\varphi_k$ is the identity on $B_k$. Without loss of generality, we may assume that $U_{kj} = U_k \cap U_j$ is a distinguished open for both $U_k$ and $U_j$, so let $U_{kj} = \Spec B_{kj}$ and $U_{kj}' = \Spec D_{kj}$. Now note that both
    \[ \varphi_k, \varphi_j \colon k[I] \otimes_k B_{kj} \to D_{kj} \]
    induce the identity on $B_{kj}$ modulo $I$. Now we have the commutative diagram
    \begin{equation*}
    \begin{tikzcd}
        0 \ar{r} & I \ar{d}{\mr{id}} \ar{r} & D_{kj} \ar{d}{\varphi_j^{-1} \varphi_k} \ar{r} & B_{kj} \ar{d}{\mr{id}} \ar{r} & 0 \\
        0 \ar{r} & I \ar{r} & D_{kj} \ar{r} & B_{kj} \ar{r} & 0.
    \end{tikzcd}
    \end{equation*}
    \begin{lem}
        The morphism $g = \varphi_j^{-1} \varphi_k$ must be of the form
        \[ g(i+b) = i + b + \delta(b), \]
        where $\delta \colon B_{kj} \to I$ is a derivation. 
    \end{lem}
    In particular, this means that $\varphi_j^{-1} \circ \varphi_k(b, b') = (b, \alpha_{kj}(b) + b')$, where $\alpha_{kj} \colon B_{kj} \to I \otimes_k B_{kj}$ is a derivation.

    By definition, we have
    \begin{align*} 
        (T_{X/k} \otimes_k I)(B_{kj}) &= {\Hom_{B_{kj}}(\Omega^1_{B_{kj}/k}, B_{kj}) \otimes_k I} \\ 
        &= {\Hom_{B_{kj}}(\Omega^1_{B_{kj}/k}, B_{kj} \otimes_k I)} \\ 
        &= \mr{Der}_k(B_{kj}, B_{kj} \otimes_k I).
    \end{align*}
    Therefore, $\alpha_k \in H^0(B_{kj}, T_X \otimes_k I)$. Note that
    \[ \varphi_{\ell}^{-1} \circ \varphi_j \circ \varphi_j^{-1} \circ \varphi_{k}^{-1} = \varphi_{\ell}^{-1} \circ \varphi_k, \]
    which implies that
    \[ (b, \alpha_{j\ell}(b) + \alpha_{kj}(b) + b') = (b, \alpha_{k\ell}(b) + b') \]
    and thus $\qty{\alpha_{kj}} \in Z^1(\qty{U_k}, T_X \otimes_k I)$.

    If two deformations are the same, note that $\varphi_k$ is defined using a ring section $s_k \colon B_k \to D_k$ of the canonical map $\pi_k \colon D_k \to B_k$. If $\varphi_k'$ is defined using another section $s_k'$, then define $\theta_k = s_k' - s_k \in \mr{Der}(B_k, I \otimes_k B_k)$. We now compute
    \[ ({(\varphi_j')}^{-1} \circ \varphi_k' - \varphi_j^{-1} \circ \varphi_k)(b, b') = (0, \theta_k(b) - \theta_j(b)), \]
    and thus the two differ by the desired coboundaries.
\end{proof}

We will now consider some obstructions. We are looking for a diagram of the form
\begin{equation*}
\begin{tikzcd}
    X' \ar{r} \ar{d}{f} & X'' \ar{d} \\
    \Spec A' \ar{r} & \Spec A''.
\end{tikzcd}
\end{equation*}
for each pair $(j, k)$, we have a isomorphism $\psi_{jk} \colon V_j' \to V_k'$ and a cocycle
\[ c_{jk\ell} = \psi_{k\ell} \circ \psi_{jk} \circ \psi_{j\ell}^{-1}. \]
This induces $B_{jk\ell} \in \mr{Der}_A(D_{jk\ell}, J \otimes_A D_{k\ell}) = Z^2(U, T_{X'/A} \otimes_A J)$.

Now we will discuss some examples.
\begin{thm}
    Let $C$ be a smooth projective curve, $T = T_C$, and $K = \Omega^1_C$. We have the following table:
    \begin{table}[H]
        \centering
        \caption{Cohomology}
        \label{tab:label}
        \begin{tabular}{ccccc}
        \toprule
            & degree & $h^0$ & $h^1$ & $h^2$ \\
            \midrule
            $K$ & $2g-2$ & $g$ & $1$ & $0$ \\
            $T$ & $2-2g$ & $\ep$ & $\ep + 3g-3$ & 0 \\
            \bottomrule
        \end{tabular}
        where $\ep = 0$ where $g \geq 2$, $\ep = 1$ if $g = 1$, and $\ep = 3$ if $g = 0$. For $g \geq 2$, $\deg T < 0$, and by Riemann-Roch and Serre duality, we have $h^1(C, T_C) = 3g-3$.
    \end{table}
\end{thm}

\begin{thm}
    $\P^n$ has no infinitesimal deformations.
\end{thm}

\begin{proof}
    Consider the Euler sequence
    \[ 0 \to \mc{O} \to {\mc{O}(1)}^{\oplus n+1} \to T_{\P^n} \to 0 \]
    and use the long exact sequence in cohomology. Because positive degree line bundles have no higher cohomology, we have $H^1(T_{\P^n}) = 0$.
\end{proof}

\chapter{Kevin (Oct 08): Deformations of coherent sheaves}%
\label{cha:kevin_oct_08_deformations_of_coherent_sheaves}

There will be no mixed characteristic funny business during this lecture. Let $X$ be a projective $k$-scheme (proper might be fine, but this makes certain facts more true) and $\mc{F}$ be a coherent sheaf on $X$. Consider the deformation functor
\[ D_{\mc{F}} \colon \ms{Art}_k \to \ms{Set} \qquad A \mapsto \qty{\mc{F}_A \in \ms{Coh}(X_A) \mid \mc{F}_A |_X \cong \mc{F}, \mc{F}_A \text{ flat over }A }. \]
We want to study the properties of this functor, which means we will check Schlessinger's conditions:\footnote{Neither Kevin nor Johan knows why these conditions are called H} Let $A \to B \gets C$ be a diagram in $\mc{C}$ and consider the morphism
\[ D(B \times_A C) \xrightarrow{r} D(B) \times_{D(A)} D(C). \]
\begin{itemize}
    \item $(H_1)$ The morphism $r$ is surjective if $C \twoheadrightarrow A$;
    \item $(H_2)$ The morphism $r$ is bijective if $C = k[\ep] \twoheadrightarrow k = A$;
    \item $(H_3)$ $\dim_k(t_D) < \infty$ (later, we will see that we need $H_2$ for formulate this). Here, $t_D$ is the tangent space to $D$;
    \item $(H_4)$ The morphism $r$ is bijective if $C \twoheadrightarrow A$.
\end{itemize}
Recall from Johan's lecture that $(H_1), (H_2), (H_3)$ are equivalent to the existence of a hull and $(H_3), (H_4)$ are equivalent to $D$ being pro-representable.

We only need to check $(H_1)$ for small extensions, which are extensions by a $k$-vector spaace
\[ 0 \to I \to C \to A \to 0, \]
where $I$ is killed by the maximal ideal of $C$.

\begin{thm}
    The functor $D_{\mc{F}}$ admits a hull.
\end{thm}

\begin{lem}
    Let $(A, \mf{m})$ be a local Artinian ring.
    \begin{enumerate}
        \item If $\mf{m} M = M$, then $M \cong 0$.
        \item If $M \to N$ induces an isomorphism $M/\mf{m} M \cong N/\mf{m}N$ and $N$ is flat over $A$, then $M \cong N$.
        \item If $M$ is flat, then $M$ is free.
    \end{enumerate}
\end{lem}

\begin{proof}
    We know that $\mf{m}^d = 0$, so $\mf{m}^d M = 0$, and thus $M = \mf{m} M = \mf{m}^2 M = \cdots = \mf{m}^d M = 0$. Next, suppose $M \to N$ induces an isomorphism after killing $\mf{m}$. Then we know that the kernel and cokernel vanish because they are killed by $\mf{m}$, so $M \to N$ must be an isomorphism. The last part is left as an exercise.
\end{proof}

\begin{proof}[Proof of theorem]
    We will simply prove $(H_1), (H_2), (H_3)$:
    \begin{enumerate}
        \item Suppose that $C \twoheadrightarrow A$ is a small extension and consider a pair $(\mc{F}_B, \mc{F}_C) \in D(B) \times_{D(A)} D(C)$. We know that we have isomorphisms $\mc{F}_B |_{X_A} \cong \mc{F}_A, \mc{F}_c |_{X_A} \cong \mc{F}_A$, and so we take the fiber product
            \[ \mc{F}_{B \times_A C} \coloneqq \mc{F}_B \times_{F_A} \mc{F}_C. \]
            We only need to show that our sheaf is flat over $B \times_A C$ because it clearly restricts to $\mc{F}_B$ and $\mc{F}_C$. We can consider each sheaf as a module $M$, and so we know $M_B$ is free over $B$ by the lemma. Choose a basis $\qty{e_i}$. Also consider the diagram
            \begin{equation*}
            \begin{tikzcd}
                M_B \times_{M_A} M_C \ar{r} \ar{d} & M_C \ar{d}{v} \\
                M_B \ar{r}{u} & M_A.
            \end{tikzcd}
            \end{equation*}
            Then $M_A$ has $A$-basis $u(e_i)$. Because $M_C$ surjects onto $M_A$, we can lift the $u(e_i)$ to $f_i \in C$, and these form a $C$-basis for $M_C$. This all implies that $M_B \times_{M_A} M_C$ is free with basis $(e_i, f_i)$.
        \item It suffices to prove injectivity. Suppose $\mc{G} \in D(B \times_k k[\ep])$ maps to $(\mc{F}_B, \mc{F}_{k[\ep]}) \in D(B) \times D(k[\ep])$, and so we have morphisms
            \begin{equation*}
            \begin{tikzcd}
                \mc{G} \ar{r} \ar{d} & \mc{F}_{k[\ep]} \ar{d} \\
                \mc{F}_B \ar{r} & \mc{F}.
            \end{tikzcd}
            \end{equation*}
            We will prove that this diagram is Cartesian. By the lemma, the morphism $\mc{G} \to \mc{F}_B \times_{\mc{F}} \mc{F}_{k[\ep]}$ is an isomorphism.
        \item We will prove that $T_D = \Ext_X^1(\mc{F}, \mc{F})$. We will only prove this in the case where $\mc{F}$ is a vector bundle $\mc{E}$ of rank $r$. In this case, we have $\Ext_X^1(\mc{E}, \mc{E}) = H^1(X, \End(\mc{E}))$. Now we will associate cocycles to deformations. To each $\mc{E}_{k[\ep]}$, we will associate an open cover $(U_j)$ and 
            \[ h_{ij} \in \Aut(\mc{O}_{X_{k[\ep]}}^{\oplus r})(U_{ij}), \]
            and we write $g_{ij} + \ep f_{ij}$, where $g_{ij} \in \Aut_{\mc{O}_X^{\oplus r}}(U_{ij})$ and $f_{ij} \in \End(\mc{O}_X^{\oplus r})(U_{ij})$. The cocycle condition is that
            \[ g_{ik} + \ep f_{ik} = (g_{ij} + \ep f_{ij})(g_{jk} + \ep f_{jk}), \]
            which is the same as 
            \[ f_{ik} = g_{ij} f_{jk} + f_{ij} g_{jk}, \]
            which is exactly the \v{C}ech $1$-cocycle condition. Proving that equivalent cocycles give the same deformation is easy. \qedhere
    \end{enumerate}
\end{proof}

\begin{thm}
    The condition $(H_4)$ holds when $\mc{F}$ is simple, which means that $k \simeq \End_X(\mc{F})$.
\end{thm}

\section{Tangent-obstruction theory}%
\label{sec:tangent_obstruction_theory}

Suppose $D$ is a deformation functor. Then a \textit{tangent-obstruction theory} for $D$ is given by finite-dimensional $k$-vector spaces $(T^1, T^2)$. Suppose we have a small extension
\[ 0 \to I \to B \to A \to 0. \]
Then we have another exact sequence
\[ T^1 \otimes_k I \to D(B) \to D(A) \xrightarrow{\mr{ob}} T^2 \otimes_k I, \]
which means that
\begin{enumerate}
    \item $\xi_A \in D(A)$ lifts to $D(B)$ if and only if $\mr{ob}(\xi_A) = 0$;
    \item $T^1 \otimes I$ acts transitively on the fibers of $D(B) \to D(A)$;
    \item If $A = k$, then the action of $T^1 \otimes I$ acts simply transitively on $D(B)$.
\end{enumerate}
Note that because $T^1$ acts simply transitively on $D(k[\ep])$, we must have $T^1 = D(k[\ep])$. On the other hand, $T^2$ is not canonical.

\begin{thm}
    The deformations $D_{\mc{F}}$ admits a tangent-obstruction theory with $T^1 = \Ext^1_X(\mc{F}, \mc{F})$ and $T^2 = \Ext^2_X(\mc{F}, \mc{F})$.
\end{thm}

\begin{proof}
    We claim that if $D$ satisfies $(H_1)$ and $(H_2)$, then $D(k[\ep]) \otimes I$ naturally acts on $D(B)$ for small extensions $0 \to I \to B \to A \to 0$. To see this, note that $D(k[\ep]) \otimes_k I = D(k[I])$. We also note that by $(H_2)$, $D(k[I]) \times D(B) = D(k[I] \times_k B)$. Now define $\alpha \colon k[I] \times_k B \to B$ by $\alpha(1+i, b) = 1 + b$, and this gives us an action of $D(k[I]) \times D(B) = D(k[I] \times_k B) \xrightarrow{\alpha_*} D(B)$. To prove transitivity, apply $(H_1)$ to the diagram
    \begin{equation*}
    \begin{tikzcd}
        k[I] \times_k B \ar{r}{\alpha} \ar{d}{\pi_B} & B \ar{d} \\
        B\ar{r} & A.
    \end{tikzcd}
    \end{equation*}
    
    Now we will consider obstructions. We will assume again that $\mc{F}$ is a rank $r$ vector bundle, which we will call $\mc{E}$. Let
    \[ 0 \to I \to B \to A \to 0 \]
    be a small extension, so we will consider $H^2(X, \End(\mc{E}))$. Consider an open cover $(U_i)$ and $g_{ij} \in \Aut(\mc{O}_X^{\oplus r} \otimes_k A)(U_{ij})$. We want to lift these to $h_{ij} \in \Aut(\mc{O}_X^{\oplus r} \otimes_k B)(U_{ij})$. If this is possible, we have a cocycle
    \[ h_{ij}^{-1} h_{ij} h_{jk} \in 1 + \End(\mc{O}_X^{\oplus r} \otimes_k I)(U_{ij}), \]
    and the cocycle condition is satisfied when $h_{ij}^{-1} h_{ij} h_{ik} = 1$. If any other $h'_{ij} = h_{ij} +  s_{ij}$, then we note that
    \[ {(h'_{ij})}^{-1} h'_{ij} h'_{jk} = h_{ik}^{-1} h_{ij} h_{jk} + (- s_{ik} g_{ij} g_{jk} + g_{ik}^{-1} s_{ij} g_{ij} + g_{ik}^{-1} g_{ij} s_{jk}), \]
    and this gives us a class in $H^2(X, \End(\mc{E})) \otimes I$.
\end{proof}

\begin{rmk}
    Let $R$ be the hull of $D$, which means we have a morphism $h_R \to D$. Then we know $R = k[[t_1, \ldots, t_{d_11}]] / (f_1, \ldots, f_{d_2})$. We also know that $d_1 - d_2 \leq \dim R \leq d_1$.
\end{rmk}

\begin{exm}[Good example]
    Let $X$ be a smooth projective curve and $\mc{E}$ be a rank $r$ vector bundle. Then we know that 
    \[ T^1 = H^1(X, \End(\mc{E})), \qquad T^2 = H^2(X, \End(\mc{E})) = 0, \]
    so deformations of $\mc{E}$ are unobstructed. Now assume that $\mc{E}$ is simple. Then $H^0(X, \End(\mc{E})) = k$ by definition, and we also know that $D_{\ep}$ is pro-represented by some ring $R$ with 
    \[ \dim R = h^1(X, \End(\mc{E})) = r^2(g-1) + 1 \]
    by Riemann-Roch.
\end{exm}

\begin{exm}[Bad example]
    Let $X$ be a smoorh projective variety and $\mc{E}$ be a rank $r$ vector bundle on $X$. Let $\mc{E}_1, \mc{E}_2 = D_{\mc{E}}(k[\ep])$. Then $(\mc{E}_1, \mc{E}_2) \in D_{\mc{E}}(k[\ep_1, \ep_2] / (\ep_1^2, \ep_1 \ep_2, \ep_2^2))$, and we would like to lift to $D_{\mc{E}}(k[\ep_1, \ep_2]/(\ep_1^2, \ep_2^2))$.

    We will compute the obstruction explicitly. We know $\mc{E}_1, \mc{E}_2$ give us classes $u_1, u_2 \in H^1(X, \End(\mc{E}))$, and after some magical computation, the obstruction to lifting is given by
    \[ u_1 \smile u_2 + u_2 \smile u_1, \]
    where the cup product comes from the algebra structure on $\End(\mc{E})$.

    Now let $X = C_1 \times C_2$ be a product of curves. Then $H^1(X, \mc{O}_X) = H^1(C, \mc{O}_{C_1}) \oplus H^1(C_2, \mc{O}_{C_2})$ and $H^2(X, \mc{O}_X) = H^1(C, \mc{O}_{C_1}) \otimes_j H^2(C_2, \mc{O}_{C_2})$. Suppose that $\alpha_1 \in H^1(C_1, \mc{O}_{C_1})$ and $\alpha_2 \in H^1(C_2, \mc{O}_{C_2})$ with nonzero cup product. Then we simply set $\mc{E} = \mc{O}_X \oplus \mc{O}_X$ and 
    \[ u_1 = \mqty(0 & \alpha_1 \\ 0 & 0) \qquad u_2 = \mqty(0 & 0 \\ \alpha_2 & 0) \qquad u_1 \smile u_2 + u_2 \smile u_1 = \mqty(\dmat{\alpha_1 \smile \alpha_2, \alpha_2 \smile \alpha_1}). \]
    this gives us our obstructed deformation.
\end{exm}

\chapter{Patrick (Oct 15): Deformations of singularities}%
\label{cha:patrick_oct_15_deformations_of_singularities}

We begin by fixing some notation.
Let $k$ be a field and $R = P/I$, where $P = k[x_1, \ldots, x_n]$ and $I = (f_1, \ldots, f_r)$ is an ideal. Throughout this lecture, we will denote local Artinian rings with residue field $k$ by $A,B,C,\ldots$ and rings by $R,S,T,\ldots$ Finally, denote $Z = \Spec R$.

\section{Explicit criteria for flatness}%
\label{sec:explicit_criteria_for_flatness}

We will study (embedded) deformations of singular affine schemes embedded in $\A^n$. The first thing we want to understand is to explicitly understand flatness of some $R_A$ over $A$, where $R_A \otimes_A k = R$. We will write $R_A = P_A / I_A$, where $P_A = A[x_1, \ldots, x_n] = A \otimes_k P$. Recall that over a Noetherian local ring $S$ with residue field $k$, a module $M$ is flat if and only if it is free, and this is equivalent to $\Tor_1^S(M, k) = 0$ by standard results in commutative algebra.

Now consider the exact sequence
\[ 0 \to I_A \to P_A \to R_A \to 0. \]
After tensoring with $k$, we have 
\[ 0 \to \Tor_1(R_A, k) \to I_A \otimes_A k \to P \to R \to 0. \]
Therefore, we know that $R_A$ is flat over $A$ if and only if $I_A \otimes_A k = I$. We would like to understand this statement.

Consider a presentation
\[ P^s_A \to P_A^r \to I_A \to 0 \]
of $I_A$. Then we know $R_A$ is flat over $A$ if and only if after tensoring with $k$, we obtain an exact sequence
\[ P^s \to P^r \to I \to 0. \]
Note that to give this presentation $P^s \to P^r \to I \to 0$ is the same as giving a complete set of relations among the generators of $I$.

\begin{prop}
    Suppose that 
    \begin{equation} P^s \to P^r \to P \to R \to 0 \end{equation}
    is exact and
    \begin{equation} P_A^s \to P_A^r \to P_A \to R_A \to 0 \end{equation}
    is a complex such that $P_A^r \to R_A \to R_A \to 0$ is exact and tensoring (2) with $k$ gives (1). Then $R_A$ is flat over $A$.
\end{prop}

\begin{proof}
    Note that the hypotheses are equivalent to the fact that all relations in $I$ can be lifted to $I_A$. Now given $g_1', \ldots, g_r' \in P_A$ such that 
    \[ \sum_{i=1}^r g_i' f_i' = 0, \]
    this clearly descends to a relation in $I$ by killing the maximal ideal of $A$. But now if we choose a complete set of relations for $I_A$, this descends to a complete set of relations in $I$, so we may in fact assume that (2) is exact.

    In this case, there exists some $L_A$ such that the sequence splits as
    \[ P_A^s \to L_A \to 0 \qquad 0 \to L_A \to P_A^r \to I_A \to 0 \qquad 0 \to I_A \to P_A \to R_A \to 0. \]
    By right exactness of the tensor product, we know $P_A^{s} \otimes k \to L_A \otimes k \to 0$ is exact. We also know that
    \[ L_A \otimes k \to P_A^r \otimes k \to I_A \otimes k \to 0 \]
    is exact, again by right exactness. But this means that $I_A \otimes k$ is the cokernel of $P^s \to P^r$, and therefore $I_A \otimes k = I$. This means that $R_A$ is flat.
\end{proof}

\begin{cor}
    Let $R = P/I$ and $R_A = P_A / I_A$, where $I = (f_1, \ldots, f_r)$ and $I_A = (f_1', \ldots, f_r')$ such that $f_i'$ is a lift of $f_i$. Then $R_A$ is flat over $A$ if and only if every relation among the $f_i$ lifts to a relation among the $f_i'$.
\end{cor}

\begin{rmk}
    This result essentially gives us that first-order embedded deformations of $\Spec R \subset \A^n$ are given by $\Hom(I, R)$. The first-order (not embedded) deformations of $Z$ are given by the cokernel of
    \[ 0 \to T_X \to T_{\A^n}|_X \to N_{X/\A^n}, \]
    which arises from the exact sequence
    \[ I/I^2 \to \Omega^1_{\A^n}|_X \to \Omega^1_X \to 0, \]
    and this is supported on the singular points of $X$, so when $X$ has isolated singularities, this is finite-dimensional.
\end{rmk}

Note that if $\Spec R \subset \A^n$ is a complete intersection, then $I$ is generated by a regular sequence, so in particular the Koszul complex is a free resolution of $R$ and therefore there are only trivial relations among the $f_i$ (this means the relations are generated by $f_i f_j - f_j f_i = 0$). Clearly, because we are only considering commutative rings (after all, this is normal algebraic geometry), this means that all deformations of $\Spec R$ are unobstructed.

\section{Hilbert schemes of smooth surfaces}%
\label{sec:hilbert_schemes_of_smooth_surfaces}

We will prove that deformations of finite length closed subschemes of $\A^2$ are unobstructed. In particular, this will imply that the Hilbert scheme $\mr{Hilb}(\A^2, n)$ is smooth.

Let $Z \subset \A^2$ be a closed subscheme of dimension $0$. Then because $P = k[x,y]$ has dimension $2$, there exists a free resolution
\[ 0 \to P^s \xrightarrow{(g_{ij})} P^r \to P \to R \to 0 \]
of $R$. In this case it is possible to understand the matrix $(g_{ij})$, and in fact this is the special case of a more general result. First, when we study the local behavior, we have the following result.
\begin{thm}[Hilbert, Burch]
    Let $P$ be a regular local ring of dimension $n$ and $R = P/I$ be a Cohen-Macaulay quotient of codimension $2$. Then there exists an $(r-1) \times r$ matrix $G = (g_{ij})$ whose maximal minors $f_1, \ldots, f_r$ minimally generate $I$, and there is a free resolution
    \[ 0 \to P^{r-1} \xrightarrow{(g_{ij})} P^r \xrightarrow{(f_i)} P \to R \to 0. \]
\end{thm}

\begin{proof}
    Note that the fact that the free resolution has this length is a corollary of the Auslander-Buchsbaum formula, which says that for a ring $R$ and module $M$, we have
    \[ \depth M + \operatorname{proj.dim} M = \depth R \]
    and the fact that depth equals dimension for Cohen-Macaulay things. Thus we have a free resolution
    \[ 0 \to P^{r-1} \xrightarrow{(g_{ij})} P^r \xrightarrow{(a_i)} P \to R \to 0, \]
    where $a_1, \ldots, a_r$ are a minimal set of generators for $I$. Let $f_i$ is ${(-1)}^i$ times the determinant of the $i$-th minor of $g_{ij}$. We will prove that the map $(f_i)$ is the same as the map $(a_i)$; clearly
    \[ 0 \to P^{r-1} \xrightarrow{(g_{ij})} P^r \xrightarrow{(f_i)} P \to R \to 0. \]
    is a resolution. This is because at the generic point of $P$, we know $(g_{ij})$ is injective, so at least one $f_i$ is nonzero. But then we know $\coker (g_{ij})$ is torsion-free (because $I$ is torsion-free), and so it in fact must vanish by rank reasons. Thus $(a_1, \ldots, a_{r})$ and $(f_1, \ldots, f_{r})$ are isomorphic as $P$-modules.

    At a codimension $1$ point in $\Spec P$, note that $0 \to P^{r-1} \to P^r \xrightarrow{(a_i)} P \to B \to 0$ is split exact (because $I$ has codimension $2$). This implies that at least one $f_i$ is a unit, and thus $(f_1, \ldots, f_r)$ has codimension at least $2$. But then the isomorphism $I \cong (f_1, \ldots, f_r)$ is given by multiplication by some nonzero element of $P$ which is a unit away from codimension $2$. But this means it is a unit everywhere.
\end{proof}

Considering the global picture in $\A^n$, we obtain the following result.
\begin{thm}[Hilbert, Schaps]
    Let $Z = \Spec R \subset \A^n$ be a Cohen-Macaulay closed subscheme of codimension $2$. Then $R = P/I$ has a free resolution of the form
    \[ 0 \to P^{r-1} \xrightarrow{(g_{ij})} P^r \xrightarrow{(f_i)} P \to R \to 0 \]
    where the $f_i$ are the maximal minors of the matrix $(g_{ij})$.
\end{thm}

This result in fact holds over any Artinian local ring $A$, which we will use later.

Next, we want to understand what happens if we choose some Artinian local ring with residue field $k$ and lift the $g_{ij}$ to $g_{ij}'$, where $g_{ij}' \in P_A$.

\begin{thm}[Schaps]
    If $A$ is a square zero extension of $k$, then the sequence
    \[ 0 \to P_A^{r-1} \xrightarrow{(g_{ij}')} P_A^r \xrightarrow{(f_i')} P_A \to R_A \to 0 \]
    is exact. Moreover, any lifting of $R$ over $A$ arises by lifting the matrix $(g_{ij})$.
\end{thm}

\begin{proof}
    We know that 
    \[ L_A^{\bullet} \coloneqq P_A^{r-1} \to P_A^r \to P_A \]
    is a complex. This is because composing the two maps amounts to evaluating determinants with a repeated column. Because $P_A$ is free (and therefore flat), we can tensor with the exact sequence
    \[ 0 \to \mf{m}_A \to A \to k \to 0 \]
    to obtain an exact sequence of complexes
    \[ 0 \to L_A^{\bullet} \otimes_A \mf{m}_A \to L_A^{\bullet} \to L_A^{\bullet} \otimes_A k \to 0. \]
    Note that 
    \[ L_A^{\bullet} \otimes_A k = P^{r-1} \xrightarrow{(g_{ij})} P^r \xrightarrow{(f_i)} P \eqqcolon L^{\bullet}. \]
    In particular, this term is exact by Hilbert-Schaps. In addition, clearly $L_A^{\bullet} \otimes_A \mf{m}_A = L^{\bullet} \otimes_k \mf{m}_A$ because $A \to k$ is a square zero extension, so the complex $L_A^{\bullet} \otimes_A \mf{m}_A$ is exact. By the long exact sequence in homology, we know that $L_A^{\bullet}$ is exact. Note that $L^{\bullet}$ extends to an exact sequence
    \[ 0 \to P^{r-1} \to P^r \to P \to R \to 0, \]
    and $L_A^{\bullet}$ extends to an exact sequence
    \[ 0 \to P_A^{r-1} \to P_A^r \to P_A \to R_A \to 0. \]
    However, by the homology long exact sequence, we have an exact sequence
    \[ 0 \to R \otimes_k \mf{m}_A \to R_A \to R \to 0. \]
    But this implies that $R_A \otimes_A k = R$. Finally, by the local criterion for flatness, we see that $R_A$ is flat over $A$.

    Let $R_A = P_A / I_A$ be a lifting of $R$ over $A$. Lift $f_i \in I$ to $h_i \in I_A$. By Nakayama, these generate $I_A$, so we obtain a free resolution
    \[ 0 \to P_A^{r-1} \xrightarrow{(g_{ij}')} P_A^r \xrightarrow{(h_i)} P_A \to R_A \to 0, \]
    where $g_{ij}'$ lift the $g_{ij}$. However, we already have a lift
    \[ 0 \to P_A^{r-1} \xrightarrow{(g_{ij}')} P_A^r \xrightarrow{(f_i')} P_A \to R_A' \to 0, \]
    and so we must show $R_A = R_A'$. But we know that the ideals $I_A = (h_1, \ldots, h_r)$ and $I_A' = (f_1', \ldots, f_r')$ are isomorphic as $P_A$-modules. But then if we restrict this isomorphism to $\A^n_A \setminus \supp B$, we obtain a unit in $H^0(\A^n_A \setminus \supp B, \mc{O}_{\A^n_A})$. Because functions extend over codimension $2$, we have $H^0(\A^n_A \setminus \supp B, \mc{O}_{\A^n_A}) = P_A$, so this is a global unit. This gives the desired result.
\end{proof}

This result holds if we replace $A \to k$ with any square-zero extension of Artinian local rings $B \to A$ and $P, P_A$ with flat things, and so we see that (embedded) deformations of codimension $2$ Cohen-Macaulay subschemes of $\A^n$ are unobstructed. In particular, any dimension $0$ closed subscheme $Z \subset \A^2$ is automatically Cohen-Macaulay (because it is dimension $0$), so its embedded deformations are unobstructed. By some cohomological argument, the tangent space to $\mr{Hilb}(\A^2, n)$ is isomorphic to $\Hom(R, R)$ and has dimension $2n$, so 

\section{An obstructed deformation}%
\label{sec:an_obstructed_deformation}

Let $R = k[x,y,z]/(z^2, xy, xz, yz)$. Note that this scheme has an embedded point at the origin, so in particular it is \textbf{not} Cohen-Macaulay.

\begin{figure}[H]
\begin{center}
\begin{tikzpicture}[scale=1, transform shape]
    \draw[-,thick] (0,-2) -- (0,2);
    \draw[-,thick] (-2,0) -- (2,0);
    \filldraw[black] (0,0) circle (2pt);
    \draw[->] (0,0) -- (0.5,0.5) node[above,right] {$z$};
\end{tikzpicture}
\end{center}
\caption{Drawing of $\Spec R$}%
\label{fig:}
\end{figure}

We will study embedded deformations of $\Spec R$ and see that they are obstructed. In particular, we will choose two deformations of $R$ over $k[\ep]$ that cannot be simultaneously lifted. We claim that a complete set of relations (using the ordering $(xy, xz, yz, z^2)$ for the generators of $I$) is given by the matrix
\[ G = \mqty(z & -y & 0 & 0 \\ z & 0 & -x & 0 \\ 0 & z & 0 & -x \\ 0 & 0 & z & -y). \]

Now a first-order deformation of $\Spec R$ is given by lifting $(xy,xz,yz,z^2)$ over $k[\ep]$, and the first candidate is to consider $I_{\ep_1} = (xy + \ep_1 y, xz, yz, z^2)$. Then we note that
\[ G \mqty(xy+\ep_1 y \\ xz \\ yz \\ z^2) = \ep_1 \mqty(yz \\ yz \\ 0 \\ 0), \]
and we can lift $G$ to kill this vector with the matrix
\[ G_{\ep_1} = \mqty(z & -y & -\ep_1 & 0 \\ z & 0 & -x-\ep_1 & 0 \\ 0 & z & 0 & -x \\ 0 & 0 & z & -y) = G + \mqty(0 & 0 & -\ep_1 & 0 \\ 0 & 0 & -\ep_1 & 0 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0) \eqqcolon G + G_1. \]

Next consider the deformation given by $I_{\ep_2} = (xy, xz, yz+\ep_2 z, z^2)$. We note that
\[ G \mqty(xy \\ xz \\ yz + \ep_2 z \\ z^2) = \ep_2 \mqty(0 \\ -xz \\ 0 \\ z^2), \]
and we can lift $G$ to kill this vector with the matrix
\[ G_{\ep_2} = \mqty(z & -y & 0 & 0 \\ z & \ep_2 & -x & 0 \\ 0 & z & 0 & -x \\ 0 & 0 & z & -y - \ep_2) = G + \mqty(0 & \ep_2 & 0 & 0 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & -\ep_2 \\ 0 & 0 & 0 & 0) \eqqcolon G + G_2. \]

Now we consider $I_{\ep_1^2, \ep_2^2, \ep_1\ep_2} = (xy+\ep_1 y, xz, yz + \ep_2 z, z^2)$ and attempt to lift this deformation to $k[\ep_1, \ep_2]/(\ep_1^2, \ep_2^2)$. Note that 
\begin{align*} 
    (G + G_1 + G_2) \mqty(xy+\ep_1 y \\ xz \\ yz+\ep_2 z \\ z^2) &= \mqty(z & -y & -\ep_1 & 0 \\ z & \ep_2 & -x-\ep_1 & 0 \\ 0 & z & 0 & -x \\ 0 & 0 & z & -y - \ep_2) \mqty(xy+\ep_1 y \\ xz \\ yz+\ep_2 z \\ z^2) \\
    &= \ep_1 \ep_2 \mqty(-z \\ -z \\ 0 \\ 0),
\end{align*}
and clearly $z \notin I$, so in fact we cannot lift this deformation to $k[\ep_1, \ep_2]/(\ep_1^2, \ep_2^2)$. This proves obstructedness.

\chapter{Avi (Oct 22): Local-global methods}%
\label{cha:avi_oct_22_local_global_methods}

\section{Curves with isolated singularities}%
\label{sec:curves_with_isolated_singularities}

Here, we will consider the same lifting problems that we have consider before. Let $X$ be a curve over $k$ and consider $p \colon \mr{Def}_X \to \mc{C}$ be the deformations of $X$ as a category cofibered over $\mc{C}$. 

\begin{defn}
    A functor $F \colon D_1 \to D_2$ is \textit{smooth} if given $\varphi \colon A' \twoheadrightarrow A$ and $(Z, A') \to F(Y, Z)$ over $\varphi$ over $\varphi$ and $(Y', A') \to (Y, A)$ over $\varphi$ in $D_1$, then there exists some $F(Y', A') \to (Z, A')$ over the identity in $A'$.
\end{defn}

There is an absolute notion, for $D_1$ to be smooth, where we set $D_2 = \mr{Def}_k$ to be the category of trivial deformations. In this case, we also called $D_1$ \textit{unobstructed}, and this corresponds to being unobstructed in the tangent-obstruction theory.

\begin{thm}[Local-to-global]
    Let $X/k$ be separated of dimension at most $1$ and smooth away from finitely many points. At each singularity $p_1, \ldots, p_n$, consider the inclusions
    \[ \mc{O}_{X,p} \to \mc{O}_{X,p}^h \to \wh{\mc{O}}_{X,p} \]
    into the henselizations and completions, respectively. Then the functors
    \[ \mr{Def}_X \to \prod_i \mr{Def}_{\mc{O}_{X,p}} \xrightarrow{(2)} \prod \Def_{\mc{O}_{X,p}^h} \xrightarrow{(3)} \prod \Def_{\wh{\mc{O}}_{X,p}} \]
    are all smooth and $(2), (3)$ induce isomorphisms on tangent spaces.
\end{thm}

This means that we only have to check unobstructedness at the completions of the local rings at each singular point.

\begin{proof}
    First, we can reduce to the affine case.\footnote{Avi says that Johan sketched this proof and then said not to give it.} If $X$ is a curve, then $X = U_1 \cup U_2$ can be covered by two affine opens such that $U_1, U_1 \cap U_2$ are smooth. Because deformations of smooth affine schemes are unobstructed, we can essentially ignore $U_1$. To do this, we will prove that $\Def_X \to \Def_{U_2}$ is smooth.

    Because smoothness (roughly) respects products, the functor
    \[ \Def_X \to \Def_{U_1} \times_{\Def_{U_1 \cap U_2}} \Def_{U_2} \]
    is smooth by formal reasons. Because $U_1, U_1 \cap U_2$ are smooth, we can ignore $\Def_{U_1}, \Def_{U_1 \cap U_2}$ (in fact, the arrow is an equivalence) and project down to $\Def_{U_2}$.

    Now $U_2 = \Spec P$ is affine. Then each $p_i$ gives a maximal ideal $\mf{m}_i$, and so we set $J = \bigcap_i \mf{m}_i$. If we consider the completion $\wh{P}_J$ with respect to $J$, this decomposes as
    \[ \wh{P}_J = \prod_i \wh{P}_i. \]
    Applying \href{https://stacks.math.columbia.edu/tag/0DZ5}{Lemma 91.12.5} in the Stacks Project, the functor
    \[ \Def_P \to \Def_{\wh{P}_J} \simeq \prod_i \Def_{\wh{P}_i} = \prod_i \Def_{\wh{\mc{O}}_{X,p_i}} \]
    is smooth and an isomorphism on tangent spaces. The henselization step is similar.
\end{proof}

\begin{exm}
    Let $X = \Spec k[x,y]/(xy)$. Then $\wh{O}_{X,0} = k[[x,y]] / (xy)$. We will show that all deformations look like $k[x,y] / (xy-t)$ in some sense. Really, we will show that $\Def_X$ has a hull, which is given by $k[[t]]$ with universal deformation
    \[ X_t \coloneqq \Spec k[[t]] [x,y] / (xy-t) \to \Spec k[[t]]. \]
    We want $T$ such that $\Hom(T, -) \to \Def_X$ is smooth and induces an isomorphism on tangent spaces. Given a morphism
    \[ f \colon k[[t]] \to A \ni f(t), \]
    we obtain a deformation
    \[ A[[x,y]] / (xy - f(t)) \]
    of $k[[x,y]]/(xy)$. We can check that this is smooth, and so we need to check that we have an isomorphism of tangent spaces.

    We want to compute $\Def_X(k[\ep])$. If $S \in \Def_X(k[\ep])$, set $R = k[[x,y]]/(x,y)$, and we have a diagram
    \begin{equation*}
    \begin{tikzcd}
        k[\ep] \ar{r} \ar{d} & k \ar{d} \\
        S \ar{r} & R.
    \end{tikzcd}
    \end{equation*}
    If we consider the exact sequence
    \[ 0 \to k \to k[\ep] \to k \to 0 \]
    and tensor with $S$, by flatness we have an exact sequence
    \[ 0 \to k \otimes_{k[\ep]} S \to S \to k \otimes_{k[\ep]} S \to 0. \]
    But because $k \otimes_{k[\ep]} S = R$, we have a decomposition $S = R \oplus \ep R$. If we choose lifts $\wt{x}, \wt{y}$ of $x,y$, the product $\wt{x} \wt{y}$ lifts $xy = 0$, so $\wt{x} \wt{y} = (f(x) + g(y)) \ep$. If we choose different lifts $\wt{x}' = \wt{x} + \ep h, \wt{y}' = \wt{y} + \ep h$, we see that 
    \[ \wt{x}' \wt{y}' = \wt{x} \wt{y} + (xj + yh)\ep. \]
    But now $xj+yh \in (x,y)$, and so if we set $t = f(0) + g(0)$, then we can write $\wt{x} \wt{y} \in t \ep + (x,y) \ep$, and so there is a canonical choice of the element of $(x,y) \ep$, namely $0$. Thus we can set
    \[ S_t = k[\ep][[\wt{x}, \wt{y}]] / (\wt{x} \wt{y} - t \ep), \]
    and now we have a diagram
    \begin{equation*}
    \begin{tikzcd}
        0 \ar{r} & R \ar{r} \ar[equals]{d} & S_t \ar{r} \ar{d} & R \ar{r} \ar[equals]{d} & 0 \\
        0 \ar{r} & R \ar{r} & S \ar{r} & R \ar{r} & 0.
    \end{tikzcd}
    \end{equation*}
    By the five lemma, $S_t \simeq S$, and so we are done.
\end{exm}

\section{Smooth curves with a finite group action}%
\label{sec:smooth_curves_with_a_finite_group_action}

In this section, we will consider lifting from characteristic $p>0$ to characteristic $0$. This means we will have to redefine what lifting. Here, we will suppose $k = \ol{k}$ with characteristic $p$. Let $\Lambda$ be a Noetherian complete local ring with residue field $k$. We define $\mc{C}_{\Lambda}$ be the category of local Artinian $\Lambda$-algebras with residue field $k$.\footnote{Apparently this is interesting in \sout{infinite combinatorics} number theory.}

Forgetting about the requirement that $k$ is algebraically closed, if $k = \F_p$, then we can set $\Lambda = \Z_p$. Let $W = W(k)$ be the ring of Witt vectors in $k$. This is apparently some universal Noetherian local ring lifting $k$, and for example, $W(\F_p) = \Z_p$, and $W(\ol{\F}_p) = \mc{O}_{\check{\Q}_p}$. We will consider some extension $\mc{O}/W$ of rings and write $K$ for the fraction field of $\mc{O}$.

We are interested in deforming smooth proper curves $X/k$ with the action of some finite group $G$, conveniently denoted as a pair $(X, G)$.

\begin{defn}
    The pair $(X, G)$ \textit{lifts to characteristic $0$} if there exists $\mc{O}$ and $\mc{X} / \mc{O}$ a projective smooth curve with an action of $G$ such that $(\mc{X} \times_0 k, G) \simeq (X, G)$.
\end{defn}

Given the action of $G$ on $X$, we can construct the quotient $X/G$. To remember the data of the action, we remember the ramified Galois cover $\pi \colon X \to X/G$.\footnote{This is useful if you want to look at some of the omitted proofs.}

Consider the action of $\mr{PGL}_2(\F_q)$ on $\P^1_k$. This includes in $\P^1_{\mc{O}}$, which has an action of $\mr{PGL}_2(\mc{O}) \subset \mr{PGL}_2(K)$. We want an embedding $\mr{PGL}_2(\F_q) \subseteq \mr{PGL}_2(K)$, but generally this is not possible. For example, set $q = 9$ and consider the matrices
\[ \mqty(0 & -1 \\ 1 & -1), \qquad \mqty(a+1 & a \\ -a & 1-a), \]
which generate a $(\Z/3)^3$. But then all finite subgroups of $\mr{PGL}_2(K)$ are cyclic, dihedral, $A_4$, $A_5$, or $S_4$, so this action clearly cannot lift.

\begin{prop}
    Suppose $(X,G)$ is such that for all $x \in X$, the stabilizer $G_x$ has order $\abs{G_x}$ prime to $p$. Then $(X, G)$ lifts to characteristic $0$.
\end{prop}

Note that this is some local statement, so we need some kind of local-to-global method. Recall that $\wh{\mc{O}}_{X,x} = k[[t]]$, and this has an action of $G_x$. Thus we define a local action as some action of a finite group $G$ on $k[[t]]$, and this lifts if there exists $\mc{O}$ with an action of $G$ on $\mc{O}[[t]]$ specializing to the original action on $k[[t]]$.

\begin{thm}
    For $(X, G)$, suppose that the local action of $G_x$ on $\wh{\mc{O}}_{X,x}$ lifts to characteristic $0$. Then $(X, G)$ lifts to characteristic $0$.\footnote{Avi was lured in to a paper with French title and French body but English abstract, and in the end did not read this paper.}
\end{thm}

It is a fact that if $G$ acts faithfully on $k[[t]]$, then $G = P \rtimes C$, where $P$ is $P$-Sylow and $C$ is cyclic.

\begin{proof}[Proof of proposition]
    We will simply prove that if $\abs{G_x}$ is prime to $p$, then the local action lifts. Then we know that $G_x = G$ is cyclic of order $n$ with generator $\sigma$. If we write
    \[ \sigma^i t = \sum_{m \geq 0} a_{m,i} t^i, \]
    then of course if $a_{0,i} \neq 0$, then $\sigma^i t$ is a unit and hence $t$ is a unit, so $a_{0,i} = 0$. Our goal is to replace $t$ by some generator with a more explicit action of $\sigma$. Let $V$ be the vector space spanned by $\sigma^i t$. Then on our designated basis, we have
    \[ \sigma = \mqty( & & & & & 1 \\ 1 & & & & & \\ & 1 & & & & \\ & & 1 & & & \\ & & & \ddots & & \\ & & & & 1 &). \]
    This has eigenvalues the $n$-th roots of $1$, so we choose $z \in V$ such that $\sigma z = \zeta_n z$ and replace $k[[z]] = k[[t]]$. But now the action of $\mu_n$ clearly lifts to characteristic $0$, so we are done.
\end{proof}

We have essentially proved that local actions of cyclic groups of order prime to $p$ lift to characteristic $0$. Here is a mild generalization:

\begin{conj}[Oort\footnote{Fun fact: Oort was Johan's advisor.}]
    The local action on $k[[t]]$ by the action of any cyclic $G$ lifts to characteristic $0$.
\end{conj}

This is now a theorem due to (among others?) Obus, Wewers, and Pop. Because of this, if the stabilizers $G_x$ are all cyclic, then $(X, G)$ lifts. However, this is not a necessary condition for lifting. If we consider an action of $(\Z/2)^2$ on $\P^1_k$, this does lift (because $D_4 = (\Z/2)^2$).









\end{document}
